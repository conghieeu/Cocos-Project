System.register("bundle://main/_virtual/AddAutoScale.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AutoScale.ts"],(function(e){var n,o,t,i,r,l,d,c,a;return{setters:[function(e){n=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,d=e.Node,c=e.Component},function(e){a=e.AutoScale}],execute:function(){var u,s,h,f,p;r._RF.push({},"da465iMnM1GsrHzOQCl0bpV","AddAutoScale",void 0);var C=l.ccclass,A=l.property,S=l.executeInEditMode;e("AddAutoScale",(u=C("AddAutoScale"),s=A({type:[d]}),u(h=S((p=n((f=function(e){function n(){for(var n,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return n=e.call.apply(e,[this].concat(r))||this,t(n,"nodesChildren",p,i(n)),n}o(n,e);var r=n.prototype;return r.start=function(){this.getNodesChildren(),this.addAutoScaleToChildren()},r.onEnable=function(){this.addAutoScaleToChildren()},r.onDisable=function(){this.removeAutoScaleFromChildren()},r.getNodesChildren=function(){var e=this;this.node.children.forEach((function(n){-1===e.nodesChildren.indexOf(n)&&e.nodesChildren.push(n)}))},r.addAutoScaleToChildren=function(){this.nodesChildren.forEach((function(e){e.getComponent(a)||e.addComponent(a)}))},r.removeAutoScaleFromChildren=function(){this.nodesChildren.forEach((function(e){null!=e&&e.isValid&&e.removeComponent("AutoScale")}))},n}(c)).prototype,"nodesChildren",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=f))||h)||h));r._RF.pop()}}}));

System.register("bundle://main/_virtual/AspectRatioFitter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MoveLayoutToCenter.ts"],(function(t){var i,e,o,s,n,a,h,r,l,c,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,h=t.Enum,r=t.UITransform,l=t.math,c=t.Component},function(t){p=t.MoveLayoutToCenter}],execute:function(){var d,u,g,w,R,f,F,m,v;n._RF.push({},"0793ei8zH1JaKjbFRWtksgw","AspectRatioFitter",void 0);var b=a.ccclass,y=a.property,A=a.executeInEditMode,z=a.requireComponent,M=function(t){return t[t.None=0]="None",t[t.FitInside=1]="FitInside",t[t.FitOutside=2]="FitOutside",t}(M||{});t("AspectRatioFitter",(d=b("AspectRatioFitter"),u=z(p),g=y({type:h(M)}),d(w=A(w=u((f=i((R=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return i=t.call.apply(t,[this].concat(n))||this,o(i,"aspectRatio",f,s(i)),o(i,"isFollowWidth",F,s(i)),o(i,"isFollowHeight",m,s(i)),o(i,"aspectMode",v,s(i)),i}e(i,t);var n=i.prototype;return n.onEnable=function(){this.getAspectRatio()},n.update=function(t){this.aspectMode==M.FitInside?this.InsideAspectRatio():this.aspectMode==M.FitOutside&&this.OutsideAspectRatio()},n.getAspectRatio=function(){var t=this.node.getComponent(r);if(t){var i=t.getBoundingBox();this.aspectRatio=i.width/i.height}},n.getRotatedDimensions=function(t,i,e){var o=l.toRadian(e),s=Math.abs(Math.cos(o)),n=Math.abs(Math.sin(o));return{width:t*s+i*n,height:t*n+i*s}},n.InsideAspectRatio=function(){var t=this.node.parent;if(t){var i=t.getComponent(r),e=this.node.getComponent(r);if(i&&e){var o,s,n=t.eulerAngles.z,a=this.getRotatedDimensions(i.width,i.height,n);this.isFollowWidth&&!this.isFollowHeight?s=(o=a.width)/this.aspectRatio:this.isFollowHeight&&!this.isFollowWidth?o=(s=a.height)*this.aspectRatio:this.isFollowWidth&&this.isFollowHeight&&(a.width/a.height<this.aspectRatio?s=(o=a.width)/this.aspectRatio:o=(s=a.height)*this.aspectRatio);var h=this.node.eulerAngles.z,l=this.getRotatedDimensions(o,s,-h);e.setContentSize(l.width,l.height)}}},n.OutsideAspectRatio=function(){var t=this.node.parent;if(t){var i=t.getComponent(r),e=this.node.getComponent(r);if(i&&e){var o,s,n=t.eulerAngles.z,a=this.getRotatedDimensions(i.width,i.height,n);this.isFollowWidth&&!this.isFollowHeight?s=(o=a.width)/this.aspectRatio:this.isFollowHeight&&!this.isFollowWidth?o=(s=a.height)*this.aspectRatio:this.isFollowWidth&&this.isFollowHeight&&(a.width/a.height>this.aspectRatio?s=(o=a.width)/this.aspectRatio:o=(s=a.height)*this.aspectRatio);var h=this.node.eulerAngles.z,l=this.getRotatedDimensions(o,s,-h);e.setContentSize(l.width,l.height)}}},i}(c)).prototype,"aspectRatio",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=i(R.prototype,"isFollowWidth",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=i(R.prototype,"isFollowHeight",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=i(R.prototype,"aspectMode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.FitInside}}),w=R))||w)||w)||w));n._RF.pop()}}}));

System.register("bundle://main/_virtual/AspectRatioFitterFollowNode.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,i,r,a,p,l,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,p=t.Node,l=t.UITransform,c=t.Size,u=t.Component}],execute:function(){var d,h,s,g,f,b,w,y,m,N,R,v,S,x,z,B,A,M,C,D,F;r._RF.push({},"864d0Fw0/9At6cyOWkzpUKZ","AspectRatioFitterFollowNode",void 0);var T=a.ccclass,W=a.property,K=a.executeInEditMode;t("AspectRatioFitterFollowNode",(d=T("AspectRatioFitterFollowNode"),h=W({type:p,tooltip:"Node bên trái để căn chỉnh"}),s=W({tooltip:"Khoảng cách với node bên trái"}),g=W({type:p,tooltip:"Node bên phải để căn chỉnh"}),f=W({tooltip:"Khoảng cách với node bên phải"}),b=W({type:p,tooltip:"Node phía dưới để căn chỉnh"}),w=W({tooltip:"Khoảng cách với node phía dưới"}),y=W({type:p,tooltip:"Node phía trên để căn chỉnh"}),m=W({tooltip:"Khoảng cách với node phía trên"}),N=W({type:Number,tooltip:"Tỷ lệ khung hình mong muốn (width / height)"}),d(R=K((S=e((v=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"leftNode",S,i(e)),n(e,"leftSpacing",x,i(e)),n(e,"rightNode",z,i(e)),n(e,"rightSpacing",B,i(e)),n(e,"nodeDown",A,i(e)),n(e,"downSpacing",M,i(e)),n(e,"nodeUp",C,i(e)),n(e,"upSpacing",D,i(e)),n(e,"aspectRatio",F,i(e)),e}o(e,t);var r=e.prototype;return r.onEnable=function(){this.setAspectRatio()},r.update=function(t){if(this.leftNode&&!this.nodeDown&&this.updateAspectRatioX(),this.nodeDown&&!this.leftNode)this.updateAspectRatioY();else if(this.leftNode&&this.nodeDown){var e=this.node.getComponent(l),o=this.leftNode.getComponent(l),n=this.nodeDown.getComponent(l);if(!e||!o||!n)return;var i=e.getBoundingBoxToWorld(),r=o.getBoundingBoxToWorld(),a=n.getBoundingBoxToWorld();Math.abs(i.xMin-r.xMin)-this.leftSpacing<Math.abs(i.yMax-a.yMin)-this.downSpacing?this.updateAspectRatioX():this.updateAspectRatioY()}},r.setAspectRatio=function(){var t=this.node.getComponent(l);t&&(this.aspectRatio=t.width/t.height)},r.updateAspectRatioX=function(){if(this.leftNode){var t=this.node.getComponent(l),e=this.leftNode.getComponent(l);if(t&&e){var o=t.getBoundingBoxToWorld(),n=e.getBoundingBoxToWorld(),i=Math.abs(o.xMin-n.xMin)-this.leftSpacing,r=i/this.aspectRatio;t.setContentSize(new c(i,r))}}},r.updateAspectRatioY=function(){if(this.nodeDown){var t=this.node.getComponent(l),e=this.nodeDown.getComponent(l);if(t&&e){var o=t.getBoundingBoxToWorld(),n=e.getBoundingBoxToWorld(),i=Math.abs(o.yMax-n.yMin)-this.downSpacing,r=i*this.aspectRatio;t.setContentSize(new c(r,i))}}},e}(u)).prototype,"leftNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(v.prototype,"leftSpacing",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=e(v.prototype,"rightNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(v.prototype,"rightSpacing",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=e(v.prototype,"nodeDown",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(v.prototype,"downSpacing",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=e(v.prototype,"nodeUp",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(v.prototype,"upSpacing",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=e(v.prototype,"aspectRatio",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),R=v))||R)||R));r._RF.pop()}}}));

System.register("bundle://main/_virtual/AspectRatioFitterHold.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,n,r,a,s,c,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.UITransform,c=t.Vec2,l=t.Component}],execute:function(){var p,h,u,d,f,g,w;r._RF.push({},"a19fdGvIKtE9YwpIcpyG/WH","AspectRatioFitterHold",void 0);var R=a.ccclass,v=a.property,y=a.executeInEditMode;t("AspectRatioFitterHold",R("AspectRatioFitterHold")(p=y((u=e((h=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"autoUpdate",u,n(e)),o(e,"aspectRatio",d,n(e)),o(e,"isFollowWidth",f,n(e)),o(e,"isFollowHeight",g,n(e)),o(e,"isHold",w,n(e)),e}i(e,t);var r=e.prototype;return r.start=function(){this.getAspectRatio()},r.update=function(t){this.autoUpdate&&(this.moveToParentCenter(),this.updateAspectRatio())},r.resetInEditor=function(){this.getAspectRatio(),this.autoUpdate=!0},r.getAspectRatio=function(){var t=this.node.getComponent(s);t&&(this.aspectRatio=t.width/t.height)},r.updateAspectRatio=function(){var t=this.node.parent;if(t){var e=t.getComponent(s),i=this.node.getComponent(s);if(e&&i){var o,n,r=e.width,a=e.height,c=r/a;if(this.isHold&&c<this.aspectRatio)return void i.setContentSize(e.contentSize.x,e.contentSize.y);this.isFollowWidth&&!this.isFollowHeight?n=(o=e.width)/this.aspectRatio:this.isFollowHeight&&!this.isFollowWidth?o=(n=e.height)*this.aspectRatio:this.isFollowWidth&&this.isFollowHeight&&(r/a<this.aspectRatio?n=(o=r)/this.aspectRatio:o=(n=a)*this.aspectRatio),i.setContentSize(o,n)}}},r.getParentPointCenter=function(){var t=this.node.parent;if(t){var e=t.getComponent(s),i=this.node.getComponent(s);if(e&&i){var o=e.contentSize,n=e.anchorPoint,r=i.anchorPoint;return new c(o.width*(.5-n.x+.5-r.x),o.height*(.5-n.y+.5-r.y))}}},r.moveToParentCenter=function(){var t=this.getParentPointCenter();t&&this.node.setPosition(t.x,t.y)},e}(l)).prototype,"autoUpdate",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=e(h.prototype,"aspectRatio",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=e(h.prototype,"isFollowWidth",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=e(h.prototype,"isFollowHeight",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w=e(h.prototype,"isHold",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=h))||p)||p);r._RF.pop()}}}));

System.register("bundle://main/_virtual/AspectRatioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,a,c,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Node,h=t.Component}],execute:function(){var s,u,d,l,p,g,f,m,v;r._RF.push({},"e11cfqa1xtGOYuEQEUxuh1o","AspectRatioManager",void 0);var y=a.ccclass,b=a.property;t("AspectRatioManager",(s=y("AspectRatioManager"),u=b({type:[c],tooltip:"Danh sách node sẽ được active khi ratio >= 1 (màn hình ngang)"}),d=b({type:[c],tooltip:"Danh sách node sẽ được active khi ratio < 1 (màn hình dọc)"}),l=b({tooltip:"Tỷ lệ khung hình tối thiểu"}),s((f=e((g=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"nodeWidth",f,o(e)),n(e,"nodeHeight",m,o(e)),n(e,"minRate",v,o(e)),e}i(e,t);var r=e.prototype;return r.update=function(t){this.getRate()<this.minRate?(this.setActiveNodes(this.nodeWidth,!1),this.setActiveNodes(this.nodeHeight,!0)):(this.setActiveNodes(this.nodeWidth,!0),this.setActiveNodes(this.nodeHeight,!1))},r.setActiveNodes=function(t,e){t.forEach((function(t){t&&(t.active=e)}))},r.getRate=function(){return(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)/(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)},e}(h)).prototype,"nodeWidth",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=e(g.prototype,"nodeHeight",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=e(g.prototype,"minRate",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p=g))||p));r._RF.pop()}}}));

System.register("bundle://main/_virtual/AutoChangeVideo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,o,r,n,a,s,d,l,c,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,s=e.VideoClip,d=e.VideoPlayer,l=e.CCFloat,c=e.sys,h=e.Component}],execute:function(){var u,y,v,p,f,V,P,m,C;n._RF.push({},"41bf6Zipe1BRKZimwotFmXo","AutoChangeVideo",void 0);var b=a.ccclass,g=a.property;e("AutoChangeVideo",(u=b("AutoChangeVideo"),y=g({type:[s],tooltip:"List of videos to play in sequence"}),v=g({type:d}),p=g({type:l,tooltip:"Delay between retries (seconds)"}),u((P=i((V=function(e){function i(){for(var i,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return i=e.call.apply(e,[this].concat(n))||this,o(i,"videoList",P,r(i)),o(i,"videoPlayer",m,r(i)),i.currentVideoIndex=0,i.retryCount=0,i.maxRetries=3,o(i,"retryDelay",C,r(i)),i}t(i,e);var n=i.prototype;return n.start=function(){var e=this;this.initializeVideo(),c.isBrowser&&(window.addEventListener("beforeunload",(function(){var i;localStorage.setItem("videoState",JSON.stringify({index:e.currentVideoIndex,time:(null==(i=e.videoPlayer)?void 0:i.currentTime)||0,timestamp:Date.now()}))})),this.checkPreviousState()),window.addEventListener("websiteLoaded",(function(){e.restartVideo()})),window.addEventListener("websiteVisibilityChanged",(function(i){i.detail.isVisible&&e.checkAndRestartVideo()}))},n.checkPreviousState=function(){var e=this;try{var i=localStorage.getItem("videoState");if(i){var t=JSON.parse(i);Date.now()-t.timestamp<3e3&&(this.currentVideoIndex=t.index,this.scheduleOnce((function(){e.playCurrentVideo(),e.videoPlayer&&(e.videoPlayer.currentTime=t.time)}),.5)),localStorage.removeItem("videoState")}}catch(e){console.error("Error restoring video state:",e)}},n.initializeVideo=function(){var e=this;this.videoPlayer&&0!==this.videoList.length?(this.videoPlayer.node.off("completed",this.onVideoCompleted,this),this.videoPlayer.node.off("error",this.onVideoError,this),this.videoPlayer.node.on("completed",this.onVideoCompleted,this),this.videoPlayer.node.on("error",this.onVideoError,this),this.scheduleOnce((function(){e.playCurrentVideo()}),.1)):console.warn("Video player or video list not properly initialized")},n.playCurrentVideo=function(){var e=this;this.currentVideoIndex>=this.videoList.length&&(this.currentVideoIndex=0);try{if(this.retryCount=0,c.isBrowser&&!navigator.onLine)return void this.scheduleOnce((function(){e.playCurrentVideo()}),1e3);this.videoPlayer.isPlaying&&this.videoPlayer.stop(),this.videoPlayer.clip=this.videoList[this.currentVideoIndex],this.scheduleOnce((function(){e.videoPlayer.play(),e.schedule(e.checkVideoPlayback,.5,5)}),.3)}catch(e){console.error("Error playing video:",e),this.handlePlaybackFailure()}},n.checkVideoPlayback=function(){this.videoPlayer&&!this.videoPlayer.isPlaying&&this.handlePlaybackFailure()},n.handlePlaybackFailure=function(){var e=this;this.retryCount<this.maxRetries?(console.warn("Retry attempt "+(this.retryCount+1)+" of "+this.maxRetries),this.retryCount++,this.scheduleOnce((function(){e.playCurrentVideo()}),this.retryDelay*this.retryCount)):(console.error("Max retries reached, moving to next video"),this.retryCount=0,this.currentVideoIndex++,this.playCurrentVideo())},n.checkAndRestartVideo=function(){!this.videoPlayer||this.videoPlayer.isPlaying&&this.videoPlayer.currentTime!==this.videoPlayer.duration||this.restartVideo()},n.onVideoCompleted=function(){this.currentVideoIndex++,this.playCurrentVideo()},n.onVideoError=function(e){console.error("Video playback error:",e),this.handlePlaybackFailure()},n.onDestroy=function(){this.videoPlayer&&(this.videoPlayer.node.off("completed",this.onVideoCompleted,this),this.videoPlayer.node.off("error",this.onVideoError,this)),window.removeEventListener("websiteLoaded",this.restartVideo),window.removeEventListener("websiteVisibilityChanged",null)},n.restartVideo=function(){this.currentVideoIndex=0,this.retryCount=0,this.initializeVideo()},i}(h)).prototype,"videoList",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=i(V.prototype,"videoPlayer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(V.prototype,"retryDelay",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=V))||f));n._RF.pop()}}}));

System.register("bundle://main/_virtual/AutoGridLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,r,s,a,u,p,l,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,a=t._decorator,u=t.Enum,p=t.Vec3,l=t.UITransform,c=t.Component}],execute:function(){var h,d,y,f,g,v,z;s._RF.push({},"1ba05WvYfhIeaasCJFisQ1o","AutoGridLayout",void 0);var C=a.ccclass,m=a.property,L=a.executeInEditMode,b=function(t){return t[t.None=0]="None",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical",t}(b||{}),T=function(t){return t[t.None=0]="None",t[t.Children=1]="Children",t}(T||{});t("AutoGridLayout",(h=C("AutoGridLayout"),d=m({type:u(b)}),y=m({type:u(T)}),h(f=L((v=e((g=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"sortType",v,n(e)),i(e,"resizeMode",z,n(e)),e}o(e,t);var s=e.prototype;return s.onLoad=function(){this.updateLayout()},s.update=function(t){this.updateLayout()},s.updateLayout=function(){var t=this.node.children;this.sortType!==b.None&&this.sortChildren(t),this.resizeMode===T.Children&&this.resizeChildren(t)},s.sortChildren=function(t){this.sortType===b.Horizontal?t.sort((function(t,e){return t.position.x-e.position.x})):this.sortType===b.Vertical&&t.sort((function(t,e){return t.position.y-e.position.y}));for(var e,o=0,i=r(t);!(e=i()).done;){var n=e.value;this.sortType===b.Horizontal?(n.setPosition(new p(o,n.position.y,n.position.z)),o+=n.getComponent(l).width):this.sortType===b.Vertical&&(n.setPosition(new p(n.position.x,o,n.position.z)),o+=n.getComponent(l).height)}},s.resizeChildren=function(t){for(var e,o=this.node.getComponent(l),i=o.width,n=o.height,s=r(t);!(e=s()).done;){var a=e.value.getComponent(l);a.width=i/t.length,a.height=n/t.length}},e}(c)).prototype,"sortType",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.None}}),z=e(g.prototype,"resizeMode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.None}}),f=g))||f)||f));s._RF.pop()}}}));

System.register("bundle://main/_virtual/AutoPlayClips.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var n,t,e,r,a,o,l,s;return{setters:[function(i){n=i.applyDecoratedDescriptor,t=i.inheritsLoose,e=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){a=i.cclegacy,o=i._decorator,l=i.Animation,s=i.Component}],execute:function(){var p,u,c,h,y;a._RF.push({},"98c21ufBJZJnIVe4nxgl9Oh","AutoPlayClips",void 0);var m=o.ccclass,f=o.property;i("PlayAnimationClips",(p=m("PlayAnimationClips"),u=f(l),p((y=n((h=function(i){function n(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return n=i.call.apply(i,[this].concat(a))||this,e(n,"anim",y,r(n)),n.currentClipIndex=0,n}t(n,i);var a=n.prototype;return a.start=function(){this.anim&&(this.anim.on(l.EventType.FINISHED,this.onAnimationFinished,this),this.playCurrentClip())},a.playCurrentClip=function(){var i=this.anim.clips;i.length>0&&(this.currentClipIndex>=i.length&&(this.currentClipIndex=0),this.anim.play(i[this.currentClipIndex].name))},a.onAnimationFinished=function(){this.currentClipIndex++,this.playCurrentClip()},a.onDestroy=function(){this.anim&&this.anim.off(l.EventType.FINISHED,this.onAnimationFinished,this)},n}(s)).prototype,"anim",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=h))||c));a._RF.pop()}}}));

System.register("bundle://main/_virtual/AutoScale.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,o,r,a,p,s,l,c;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,p=t.UITransform,s=t.Vec2,l=t.Vec3,c=t.Component}],execute:function(){var u,h,f,d,m,y,b,z,S,g,v;r._RF.push({},"37c5etQ80JE85LhXB+YB+i5","AutoScale",void 0);var w=a.ccclass,T=a.property,C=a.executeInEditMode;t("AutoScale",(u=w("AutoScale"),h=T({type:p,tooltip:"Node cha"}),f=T({type:s,tooltip:"Kích thước của node cha"}),d=T({type:s,tooltip:"Kích thước ban đầu của node con"}),m=T({type:s,tooltip:"Vị trí ban đầu của node con"}),u(y=C((z=n((b=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,i(n,"parentTransform",z,o(n)),i(n,"parentContentSize",S,o(n)),i(n,"contentSize",g,o(n)),i(n,"position",v,o(n)),n}e(n,t);var r=n.prototype;return r.onEnable=function(){var t,n,e,i,o;this.parentTransform=(null==(t=this.node.parent)?void 0:t.getComponent(p))||null,this.parentContentSize=new s((null==(n=this.parentTransform)?void 0:n.width)||0,(null==(e=this.parentTransform)?void 0:e.height)||0),this.contentSize=new s((null==(i=this.node.getComponent(p))?void 0:i.width)||0,(null==(o=this.node.getComponent(p))?void 0:o.height)||0),this.position=new s(this.node.position.x,this.node.position.y)},r.update=function(){this.updateUITransform()},r.updateUITransform=function(){var t;if(this.parentTransform){var n=this.parentTransform.width/this.parentContentSize.x,e=this.parentTransform.height/this.parentContentSize.y;null==(t=this.node.getComponent(p))||t.setContentSize(this.contentSize.x*n,this.contentSize.y*e),this.node.position=new l(this.position.x*n,this.position.y*e,0)}},n}(c)).prototype,"parentTransform",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(b.prototype,"parentContentSize",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0)}}),g=n(b.prototype,"contentSize",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0)}}),v=n(b.prototype,"position",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0)}}),y=b))||y)||y));r._RF.pop()}}}));

System.register("bundle://main/_virtual/LayoutTopDown.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,i,n,a,r,u,l,p,s,h,y;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,u=t._decorator,l=t.Node,p=t.Vec2,s=t.CCBoolean,h=t.UITransform,y=t.Component}],execute:function(){var c,m,f,g,d,T,w,b,z,C,L,B,S;r._RF.push({},"83a2frEQjZHUov4lKrm1iIU","LayoutTopDown",void 0);var v=u.ccclass,_=u.property,D=u.executeInEditMode;t("LayoutTopDown",(c=v("LayoutTopDown"),m=_({type:l,tooltip:"Layout trên"}),f=_({type:l,tooltip:"Layout dưới"}),g=_({type:p,visible:!1}),d=_({type:p,visible:!1}),T=_({type:s,tooltip:"Tự động cập nhật trong runtime"}),c(w=D((z=o((b=function(t){function o(){for(var o,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return(o=t.call.apply(t,[this].concat(a))||this)._parentTransform=null,i(o,"layoutTop",z,n(o)),i(o,"layoutBottom",C,n(o)),i(o,"layoutTopSize",L,n(o)),i(o,"layoutBottomSize",B,n(o)),i(o,"autoUpdate",S,n(o)),o}e(o,t);var r=o.prototype;return r.start=function(){this._parentTransform=this.node.getComponent(h)},r.resetInEditor=function(){this.autoUpdate=!0,this.getLayoutTopDown(),this.getLayoutSize(),this.updateLayout()},r.getLayoutTopDown=function(){this.layoutTop=this.node.children[1],this.layoutBottom=this.node.children[0],this.layoutTop.getComponent(h).setAnchorPoint(0,0),this.layoutBottom.getComponent(h).setAnchorPoint(0,0)},r.update=function(){this.autoUpdate&&this.updateLayout()},r.updateLayout=function(){if(this.layoutTop&&this.layoutBottom){for(var t,o=this._parentTransform.width,e=a(this.node.children);!(t=e()).done;){var i=t.value;i.getComponent(h).setContentSize(o,i.getComponent(h).height)}this.layoutTop.setPosition(0,this._parentTransform.height-this.layoutTop.getComponent(h).height),this.layoutBottom.setPosition(0,0),this.autoScaleLayout()}},r.autoScaleLayout=function(){var t=this._parentTransform.width,o=this.layoutTop.getComponent(h),e=this.layoutBottom.getComponent(h);o.height+e.height>this._parentTransform.height?o.setContentSize(t,this._parentTransform.height-e.height):o.setContentSize(t,this.layoutTopSize.y)},r.getLayoutSize=function(){this.layoutTop&&this.layoutBottom&&(this.layoutTopSize=new p(this.layoutTop.getComponent(h).width,this.layoutTop.getComponent(h).height),this.layoutBottomSize=new p(this.layoutBottom.getComponent(h).width,this.layoutBottom.getComponent(h).height))},o}(y)).prototype,"layoutTop",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=o(b.prototype,"layoutBottom",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=o(b.prototype,"layoutTopSize",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(0,0)}}),B=o(b.prototype,"layoutBottomSize",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(0,0)}}),S=o(b.prototype,"autoUpdate",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w=b))||w)||w));r._RF.pop()}}}));

System.register("bundle://main/_virtual/ListenWebBehavior.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,o;return{setters:[function(e){i=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,o=e.Component}],execute:function(){var s;t._RF.push({},"37049bOenlNRbUCAbSnT1Fi","ListenWebBehavior",void 0);var a=n.ccclass;n.property,e("ListenWebBehavior",a("ListenWebBehavior")(s=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.start=function(){var e=this;window.addEventListener("websiteLoaded",(function(i){var t=i.detail,n=t.isFirstLoad,o=t.fromCache,s=t.loadTime,a=t.timestamp;console.log("Website loaded:",{isFirstLoad:n,fromCache:o,loadTime:s,timestamp:a}),e.onWebsiteReady()})),window.addEventListener("websiteVisibilityChanged",(function(i){var t=i.detail,n=t.isVisible,o=t.timestamp;console.log("Website visibility changed:",{isVisible:n,timestamp:o}),n?e.onWebsiteVisible():e.onWebsiteHidden()}))},n.onWebsiteReady=function(){},n.onWebsiteVisible=function(){},n.onWebsiteHidden=function(){},n.onDestroy=function(){window.removeEventListener("websiteLoaded",null),window.removeEventListener("websiteVisibilityChanged",null)},t}(o))||s);t._RF.pop()}}}));

System.register("bundle://main/_virtual/main",["./OnClickThis.ts","./OpenPanelWhenClick.ts","./OnCountdown.ts","./WebsiteLoadDetector.ts","./AddAutoScale.ts","./AspectRatioFitter.ts","./AspectRatioFitterFollowNode.ts","./AspectRatioFitterHold.ts","./AutoGridLayout.ts","./AutoScale.ts","./MoveLayoutToCenter.ts","./VerticalLayout.ts","./AspectRatioManager.ts","./AutoChangeVideo.ts","./AutoPlayClips.ts","./LayoutTopDown.ts","./ListenWebBehavior.ts","./MinScreenSize.ts","./PlayAnimationClips.ts","./RatioAutoScale.ts","./ScaleFollowLayout.ts","./ScreenRatio.ts","./VerticalLayoutNoScale.ts","./Test.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("bundle://main/_virtual/MinScreenSize.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,o,a;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,r=e.sys,o=e.view,a=e.Component}],execute:function(){var s;i._RF.push({},"b2344G7acdGCKnPLt3gnAFz","MinScreenSize",void 0);var c=n.ccclass;n.property,e("MinScreenSize",c("MinScreenSize")(s=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).MIN_WIDTH=400,t.MIN_HEIGHT=300,t}return t(i,e),i.prototype.start=function(){var e=this;if(r.isBrowser){var t=o.getFrameSize();o.setFrameSize(Math.max(this.MIN_WIDTH,t.width),Math.max(this.MIN_HEIGHT,t.height)),window.addEventListener("resize",(function(){var t=o.getFrameSize(),i=window.innerWidth,n=window.innerHeight,r=Math.max(e.MIN_WIDTH,i),a=Math.max(e.MIN_HEIGHT,n);t.width===r&&t.height===a||(o.setFrameSize(r,a),o.setDesignResolutionSize(r,a,o.getResolutionPolicy()))}))}},i}(a))||s);i._RF.pop()}}}));

System.register("bundle://main/_virtual/MoveLayoutToCenter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r,i,a,c,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.UITransform,u=e.Vec2,s=e.Component}],execute:function(){var p,h,l;i._RF.push({},"a310eEl2rpAXKCYoXjTk/Pt","MoveLayoutToCenter",void 0);var v=a.ccclass,d=a.property,f=a.executeInEditMode;e("MoveLayoutToCenter",v("MoveLayoutToCenter")(p=f((l=t((h=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"autoUpdate",l,r(t)),t}n(t,e);var i=t.prototype;return i.start=function(){this.moveToParentCenter()},i.update=function(e){this.autoUpdate&&this.moveToParentCenter()},i.getPointCenter=function(){var e=this.node.parent;if(e){var t=e.getComponent(c),n=this.node.getComponent(c);if(t&&n){var o=t.contentSize,r=n.contentSize,i=t.anchorPoint,a=n.anchorPoint,s=new u(o.width*(.5-i.x),o.height*(.5-i.y)),p=r.width*(.5-a.x),h=r.height*(.5-a.y);return new u(s.x-p,s.y-h)}}},i.moveToParentCenter=function(){var e=this.getPointCenter();e&&this.node.setPosition(e.x,e.y)},t}(s)).prototype,"autoUpdate",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=h))||p)||p);i._RF.pop()}}}));

System.register("bundle://main/_virtual/OnClickThis.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var n,e,t,o,r,a,c,l,s;return{setters:[function(i){n=i.applyDecoratedDescriptor,e=i.inheritsLoose,t=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){r=i.cclegacy,a=i._decorator,c=i.Node,l=i.Animation,s=i.Component}],execute:function(){var u,p,h,f,d,y,b,T,v,m,g;r._RF.push({},"8163bHnYC5MQqC0DBDIl3aJ","OnClickThis",void 0);var k=a.ccclass,A=a.property;i("OpenPanelWhenClick",(u=k("OpenPanelWhenClick"),p=A({type:[c],tooltip:"Danh sách node sẽ được active khi click"}),h=A({type:[c],tooltip:"Danh sách node sẽ được disable khi click"}),f=A({type:[c],tooltip:"Danh sách animation sẽ được play khi click"}),d=A({tooltip:"Đường dẫn đến trang web"}),u((T=n((b=function(i){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=i.call.apply(i,[this].concat(r))||this,t(n,"nodesToActive",T,o(n)),t(n,"nodesToDisable",v,o(n)),t(n,"nodesToAnimation",m,o(n)),t(n,"url",g,o(n)),n.isAnimationPlaying=!1,n}e(n,i);var r=n.prototype;return r.start=function(){this.node.on(c.EventType.TOUCH_START,this.onClick,this)},r.onClick=function(){var i=this;this.nodesToActive.forEach((function(i){i&&(i.active=!0)})),this.nodesToDisable.forEach((function(i){i&&(i.active=!1)})),this.nodesToAnimation.forEach((function(n){if(n){var e=n.getComponent(l);e&&!i.isAnimationPlaying&&(e.play(),i.isAnimationPlaying=!0)}})),""!==this.url&&window.open(this.url,"_blank")},r.onDestroy=function(){this.node.off(c.EventType.TOUCH_START,this.onClick,this)},n}(s)).prototype,"nodesToActive",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=n(b.prototype,"nodesToDisable",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=n(b.prototype,"nodesToAnimation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=n(b.prototype,"url",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=b))||y));r._RF.pop()}}}));

System.register("bundle://main/_virtual/OnCountdown.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,i,o,r,a,c,u;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,c=n.Node,u=n.Component}],execute:function(){var l,s,h,p,d,f,y,v,b,g,w;r._RF.push({},"c4c63/5UDlL6ofS1PNaAN46","OnCountdown",void 0);var m=a.ccclass,D=a.property;n("OnCountdown",(l=m("OnCountdown"),s=D({type:[c],tooltip:"Danh sách node sẽ được active sau thời gian định sẵn"}),h=D({type:[c],tooltip:"Danh sách node sẽ được inactive sau thời gian định sẵn"}),p=D({tooltip:"Thời gian chờ trước khi chuyển (giây)"}),d=D({tooltip:"Đường dẫn website sẽ được mở sau khi hết thời gian"}),l((v=t((y=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,i(t,"nodeActive",v,o(t)),i(t,"nodeInactive",b,o(t)),i(t,"delayTime",g,o(t)),i(t,"url",w,o(t)),t}e(t,n);var r=t.prototype;return r.start=function(){var n=this;this.scheduleOnce((function(){n.switchNodes()}),this.delayTime)},r.switchNodes=function(){this.nodeActive.forEach((function(n){n&&(n.active=!0)})),this.nodeInactive.forEach((function(n){n&&(n.active=!1)})),""!==this.url&&window.open(this.url,"_blank")},r.onDestroy=function(){this.unscheduleAllCallbacks()},t}(u)).prototype,"nodeActive",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=t(y.prototype,"nodeInactive",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=t(y.prototype,"delayTime",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),w=t(y.prototype,"url",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=y))||f));r._RF.pop()}}}));

System.register("bundle://main/_virtual/OpenPanelWhenClick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var n,e,t,o,r,a,c,l,s;return{setters:[function(i){n=i.applyDecoratedDescriptor,e=i.inheritsLoose,t=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){r=i.cclegacy,a=i._decorator,c=i.Node,l=i.Animation,s=i.Component}],execute:function(){var u,p,h,f,d,y,T,b,v,m,g;r._RF.push({},"c8e0fdeUY9EUL7ETvahI0pv","OpenPanelWhenClick",void 0);var k=a.ccclass,A=a.property;i("OnClickThis",(u=k("OnClickThis"),p=A({type:[c],tooltip:"Danh sách node sẽ được active khi click"}),h=A({type:[c],tooltip:"Danh sách node sẽ được disable khi click"}),f=A({type:[c],tooltip:"Danh sách animation sẽ được play khi click"}),d=A({tooltip:"Đường dẫn đến trang web"}),u((b=n((T=function(i){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=i.call.apply(i,[this].concat(r))||this,t(n,"nodesToActive",b,o(n)),t(n,"nodesToDisable",v,o(n)),t(n,"nodesToAnimation",m,o(n)),t(n,"url",g,o(n)),n.isAnimationPlaying=!1,n}e(n,i);var r=n.prototype;return r.start=function(){this.node.on(c.EventType.TOUCH_START,this.onClick,this)},r.onClick=function(){var i=this;this.nodesToActive.forEach((function(i){i&&(i.active=!0)})),this.nodesToDisable.forEach((function(i){i&&(i.active=!1)})),this.nodesToAnimation.forEach((function(n){if(n){var e=n.getComponent(l);e&&!i.isAnimationPlaying&&(e.play(),i.isAnimationPlaying=!0)}})),""!==this.url&&window.open(this.url,"_blank")},r.onDestroy=function(){this.node.off(c.EventType.TOUCH_START,this.onClick,this)},n}(s)).prototype,"nodesToActive",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=n(T.prototype,"nodesToDisable",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=n(T.prototype,"nodesToAnimation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=n(T.prototype,"url",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=T))||y));r._RF.pop()}}}));

System.register("bundle://main/_virtual/PlayAnimationClips.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var n,t,e,r,o,l,a,p;return{setters:[function(i){n=i.applyDecoratedDescriptor,t=i.inheritsLoose,e=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){o=i.cclegacy,l=i._decorator,a=i.Animation,p=i.Component}],execute:function(){var s,c,u,h,m,y,d;o._RF.push({},"027822t0jxGEKZkgTxVdEI5","PlayAnimationClips",void 0);var f=l.ccclass,C=l.property;i("AutoPlayClips",(s=f("AutoPlayClips"),c=C(a),u=C({type:Number,tooltip:"Clip sẽ được lập đi lập lại khi mảng hết"}),s((y=n((m=function(i){function n(){for(var n,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return n=i.call.apply(i,[this].concat(o))||this,e(n,"anim",y,r(n)),n.currentClipIndex=0,e(n,"clipLoopIndex",d,r(n)),n}t(n,i);var o=n.prototype;return o.start=function(){this.anim&&(this.anim.on(a.EventType.FINISHED,this.onAnimationFinished,this),this.playCurrentClip())},o.playCurrentClip=function(){var i=this.anim.clips;i.length>0&&(this.currentClipIndex>=i.length&&(this.currentClipIndex=this.clipLoopIndex),this.anim.play(i[this.currentClipIndex].name))},o.onAnimationFinished=function(){this.currentClipIndex++,this.playCurrentClip()},o.onDestroy=function(){this.anim&&this.anim.off(a.EventType.FINISHED,this.onAnimationFinished,this)},n}(p)).prototype,"anim",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=n(m.prototype,"clipLoopIndex",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=m))||h));o._RF.pop()}}}));

System.register("bundle://main/_virtual/RatioAutoScale.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o,r,a,p,s,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,p=t.UITransform,s=t.Vec2,l=t.Vec3,u=t.Component}],execute:function(){var c,h,d,f,m,y,b,g,z,w,S,v,T;r._RF.push({},"f373747W2VAAZiQt56095sn","RatioAutoScale",void 0);var C=a.ccclass,A=a.property,U=a.executeInEditMode;t("RatioAutoScale",(c=C("RatioAutoScale"),h=A({type:p,tooltip:"Node cha"}),d=A({type:s,tooltip:"Kích thước của node cha"}),f=A({type:s,tooltip:"Kích thước ban đầu của node con"}),m=A({type:s,tooltip:"Vị trí ban đầu của node con"}),y=A({type:Boolean,tooltip:"Tự động cập nhật trong runtime"}),c(b=U((z=e((g=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"parentTransform",z,o(e)),i(e,"parentContentSize",w,o(e)),i(e,"contentSize",S,o(e)),i(e,"position",v,o(e)),i(e,"autoUpdate",T,o(e)),e}n(e,t);var r=e.prototype;return r.resetInEditor=function(){var t,e,n,i,o;this.parentTransform=(null==(t=this.node.parent)?void 0:t.getComponent(p))||null,this.parentContentSize=new s((null==(e=this.parentTransform)?void 0:e.width)||0,(null==(n=this.parentTransform)?void 0:n.height)||0),this.contentSize=new s((null==(i=this.node.getComponent(p))?void 0:i.width)||0,(null==(o=this.node.getComponent(p))?void 0:o.height)||0),this.position=new s(this.node.position.x,this.node.position.y),this.autoUpdate=!0},r.update=function(){this.autoUpdate&&this.updateUITransform()},r.updateUITransform=function(){var t;if(this.parentTransform){var e=this.parentTransform.width/this.parentContentSize.x,n=this.parentTransform.height/this.parentContentSize.y;null==(t=this.node.getComponent(p))||t.setContentSize(this.contentSize.x*e,this.contentSize.y*n),this.node.position=new l(this.position.x*e,this.position.y*n,0)}},e}(u)).prototype,"parentTransform",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(g.prototype,"parentContentSize",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0)}}),S=e(g.prototype,"contentSize",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0)}}),v=e(g.prototype,"position",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0)}}),T=e(g.prototype,"autoUpdate",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=g))||b)||b));r._RF.pop()}}}));

System.register("bundle://main/_virtual/rollupPluginModLoBabelHelpers.js",[],(function(e){return{execute:function(){function r(t,i){return(r=e("setPrototypeOf",Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e}))(t,i)}function t(e,r){if(e){if("string"==typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,r):void 0}}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}e({applyDecoratedDescriptor:function(e,r,t,i,n){var o={};Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0);o=t.slice().reverse().reduce((function(t,i){return i(e,r,t)||t}),o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0);void 0===o.initializer&&(Object.defineProperty(e,r,o),o=null);return o},arrayLikeToArray:i,assertThisInitialized:function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},createForOfIteratorHelperLoose:function(e,r){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=t(e))||r&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},inheritsLoose:function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},initializerDefineProperty:function(e,r,t,i){if(!t)return;Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})},setPrototypeOf:r,unsupportedIterableToArray:t})}}}));

System.register("bundle://main/_virtual/ScaleFollowLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,l,n,a,r,c,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,r=t.UITransform,c=t.CCBoolean,h=t.Component}],execute:function(){var s,u,p,f,d,y,w,g,b;n._RF.push({},"9f062hZLAdH05sayOT71P2J","ScaleFollowLayout",void 0);var S=a.ccclass,v=a.property;a.executeInEditMode,t("ScaleFollowLayout",(s=S("ScaleFollowLayout"),u=v({type:r,tooltip:"Node cha"}),p=v({type:c,tooltip:"Theo chiều rộng"}),f=v({type:c,tooltip:"Theo chiều cao"}),s((w=e((y=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,i(e,"parent",w,l(e)),i(e,"followWidth",g,l(e)),i(e,"followHeight",b,l(e)),e}o(e,t);var n=e.prototype;return n.start=function(){this.updateScale()},n.update=function(){this.updateScale()},n.updateScale=function(){if(this.parent){var t=this.node.getComponent(r);if(t){var e=this.parent.width,o=this.parent.height,i=e/t.width,l=o/t.height;if(this.followWidth&&this.followHeight){var n=Math.min(i,l);this.node.setScale(n,n)}else this.followWidth?this.node.setScale(i,this.node.scale.y):this.followHeight&&this.node.setScale(this.node.scale.x,l)}}},e}(h)).prototype,"parent",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(y.prototype,"followWidth",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=e(y.prototype,"followHeight",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=y))||d));n._RF.pop()}}}));

System.register("bundle://main/_virtual/ScreenRatio.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,i,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,o=e.Component}],execute:function(){var r;t._RF.push({},"0c3a5hkyOpDS6uV6mVVnA2P","ScreenRatio",void 0);var c=i.ccclass;i.property,e("ScreenRatio",c("ScreenRatio")(r=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.start=function(){window.addEventListener("resize",this.onResize.bind(this)),this.onResize()},i.onResize=function(){var e=window.innerWidth/window.innerHeight;console.log("Screen ratio: "+e);var n=new CustomEvent("screenRatioChanged",{detail:{ratio:e}});window.dispatchEvent(n)},i.update=function(e){},t}(o))||r);t._RF.pop()}}}));

System.register("bundle://main/_virtual/Test.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o,r,u,c,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,c=t.Label,a=t.Component}],execute:function(){var l,s,p,b,f,h,y,d;r._RF.push({},"4bbc1dBwyZP+70n3EpO8Wuh","Test",void 0);var g=u.ccclass,L=u.property;t("Test",(l=g("Test"),s=L({tooltip:"Tốc độ thay đổi giá trị"}),p=L(c),l((h=e((f=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,i(e,"_count",h,o(e)),i(e,"increment",y,o(e)),i(e,"countLabel",d,o(e)),e}n(e,t);var r=e.prototype;return r.start=function(){this.updateLabel()},r.updateLabel=function(){this.countLabel&&(this.countLabel.string="Count: "+this._count)},r.increaseCount=function(){this._count+=this.increment,this.updateLabel(),console.log("Count increased to:",this._count)},r.resetCount=function(){this._count=0,this.updateLabel(),console.log("Count reset")},e}(a)).prototype,"_count",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=e(f.prototype,"increment",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=e(f.prototype,"countLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=f))||b));r._RF.pop()}}}));

System.register("bundle://main/_virtual/VerticalLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,i,o,a,c,s,h,u,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,c=t._decorator,s=t.CCFloat,h=t.UITransform,u=t.Vec3,l=t.Component}],execute:function(){var p,d,g,f,y;a._RF.push({},"8b258G7CI1BcI14RET2WjuG","VerticalLayout",void 0);var m=c.ccclass,v=c.property,C=c.executeInEditMode;t("default",(p=m("VerticalLayout"),d=v({type:s,tooltip:"Khoảng cách giữa các phần tử con",min:0}),p(g=C((y=e((f=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"spacing",y,i(e)),e._parentTransform=null,e}n(e,t);var a=e.prototype;return a.start=function(){this._parentTransform=this.node.getComponent(h),this._parentTransform.setAnchorPoint(0,0),this.updateLayout()},a.update=function(){this.updateLayout()},a.updateLayout=function(){for(var t,e=this._parentTransform.width,n=this.getChildHeight(),r=o(this.node.children);!(t=r()).done;){t.value.getComponent(h).setContentSize(e,n)}for(var i=new u(0,0,0),a=0;a<this.node.children.length;a++){var c=this.node.children[a];c.getComponent(h).setAnchorPoint(0,0),c.setPosition(i),i.y+=n+this.getSpacing()}},a.getSpacing=function(){var t=this.node.children.length;return this.spacing*(t-1)/t},a.getChildHeight=function(){var t=this.node.children.length;return(this._parentTransform.height-this.getSpacing()*(t-1))/t},e}(l)).prototype,"spacing",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),g=f))||g)||g));a._RF.pop()}}}));

System.register("bundle://main/_virtual/VerticalLayoutNoScale.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o,r,a,h,l,s,c,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,h=t._decorator,l=t.CCBoolean,s=t.Vec2,c=t.UITransform,d=t.Component}],execute:function(){var u,p,f,g,m,y,v;a._RF.push({},"7b6a6NiRBNBfIOzwcwZ12Aw","VerticalLayoutNoScale",void 0);var C=h.ccclass,z=h.property,S=h.executeInEditMode;t("default",(u=C("VerticalLayoutNoScale"),p=z({type:l,tooltip:"Tự động cập nhật trong runtime"}),f=z({type:[s]}),u(g=S((y=e((m=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this)._parentTransform=null,i(e,"autoUpdate",y,o(e)),i(e,"childSize",v,o(e)),e}n(e,t);var a=e.prototype;return a.start=function(){this.initChildSize(),this._parentTransform=this.node.getComponent(c),this._parentTransform.setAnchorPoint(0,0),this.updateLayout();for(var t,e=r(this.node.children);!(t=e()).done;){t.value.getComponent(c).setAnchorPoint(0,0)}},a.resetInEditor=function(){this.initChildSize(),this.autoUpdate=!0},a.update=function(){this.autoUpdate||this.updateLayout()},a.initChildSize=function(){this.childSize=[];for(var t,e=r(this.node.children);!(t=e()).done;){var n=t.value;this.childSize.push(new s(n.getComponent(c).width,n.getComponent(c).height))}},a.updateLayout=function(){var t=this._parentTransform.width,e=this.getChildHeight(),n=this.node.children[this.node.children.length-1],i=this._parentTransform.height-n.getComponent(c).height;this.node.children[this.node.children.length-1].setPosition(new Vec3(0,i));for(var o=new Vec3(0,0,0),r=0;r<this.node.children.length-1;r++){this.node.children[r].setPosition(o),o.y+=e}for(var a=0;a<this.node.children.length;a++){var h=this.node.children[a];h.getComponent(c).setContentSize(t,h.getComponent(c).height)}},a.getChildHeight=function(){var t=this.node.children.length;return this._parentTransform.height/t},e}(d)).prototype,"autoUpdate",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=e(m.prototype,"childSize",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=m))||g)||g));a._RF.pop()}}}));

System.register("bundle://main/_virtual/WebsiteLoadDetector.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,o,n,s,a,d,r;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,d=e.sys,r=e.Component}],execute:function(){var c,l,u;s._RF.push({},"4c0dfh7ZzpFi5v4t+MOk02F","WebsiteLoadDetector",void 0);var b=a.ccclass,h=a.property;e("WebsiteLoadDetector",b("WebsiteLoadDetector")((u=i((l=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return i=e.call.apply(e,[this].concat(s))||this,o(i,"debugLog",u,n(i)),i.isFirstLoad=!0,i.loadTimestamp=0,i}t(i,e);var s=i.prototype;return s.start=function(){var e=this;this.loadTimestamp=Date.now(),d.isBrowser&&("complete"===document.readyState?this.onPageLoaded():window.addEventListener("load",(function(){e.onPageLoaded()})),window.addEventListener("pageshow",(function(i){i.persisted&&e.onPageLoaded(!0)})),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState?e.onVisibilityChanged(!0):e.onVisibilityChanged(!1)})))},s.onPageLoaded=function(e){void 0===e&&(e=!1);var i=Date.now()-this.loadTimestamp;this.debugLog&&console.log("Page loaded "+(e?"from cache":"fresh")+" in "+i+"ms");var t=new CustomEvent("websiteLoaded",{detail:{isFirstLoad:this.isFirstLoad,fromCache:e,loadTime:i,timestamp:Date.now()}});window.dispatchEvent(t),this.isFirstLoad=!1,this.onWebsiteLoaded()},s.onVisibilityChanged=function(e){this.debugLog&&console.log("Page visibility changed: "+(e?"visible":"hidden"));var i=new CustomEvent("websiteVisibilityChanged",{detail:{isVisible:e,timestamp:Date.now()}});window.dispatchEvent(i),e?this.onWebsiteVisible():this.onWebsiteHidden()},s.onWebsiteLoaded=function(){},s.onWebsiteVisible=function(){},s.onWebsiteHidden=function(){},s.isPageVisible=function(){return!d.isBrowser||"visible"===document.visibilityState},s.getLoadTimestamp=function(){return this.loadTimestamp},i}(r)).prototype,"debugLog",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=l))||c);s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'bundle://main/_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvTGF5b3V0L2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvTGF5b3V0L0FkZEF1dG9TY2FsZS50cyIsIi4uL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvTGF5b3V0L0FzcGVjdFJhdGlvRmlsdGVyL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvTGF5b3V0L0FzcGVjdFJhdGlvRmlsdGVyL0FzcGVjdFJhdGlvRml0dGVyLnRzIiwiLi4vZmlsZTovRDovUHJvamVjdC9Db2Nvcy9Db2Nvcy1Qcm9qZWN0L0x1dGVjaC9hc3NldHMvU2NyaXB0cy9MYXlvdXQvQXNwZWN0UmF0aW9GaWx0ZXIvZmlsZTovRDovUHJvamVjdC9Db2Nvcy9Db2Nvcy1Qcm9qZWN0L0x1dGVjaC9hc3NldHMvU2NyaXB0cy9MYXlvdXQvQXNwZWN0UmF0aW9GaWx0ZXIvQXNwZWN0UmF0aW9GaXR0ZXJGb2xsb3dOb2RlLnRzIiwiLi4vZmlsZTovRDovUHJvamVjdC9Db2Nvcy9Db2Nvcy1Qcm9qZWN0L0x1dGVjaC9hc3NldHMvU2NyaXB0cy9MYXlvdXQvQXNwZWN0UmF0aW9GaWx0ZXIvZmlsZTovRDovUHJvamVjdC9Db2Nvcy9Db2Nvcy1Qcm9qZWN0L0x1dGVjaC9hc3NldHMvU2NyaXB0cy9MYXlvdXQvQXNwZWN0UmF0aW9GaWx0ZXIvQXNwZWN0UmF0aW9GaXR0ZXJIb2xkLnRzIiwiLi4vZmlsZTovRDovUHJvamVjdC9Db2Nvcy9Db2Nvcy1Qcm9qZWN0L0x1dGVjaC9hc3NldHMvU2NyaXB0cy9PdGhlci9maWxlOi9EOi9Qcm9qZWN0L0NvY29zL0NvY29zLVByb2plY3QvTHV0ZWNoL2Fzc2V0cy9TY3JpcHRzL090aGVyL0FzcGVjdFJhdGlvTWFuYWdlci50cyIsIi4uL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvT3RoZXIvZmlsZTovRDovUHJvamVjdC9Db2Nvcy9Db2Nvcy1Qcm9qZWN0L0x1dGVjaC9hc3NldHMvU2NyaXB0cy9PdGhlci9BdXRvQ2hhbmdlVmlkZW8udHMiLCIuLi9maWxlOi9EOi9Qcm9qZWN0L0NvY29zL0NvY29zLVByb2plY3QvTHV0ZWNoL2Fzc2V0cy9TY3JpcHRzL0xheW91dC9maWxlOi9EOi9Qcm9qZWN0L0NvY29zL0NvY29zLVByb2plY3QvTHV0ZWNoL2Fzc2V0cy9TY3JpcHRzL0xheW91dC9BdXRvR3JpZExheW91dC50cyIsIi4uL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvT3RoZXIvZmlsZTovRDovUHJvamVjdC9Db2Nvcy9Db2Nvcy1Qcm9qZWN0L0x1dGVjaC9hc3NldHMvU2NyaXB0cy9PdGhlci9BdXRvUGxheUNsaXBzLnRzIiwiLi4vZmlsZTovRDovUHJvamVjdC9Db2Nvcy9Db2Nvcy1Qcm9qZWN0L0x1dGVjaC9hc3NldHMvU2NyaXB0cy9MYXlvdXQvZmlsZTovRDovUHJvamVjdC9Db2Nvcy9Db2Nvcy1Qcm9qZWN0L0x1dGVjaC9hc3NldHMvU2NyaXB0cy9MYXlvdXQvQXV0b1NjYWxlLnRzIiwiLi4vZmlsZTovRDovUHJvamVjdC9Db2Nvcy9Db2Nvcy1Qcm9qZWN0L0x1dGVjaC9hc3NldHMvU2NyaXB0cy9PdGhlci9maWxlOi9EOi9Qcm9qZWN0L0NvY29zL0NvY29zLVByb2plY3QvTHV0ZWNoL2Fzc2V0cy9TY3JpcHRzL090aGVyL0xheW91dFRvcERvd24udHMiLCIuLi9maWxlOi9EOi9Qcm9qZWN0L0NvY29zL0NvY29zLVByb2plY3QvTHV0ZWNoL2Fzc2V0cy9TY3JpcHRzL090aGVyL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvT3RoZXIvTGlzdGVuV2ViQmVoYXZpb3IudHMiLCIuLi9maWxlOi9EOi9Qcm9qZWN0L0NvY29zL0NvY29zLVByb2plY3QvTHV0ZWNoL2Fzc2V0cy9TY3JpcHRzL090aGVyL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvT3RoZXIvTWluU2NyZWVuU2l6ZS50cyIsIi4uL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvTGF5b3V0L2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvTGF5b3V0L01vdmVMYXlvdXRUb0NlbnRlci50cyIsIi4uL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvQnV0dG9ucy9maWxlOi9EOi9Qcm9qZWN0L0NvY29zL0NvY29zLVByb2plY3QvTHV0ZWNoL2Fzc2V0cy9TY3JpcHRzL0J1dHRvbnMvT25DbGlja1RoaXMudHMiLCIuLi9maWxlOi9EOi9Qcm9qZWN0L0NvY29zL0NvY29zLVByb2plY3QvTHV0ZWNoL2Fzc2V0cy9TY3JpcHRzL0V2ZW50L2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvRXZlbnQvT25Db3VudGRvd24udHMiLCIuLi9maWxlOi9EOi9Qcm9qZWN0L0NvY29zL0NvY29zLVByb2plY3QvTHV0ZWNoL2Fzc2V0cy9TY3JpcHRzL0J1dHRvbnMvZmlsZTovRDovUHJvamVjdC9Db2Nvcy9Db2Nvcy1Qcm9qZWN0L0x1dGVjaC9hc3NldHMvU2NyaXB0cy9CdXR0b25zL09wZW5QYW5lbFdoZW5DbGljay50cyIsIi4uL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvT3RoZXIvZmlsZTovRDovUHJvamVjdC9Db2Nvcy9Db2Nvcy1Qcm9qZWN0L0x1dGVjaC9hc3NldHMvU2NyaXB0cy9PdGhlci9QbGF5QW5pbWF0aW9uQ2xpcHMudHMiLCIuLi9maWxlOi9EOi9Qcm9qZWN0L0NvY29zL0NvY29zLVByb2plY3QvTHV0ZWNoL2Fzc2V0cy9TY3JpcHRzL090aGVyL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvT3RoZXIvUmF0aW9BdXRvU2NhbGUudHMiLCIuLi9jY2U6L2ludGVybmFsL2NjZTovaW50ZXJuYWwvcm9sbHVwUGx1Z2luTW9kTG9CYWJlbEhlbHBlcnMuanMiLCIuLi9maWxlOi9EOi9Qcm9qZWN0L0NvY29zL0NvY29zLVByb2plY3QvTHV0ZWNoL2Fzc2V0cy9TY3JpcHRzL090aGVyL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvT3RoZXIvU2NhbGVGb2xsb3dMYXlvdXQudHMiLCIuLi9maWxlOi9EOi9Qcm9qZWN0L0NvY29zL0NvY29zLVByb2plY3QvTHV0ZWNoL2Fzc2V0cy9TY3JpcHRzL090aGVyL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvT3RoZXIvU2NyZWVuUmF0aW8udHMiLCIuLi9maWxlOi9EOi9Qcm9qZWN0L0NvY29zL0NvY29zLVByb2plY3QvTHV0ZWNoL2Fzc2V0cy9TY3JpcHRzL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvVGVzdC50cyIsIi4uL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvTGF5b3V0L2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvTGF5b3V0L1ZlcnRpY2FsTGF5b3V0LnRzIiwiLi4vZmlsZTovRDovUHJvamVjdC9Db2Nvcy9Db2Nvcy1Qcm9qZWN0L0x1dGVjaC9hc3NldHMvU2NyaXB0cy9PdGhlci9maWxlOi9EOi9Qcm9qZWN0L0NvY29zL0NvY29zLVByb2plY3QvTHV0ZWNoL2Fzc2V0cy9TY3JpcHRzL090aGVyL1ZlcnRpY2FsTGF5b3V0Tm9TY2FsZS50cyIsIi4uL2ZpbGU6L0Q6L1Byb2plY3QvQ29jb3MvQ29jb3MtUHJvamVjdC9MdXRlY2gvYXNzZXRzL1NjcmlwdHMvRXZlbnQvZmlsZTovRDovUHJvamVjdC9Db2Nvcy9Db2Nvcy1Qcm9qZWN0L0x1dGVjaC9hc3NldHMvU2NyaXB0cy9FdmVudC9XZWJzaXRlTG9hZERldGVjdG9yLnRzIl0sIm5hbWVzIjpbImNjY2xhc3MiLCJfZGVjb3JhdG9yIiwicHJvcGVydHkiLCJleGVjdXRlSW5FZGl0TW9kZSIsIl9kZWMiLCJfZGVjMiIsInR5cGUiLCJOb2RlIiwiX2NsYXNzIiwiX2Rlc2NyaXB0b3IiLCJfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yIiwiX2NsYXNzMiIsIl9Db21wb25lbnQiLCJBZGRBdXRvU2NhbGUiLCJfdGhpcyIsIl9sZW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiY2FsbCIsImFwcGx5IiwiY29uY2F0IiwiX2luaXRpYWxpemVyRGVmaW5lUHJvcGVydHkiLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiX2luaGVyaXRzTG9vc2UiLCJfcHJvdG8iLCJwcm90b3R5cGUiLCJzdGFydCIsInRoaXMiLCJnZXROb2Rlc0NoaWxkcmVuIiwiYWRkQXV0b1NjYWxlVG9DaGlsZHJlbiIsIm9uRW5hYmxlIiwib25EaXNhYmxlIiwicmVtb3ZlQXV0b1NjYWxlRnJvbUNoaWxkcmVuIiwiX3RoaXMyIiwibm9kZSIsImNoaWxkcmVuIiwiZm9yRWFjaCIsImNoaWxkIiwibm9kZXNDaGlsZHJlbiIsImluZGV4T2YiLCJwdXNoIiwiZ2V0Q29tcG9uZW50IiwiQXV0b1NjYWxlIiwiYWRkQ29tcG9uZW50IiwiaXNWYWxpZCIsInJlbW92ZUNvbXBvbmVudCIsIkNvbXBvbmVudCIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImluaXRpYWxpemVyIiwiX1JGIiwicG9wIiwicmVxdWlyZUNvbXBvbmVudCIsIkFzcGVjdE1vZGUiLCJNb3ZlTGF5b3V0VG9DZW50ZXIiLCJfZGVjMyIsIkVudW0iLCJBc3BlY3RSYXRpb0ZpdHRlciIsIl9kZXNjcmlwdG9yMiIsIl9kZXNjcmlwdG9yMyIsIl9kZXNjcmlwdG9yNCIsImdldEFzcGVjdFJhdGlvIiwidXBkYXRlIiwiZGVsdGFUaW1lIiwiYXNwZWN0TW9kZSIsIkZpdEluc2lkZSIsIkluc2lkZUFzcGVjdFJhdGlvIiwiRml0T3V0c2lkZSIsIk91dHNpZGVBc3BlY3RSYXRpbyIsInVpVHJhbnNmb3JtIiwiVUlUcmFuc2Zvcm0iLCJib3VuZHMiLCJnZXRCb3VuZGluZ0JveCIsImFzcGVjdFJhdGlvIiwid2lkdGgiLCJoZWlnaHQiLCJnZXRSb3RhdGVkRGltZW5zaW9ucyIsInJvdGF0aW9uIiwicmFkIiwibWF0aCIsInRvUmFkaWFuIiwiY29zIiwiTWF0aCIsImFicyIsInNpbiIsInBhcmVudCIsInBhcmVudFRyYW5zZm9ybSIsIm5ld1dpZHRoIiwibmV3SGVpZ2h0IiwicGFyZW50Um90YXRpb24iLCJldWxlckFuZ2xlcyIsInoiLCJyb3RhdGVkUGFyZW50IiwiaXNGb2xsb3dXaWR0aCIsImlzRm9sbG93SGVpZ2h0Iiwibm9kZVJvdGF0aW9uIiwiYWRqdXN0ZWREaW1lbnNpb25zIiwic2V0Q29udGVudFNpemUiLCJ0b29sdGlwIiwiX2RlYzQiLCJfZGVjNSIsIl9kZWM2IiwiX2RlYzciLCJfZGVjOCIsIl9kZWM5IiwiX2RlYzEwIiwiTnVtYmVyIiwiQXNwZWN0UmF0aW9GaXR0ZXJGb2xsb3dOb2RlIiwiX2Rlc2NyaXB0b3I1IiwiX2Rlc2NyaXB0b3I2IiwiX2Rlc2NyaXB0b3I3IiwiX2Rlc2NyaXB0b3I4IiwiX2Rlc2NyaXB0b3I5Iiwic2V0QXNwZWN0UmF0aW8iLCJsZWZ0Tm9kZSIsIm5vZGVEb3duIiwidXBkYXRlQXNwZWN0UmF0aW9YIiwidXBkYXRlQXNwZWN0UmF0aW9ZIiwibm9kZVRyYW5zZm9ybSIsInRhcmdldFRyYW5zZm9ybSIsInRhcmdldFRyYW5zZm9ybTIiLCJub2RlQm91bmQiLCJnZXRCb3VuZGluZ0JveFRvV29ybGQiLCJ0YXJnZXRCb3VuZDEiLCJ0YXJnZXRCb3VuZDIiLCJ4TWluIiwibGVmdFNwYWNpbmciLCJ5TWF4IiwieU1pbiIsImRvd25TcGFjaW5nIiwiU2l6ZSIsIm5ld1kiLCJuZXdYIiwiQXNwZWN0UmF0aW9GaXR0ZXJIb2xkIiwiYXV0b1VwZGF0ZSIsIm1vdmVUb1BhcmVudENlbnRlciIsInVwZGF0ZUFzcGVjdFJhdGlvIiwicmVzZXRJbkVkaXRvciIsInBhcmVudFdpZHRoIiwicGFyZW50SGVpZ2h0IiwiY3VycmVudFJhdGlvIiwiaXNIb2xkIiwiY29udGVudFNpemUiLCJ4IiwieSIsImdldFBhcmVudFBvaW50Q2VudGVyIiwicGFyZW50QW5jaG9yIiwiYW5jaG9yUG9pbnQiLCJub2RlQW5jaG9yIiwiVmVjMiIsImNlbnRlclBvaW50Iiwic2V0UG9zaXRpb24iLCJBc3BlY3RSYXRpb01hbmFnZXIiLCJnZXRSYXRlIiwibWluUmF0ZSIsInNldEFjdGl2ZU5vZGVzIiwibm9kZVdpZHRoIiwibm9kZUhlaWdodCIsIm5vZGVzIiwiaXNBY3RpdmUiLCJhY3RpdmUiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRXaWR0aCIsImJvZHkiLCJpbm5lckhlaWdodCIsImNsaWVudEhlaWdodCIsIlZpZGVvQ2xpcCIsIlZpZGVvUGxheWVyIiwiQ0NGbG9hdCIsIkF1dG9DaGFuZ2VWaWRlbyIsImN1cnJlbnRWaWRlb0luZGV4IiwicmV0cnlDb3VudCIsIm1heFJldHJpZXMiLCJpbml0aWFsaXplVmlkZW8iLCJzeXMiLCJpc0Jyb3dzZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiX3RoaXMyJHZpZGVvUGxheWVyIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJpbmRleCIsInRpbWUiLCJ2aWRlb1BsYXllciIsImN1cnJlbnRUaW1lIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImNoZWNrUHJldmlvdXNTdGF0ZSIsInJlc3RhcnRWaWRlbyIsImV2ZW50IiwiZGV0YWlsIiwiaXNWaXNpYmxlIiwiY2hlY2tBbmRSZXN0YXJ0VmlkZW8iLCJfdGhpczMiLCJzYXZlZFN0YXRlIiwiZ2V0SXRlbSIsInN0YXRlIiwicGFyc2UiLCJzY2hlZHVsZU9uY2UiLCJwbGF5Q3VycmVudFZpZGVvIiwicmVtb3ZlSXRlbSIsImVycm9yIiwiY29uc29sZSIsIl90aGlzNCIsInZpZGVvTGlzdCIsIm9mZiIsIm9uVmlkZW9Db21wbGV0ZWQiLCJvblZpZGVvRXJyb3IiLCJvbiIsIndhcm4iLCJfdGhpczUiLCJuYXZpZ2F0b3IiLCJvbkxpbmUiLCJpc1BsYXlpbmciLCJzdG9wIiwiY2xpcCIsInBsYXkiLCJzY2hlZHVsZSIsImNoZWNrVmlkZW9QbGF5YmFjayIsImhhbmRsZVBsYXliYWNrRmFpbHVyZSIsIl90aGlzNiIsInJldHJ5RGVsYXkiLCJkdXJhdGlvbiIsIm9uRGVzdHJveSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJTb3J0VHlwZSIsIlJlc2l6ZU1vZGUiLCJBdXRvR3JpZExheW91dCIsIm9uTG9hZCIsInVwZGF0ZUxheW91dCIsInNvcnRUeXBlIiwiTm9uZSIsInNvcnRDaGlsZHJlbiIsInJlc2l6ZU1vZGUiLCJDaGlsZHJlbiIsInJlc2l6ZUNoaWxkcmVuIiwiSG9yaXpvbnRhbCIsInNvcnQiLCJhIiwiYiIsInBvc2l0aW9uIiwiVmVydGljYWwiLCJfc3RlcCIsIm9mZnNldCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UiLCJkb25lIiwidmFsdWUiLCJWZWMzIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsImNoaWxkVHJhbnNmb3JtIiwiQW5pbWF0aW9uIiwiUGxheUFuaW1hdGlvbkNsaXBzIiwiY3VycmVudENsaXBJbmRleCIsImFuaW0iLCJFdmVudFR5cGUiLCJGSU5JU0hFRCIsIm9uQW5pbWF0aW9uRmluaXNoZWQiLCJwbGF5Q3VycmVudENsaXAiLCJjbGlwcyIsIm5hbWUiLCJfdGhpcyRub2RlJHBhcmVudCIsIl90aGlzJHBhcmVudFRyYW5zZm9ybSIsIl90aGlzJHBhcmVudFRyYW5zZm9ybTIiLCJfdGhpcyRub2RlJGdldENvbXBvbmUiLCJfdGhpcyRub2RlJGdldENvbXBvbmUyIiwicGFyZW50Q29udGVudFNpemUiLCJ1cGRhdGVVSVRyYW5zZm9ybSIsIl90aGlzJG5vZGUkZ2V0Q29tcG9uZTMiLCJyYXRpb1NjYWxlUGFyZW50V2lkdGgiLCJyYXRpb1NjYWxlUGFyZW50SGVpZ2h0IiwidmlzaWJsZSIsIkNDQm9vbGVhbiIsIkxheW91dFRvcERvd24iLCJfcGFyZW50VHJhbnNmb3JtIiwiZ2V0TGF5b3V0VG9wRG93biIsImdldExheW91dFNpemUiLCJsYXlvdXRUb3AiLCJsYXlvdXRCb3R0b20iLCJzZXRBbmNob3JQb2ludCIsImF1dG9TY2FsZUxheW91dCIsImxheW91dFRvcFRyYW5zIiwibGF5b3V0Qm90dG9tVHJhbnMiLCJsYXlvdXRUb3BTaXplIiwibGF5b3V0Qm90dG9tU2l6ZSIsIkxpc3RlbldlYkJlaGF2aW9yIiwiX2V2ZW50JGRldGFpbCIsImlzRmlyc3RMb2FkIiwiZnJvbUNhY2hlIiwibG9hZFRpbWUiLCJsb2ciLCJvbldlYnNpdGVSZWFkeSIsIl9ldmVudCRkZXRhaWwyIiwib25XZWJzaXRlVmlzaWJsZSIsIm9uV2Vic2l0ZUhpZGRlbiIsIk1pblNjcmVlblNpemUiLCJNSU5fV0lEVEgiLCJNSU5fSEVJR0hUIiwiY3VycmVudFNpemUiLCJ2aWV3IiwiZ2V0RnJhbWVTaXplIiwic2V0RnJhbWVTaXplIiwibWF4Iiwic2l6ZSIsIndpbmRvd1dpZHRoIiwid2luZG93SGVpZ2h0Iiwic2V0RGVzaWduUmVzb2x1dGlvblNpemUiLCJnZXRSZXNvbHV0aW9uUG9saWN5IiwiZ2V0UG9pbnRDZW50ZXIiLCJub2RlQ29udGVudFNpemUiLCJwYXJlbnRDZW50ZXJMb2NhbCIsIm9mZnNldFgiLCJvZmZzZXRZIiwiT3BlblBhbmVsV2hlbkNsaWNrIiwiaXNBbmltYXRpb25QbGF5aW5nIiwiVE9VQ0hfU1RBUlQiLCJvbkNsaWNrIiwibm9kZXNUb0FjdGl2ZSIsIm5vZGVzVG9EaXNhYmxlIiwibm9kZXNUb0FuaW1hdGlvbiIsInVybCIsIm9wZW4iLCJPbkNvdW50ZG93biIsInN3aXRjaE5vZGVzIiwiZGVsYXlUaW1lIiwibm9kZUFjdGl2ZSIsIm5vZGVJbmFjdGl2ZSIsInVuc2NoZWR1bGVBbGxDYWxsYmFja3MiLCJPbkNsaWNrVGhpcyIsIkF1dG9QbGF5Q2xpcHMiLCJjbGlwTG9vcEluZGV4IiwiQm9vbGVhbiIsIlJhdGlvQXV0b1NjYWxlIiwiX3NldFByb3RvdHlwZU9mIiwibyIsInAiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsImJpbmQiLCJfX3Byb3RvX18iLCJfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJtaW5MZW4iLCJfYXJyYXlMaWtlVG9BcnJheSIsIm4iLCJ0b1N0cmluZyIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJmcm9tIiwidGVzdCIsImFyciIsImxlbiIsImkiLCJhcnIyIiwidGFyZ2V0IiwiZGVjb3JhdG9ycyIsImRlc2NyaXB0b3IiLCJjb250ZXh0IiwiZGVzYyIsImtleXMiLCJrZXkiLCJyZXZlcnNlIiwicmVkdWNlIiwiZGVjb3JhdG9yIiwidW5kZWZpbmVkIiwiZGVmaW5lUHJvcGVydHkiLCJzZWxmIiwiUmVmZXJlbmNlRXJyb3IiLCJhbGxvd0FycmF5TGlrZSIsIml0IiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiaXNBcnJheSIsIlR5cGVFcnJvciIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsIlNjYWxlRm9sbG93TGF5b3V0IiwidXBkYXRlU2NhbGUiLCJ3aWR0aFJhdGlvIiwiaGVpZ2h0UmF0aW8iLCJmb2xsb3dXaWR0aCIsImZvbGxvd0hlaWdodCIsInNjYWxlIiwibWluIiwic2V0U2NhbGUiLCJTY3JlZW5SYXRpbyIsIm9uUmVzaXplIiwicmF0aW8iLCJDdXN0b21FdmVudCIsImRpc3BhdGNoRXZlbnQiLCJMYWJlbCIsIlRlc3QiLCJ1cGRhdGVMYWJlbCIsImNvdW50TGFiZWwiLCJzdHJpbmciLCJfY291bnQiLCJpbmNyZWFzZUNvdW50IiwiaW5jcmVtZW50IiwicmVzZXRDb3VudCIsIlZlcnRpY2FsTGF5b3V0IiwiZ2V0Q2hpbGRIZWlnaHQiLCJuZXdQb3MiLCJnZXRTcGFjaW5nIiwiY291bnQiLCJzcGFjaW5nIiwiVmVydGljYWxMYXlvdXROb1NjYWxlIiwiaW5pdENoaWxkU2l6ZSIsImNoaWxkU2l6ZSIsImxhc3RDaGlsZCIsImxhc3RDaGlsZFBvc2l0aW9uWSIsIldlYnNpdGVMb2FkRGV0ZWN0b3IiLCJsb2FkVGltZXN0YW1wIiwicmVhZHlTdGF0ZSIsIm9uUGFnZUxvYWRlZCIsInBlcnNpc3RlZCIsInZpc2liaWxpdHlTdGF0ZSIsIm9uVmlzaWJpbGl0eUNoYW5nZWQiLCJkZWJ1Z0xvZyIsIm9uV2Vic2l0ZUxvYWRlZCIsImlzUGFnZVZpc2libGUiLCJnZXRMb2FkVGltZXN0YW1wIl0sIm1hcHBpbmdzIjoieWRBRUEsSUFBUUEsRUFBeUNDLEVBQXpDRCxRQUFTRSxFQUFnQ0QsRUFBaENDLFNBQVVDLEVBQXNCRixFQUF0QkUsb0NBSUZDLEVBRnhCSixFQUFRLGdCQUFlSyxFQUluQkgsRUFBUyxDQUFFSSxLQUFNLENBQUNDLEtBQVFILEVBQUFJLEVBSDlCTCxHQUMwQ00sRUFBQUMsR0FEekJDLFdBQUFDLEdBQUEsU0FBQUMsSUFBQSxJQUFBLElBQUFDLEVBQUFDLEVBQUFDLFVBQUFDLE9BQUFDLE1BQUFDLE1BQUFKLEdBQUFLLElBQUFBLEVBQUFMLEVBQUFLLElBQUFGLEVBQUFFLEdBQUFKLFVBQUFJLEdBRWQsT0FGY04sRUFBQUYsRUFBQVMsS0FBQUMsTUFB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WUFBN0JmLFNBQVNtUSxpQkFHdkIvWSxFQUVNb1osaUJBQVAsV0FDSSxPQUFPalosS0FBS3dZLGVBQ2ZELEdBN0dvQ3BYLElBQVNyQixzQkFDN0MxQixJQUFRZ0QsZ0JBQUFDLGNBQUFDLFlBQUFDLHVCQUFBLE9BQ1csS0FITzdDLEVBR0ZHLEtBQUFILEtBNEc1QjhDLElBQUFDIiwiZmlsZSI6ImFsbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9kZWNvcmF0b3IsIENvbXBvbmVudCwgTm9kZSB9IGZyb20gJ2NjJztcclxuaW1wb3J0IHsgQXV0b1NjYWxlIH0gZnJvbSBcIi4vQXV0b1NjYWxlXCI7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHksIGV4ZWN1dGVJbkVkaXRNb2RlIH0gPSBfZGVjb3JhdG9yO1xyXG5cclxuQGNjY2xhc3MoJ0FkZEF1dG9TY2FsZScpXHJcbkBleGVjdXRlSW5FZGl0TW9kZVxyXG5leHBvcnQgY2xhc3MgQWRkQXV0b1NjYWxlIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIC8vIE3huqNuZyBsxrB1IHRy4buvIGPDoWMgbm9kZSDEkcOjIMSRxrDhu6NjIHRow6ptIEF1dG9TY2FsZVxyXG4gICAgQHByb3BlcnR5KHsgdHlwZTogW05vZGVdIH0pXHJcbiAgICBwcml2YXRlIG5vZGVzQ2hpbGRyZW46IE5vZGVbXSA9IFtdO1xyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuZ2V0Tm9kZXNDaGlsZHJlbigpO1xyXG4gICAgICAgIHRoaXMuYWRkQXV0b1NjYWxlVG9DaGlsZHJlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBvbkVuYWJsZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFkZEF1dG9TY2FsZVRvQ2hpbGRyZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb25EaXNhYmxlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlQXV0b1NjYWxlRnJvbUNoaWxkcmVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXROb2Rlc0NoaWxkcmVuKCkge1xyXG4gICAgICAgIC8vIEzhurdwIHF1YSB04bqldCBj4bqjIGPDoWMgY2hpbGQgbm9kZXNcclxuICAgICAgICB0aGlzLm5vZGUuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XHJcbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgbuG6v3Ugbm9kZSBjaMawYSBjw7MgdHJvbmcgZGFuaCBzw6FjaCDEkcOjIHRow6ptXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vZGVzQ2hpbGRyZW4uaW5kZXhPZihjaGlsZCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaMOqbSBub2RlIHbDoG8gZGFuaCBzw6FjaFxyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2Rlc0NoaWxkcmVuLnB1c2goY2hpbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhZGRBdXRvU2NhbGVUb0NoaWxkcmVuKCkge1xyXG4gICAgICAgIHRoaXMubm9kZXNDaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcclxuICAgICAgICAgICAgaWYgKCFjaGlsZC5nZXRDb21wb25lbnQoQXV0b1NjYWxlKSkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuYWRkQ29tcG9uZW50KEF1dG9TY2FsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbW92ZUF1dG9TY2FsZUZyb21DaGlsZHJlbigpIHtcclxuICAgICAgICB0aGlzLm5vZGVzQ2hpbGRyZW4uZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgaWYgKG5vZGU/LmlzVmFsaWQpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlQ29tcG9uZW50KCdBdXRvU2NhbGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IF9kZWNvcmF0b3IsIENvbXBvbmVudCwgTm9kZSwgVUlUcmFuc2Zvcm0sIFZlYzIsIEVudW0sIE1hdDQsIG1hdGggfSBmcm9tIFwiY2NcIjtcclxuaW1wb3J0IHsgTW92ZUxheW91dFRvQ2VudGVyIH0gZnJvbSBcIi4uL01vdmVMYXlvdXRUb0NlbnRlclwiO1xyXG5jb25zdCB7IGNjY2xhc3MsIHByb3BlcnR5LCBleGVjdXRlSW5FZGl0TW9kZSwgcmVxdWlyZUNvbXBvbmVudCB9ID0gX2RlY29yYXRvcjtcclxuXHJcbmVudW0gQXNwZWN0TW9kZSB7XHJcbiAgTm9uZSxcclxuICBGaXRJbnNpZGUsICAvLyBHaeG7ryB04bu3IGzhu4cga2h1bmcgaMOsbmggbW9uZyBtdeG7kW5cclxuICBGaXRPdXRzaWRlLCAvLyBHaeG7ryB04bu3IGzhu4cga2h1bmcgaMOsbmggbW9uZyBtdeG7kW5cclxufVxyXG5cclxuQGNjY2xhc3MoXCJBc3BlY3RSYXRpb0ZpdHRlclwiKVxyXG5AZXhlY3V0ZUluRWRpdE1vZGVcclxuQHJlcXVpcmVDb21wb25lbnQoTW92ZUxheW91dFRvQ2VudGVyKVxyXG5leHBvcnQgY2xhc3MgQXNwZWN0UmF0aW9GaXR0ZXIgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIEBwcm9wZXJ0eVxyXG4gIHB1YmxpYyBhc3BlY3RSYXRpbzogbnVtYmVyID0gMS4wOyAvLyBU4bu3IGzhu4cga2h1bmcgaMOsbmggbW9uZyBtdeG7kW4gKHdpZHRoIC8gaGVpZ2h0KVxyXG5cclxuICBAcHJvcGVydHlcclxuICBwdWJsaWMgaXNGb2xsb3dXaWR0aDogYm9vbGVhbiA9IHRydWU7IC8vIFRoZW8gY2hp4buBdSBy4buZbmcgaGF5IGNoaeG7gXUgY2FvXHJcblxyXG4gIEBwcm9wZXJ0eVxyXG4gIHB1YmxpYyBpc0ZvbGxvd0hlaWdodDogYm9vbGVhbiA9IHRydWU7IC8vIFRoZW8gY2hp4buBdSBy4buZbmcgaGF5IGNoaeG7gXUgY2FvXHJcblxyXG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEVudW0oQXNwZWN0TW9kZSkgfSlcclxuICBwdWJsaWMgYXNwZWN0TW9kZTogQXNwZWN0TW9kZSA9IEFzcGVjdE1vZGUuRml0SW5zaWRlOyAvLyBDaOG6vyDEkeG7mSB04bu3IGzhu4cga2h1bmcgaMOsbmggbW9uZyBtdeG7kW5cclxuXHJcbiAgcHJvdGVjdGVkIG9uRW5hYmxlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5nZXRBc3BlY3RSYXRpbygpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGRlbHRhVGltZTogbnVtYmVyKSB7XHJcbiAgICBpZiAodGhpcy5hc3BlY3RNb2RlID09IEFzcGVjdE1vZGUuRml0SW5zaWRlKSB7XHJcbiAgICAgIHRoaXMuSW5zaWRlQXNwZWN0UmF0aW8oKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMuYXNwZWN0TW9kZSA9PSBBc3BlY3RNb2RlLkZpdE91dHNpZGUpIHtcclxuICAgICAgdGhpcy5PdXRzaWRlQXNwZWN0UmF0aW8oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEFzcGVjdFJhdGlvKCkge1xyXG4gICAgY29uc3QgdWlUcmFuc2Zvcm0gPSB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKTtcclxuICAgIGlmICh1aVRyYW5zZm9ybSkge1xyXG4gICAgICAvLyBUw61uaCB0b8OhbiB04bu3IGzhu4cgZOG7sWEgdHLDqm4ga8OtY2ggdGjGsOG7m2MgdGjhu7FjIGPhu6dhIMSR4buRaSB0xrDhu6NuZyBzYXUga2hpIHhvYXlcclxuICAgICAgY29uc3QgYm91bmRzID0gdWlUcmFuc2Zvcm0uZ2V0Qm91bmRpbmdCb3goKTtcclxuICAgICAgdGhpcy5hc3BlY3RSYXRpbyA9IGJvdW5kcy53aWR0aCAvIGJvdW5kcy5oZWlnaHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRSb3RhdGVkRGltZW5zaW9ucyh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgcm90YXRpb246IG51bWJlcik6IHsgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfSB7XHJcbiAgICAvLyBDaHV54buDbiDEkeG7lWkgZ8OzYyBzYW5nIHJhZGlhblxyXG4gICAgY29uc3QgcmFkID0gbWF0aC50b1JhZGlhbihyb3RhdGlvbik7XHJcbiAgICBjb25zdCBjb3MgPSBNYXRoLmFicyhNYXRoLmNvcyhyYWQpKTtcclxuICAgIGNvbnN0IHNpbiA9IE1hdGguYWJzKE1hdGguc2luKHJhZCkpO1xyXG4gICAgXHJcbiAgICAvLyBUw61uaCB0b8OhbiBrw61jaCB0aMaw4bubYyBzYXUga2hpIHhvYXlcclxuICAgIGNvbnN0IHJvdGF0ZWRXaWR0aCA9IHdpZHRoICogY29zICsgaGVpZ2h0ICogc2luO1xyXG4gICAgY29uc3Qgcm90YXRlZEhlaWdodCA9IHdpZHRoICogc2luICsgaGVpZ2h0ICogY29zO1xyXG4gICAgXHJcbiAgICByZXR1cm4geyB3aWR0aDogcm90YXRlZFdpZHRoLCBoZWlnaHQ6IHJvdGF0ZWRIZWlnaHQgfTtcclxuICB9XHJcblxyXG4gIEluc2lkZUFzcGVjdFJhdGlvKCkge1xyXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5ub2RlLnBhcmVudDtcclxuICAgIGlmICghcGFyZW50KSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgcGFyZW50VHJhbnNmb3JtID0gcGFyZW50LmdldENvbXBvbmVudChVSVRyYW5zZm9ybSk7XHJcbiAgICBjb25zdCB1aVRyYW5zZm9ybSA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pO1xyXG5cclxuICAgIGlmIChwYXJlbnRUcmFuc2Zvcm0gJiYgdWlUcmFuc2Zvcm0pIHtcclxuICAgICAgLy8gTOG6pXkga8OtY2ggdGjGsOG7m2MgdGjhu7FjIGPhu6dhIHBhcmVudCBzYXUga2hpIHhvYXlcclxuICAgICAgY29uc3QgcGFyZW50Um90YXRpb24gPSBwYXJlbnQuZXVsZXJBbmdsZXMuejtcclxuICAgICAgY29uc3Qgcm90YXRlZFBhcmVudCA9IHRoaXMuZ2V0Um90YXRlZERpbWVuc2lvbnMoXHJcbiAgICAgICAgcGFyZW50VHJhbnNmb3JtLndpZHRoLFxyXG4gICAgICAgIHBhcmVudFRyYW5zZm9ybS5oZWlnaHQsXHJcbiAgICAgICAgcGFyZW50Um90YXRpb25cclxuICAgICAgKTtcclxuXHJcbiAgICAgIGxldCBuZXdXaWR0aCwgbmV3SGVpZ2h0O1xyXG5cclxuICAgICAgaWYgKHRoaXMuaXNGb2xsb3dXaWR0aCAmJiAhdGhpcy5pc0ZvbGxvd0hlaWdodCkge1xyXG4gICAgICAgIG5ld1dpZHRoID0gcm90YXRlZFBhcmVudC53aWR0aDtcclxuICAgICAgICBuZXdIZWlnaHQgPSBuZXdXaWR0aCAvIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0ZvbGxvd0hlaWdodCAmJiAhdGhpcy5pc0ZvbGxvd1dpZHRoKSB7XHJcbiAgICAgICAgbmV3SGVpZ2h0ID0gcm90YXRlZFBhcmVudC5oZWlnaHQ7XHJcbiAgICAgICAgbmV3V2lkdGggPSBuZXdIZWlnaHQgKiB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNGb2xsb3dXaWR0aCAmJiB0aGlzLmlzRm9sbG93SGVpZ2h0KSB7XHJcbiAgICAgICAgaWYgKHJvdGF0ZWRQYXJlbnQud2lkdGggLyByb3RhdGVkUGFyZW50LmhlaWdodCA8IHRoaXMuYXNwZWN0UmF0aW8pIHtcclxuICAgICAgICAgIG5ld1dpZHRoID0gcm90YXRlZFBhcmVudC53aWR0aDtcclxuICAgICAgICAgIG5ld0hlaWdodCA9IG5ld1dpZHRoIC8gdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbmV3SGVpZ2h0ID0gcm90YXRlZFBhcmVudC5oZWlnaHQ7XHJcbiAgICAgICAgICBuZXdXaWR0aCA9IG5ld0hlaWdodCAqIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDEkGnhu4F1IGNo4buJbmgga8OtY2ggdGjGsOG7m2MgbmfGsOG7o2MgbOG6oWkgxJHhu4MgcGjDuSBo4bujcCB24bubaSBnw7NjIHhvYXlcclxuICAgICAgY29uc3Qgbm9kZVJvdGF0aW9uID0gdGhpcy5ub2RlLmV1bGVyQW5nbGVzLno7XHJcbiAgICAgIGNvbnN0IGFkanVzdGVkRGltZW5zaW9ucyA9IHRoaXMuZ2V0Um90YXRlZERpbWVuc2lvbnMoXHJcbiAgICAgICAgbmV3V2lkdGgsXHJcbiAgICAgICAgbmV3SGVpZ2h0LFxyXG4gICAgICAgIC1ub2RlUm90YXRpb24gLy8gU+G7rSBk4bulbmcgZ8OzYyDDom0gxJHhu4MgxJFp4buBdSBjaOG7iW5oIG5nxrDhu6NjIGzhuqFpXHJcbiAgICAgICk7XHJcblxyXG4gICAgICB1aVRyYW5zZm9ybS5zZXRDb250ZW50U2l6ZShhZGp1c3RlZERpbWVuc2lvbnMud2lkdGgsIGFkanVzdGVkRGltZW5zaW9ucy5oZWlnaHQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgT3V0c2lkZUFzcGVjdFJhdGlvKCkge1xyXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5ub2RlLnBhcmVudDtcclxuICAgIGlmICghcGFyZW50KSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgcGFyZW50VHJhbnNmb3JtID0gcGFyZW50LmdldENvbXBvbmVudChVSVRyYW5zZm9ybSk7XHJcbiAgICBjb25zdCB1aVRyYW5zZm9ybSA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pO1xyXG5cclxuICAgIGlmIChwYXJlbnRUcmFuc2Zvcm0gJiYgdWlUcmFuc2Zvcm0pIHtcclxuICAgICAgLy8gTOG6pXkga8OtY2ggdGjGsOG7m2MgdGjhu7FjIGPhu6dhIHBhcmVudCBzYXUga2hpIHhvYXlcclxuICAgICAgY29uc3QgcGFyZW50Um90YXRpb24gPSBwYXJlbnQuZXVsZXJBbmdsZXMuejtcclxuICAgICAgY29uc3Qgcm90YXRlZFBhcmVudCA9IHRoaXMuZ2V0Um90YXRlZERpbWVuc2lvbnMoXHJcbiAgICAgICAgcGFyZW50VHJhbnNmb3JtLndpZHRoLFxyXG4gICAgICAgIHBhcmVudFRyYW5zZm9ybS5oZWlnaHQsXHJcbiAgICAgICAgcGFyZW50Um90YXRpb25cclxuICAgICAgKTtcclxuXHJcbiAgICAgIGxldCBuZXdXaWR0aCwgbmV3SGVpZ2h0O1xyXG5cclxuICAgICAgaWYgKHRoaXMuaXNGb2xsb3dXaWR0aCAmJiAhdGhpcy5pc0ZvbGxvd0hlaWdodCkge1xyXG4gICAgICAgIG5ld1dpZHRoID0gcm90YXRlZFBhcmVudC53aWR0aDtcclxuICAgICAgICBuZXdIZWlnaHQgPSBuZXdXaWR0aCAvIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0ZvbGxvd0hlaWdodCAmJiAhdGhpcy5pc0ZvbGxvd1dpZHRoKSB7XHJcbiAgICAgICAgbmV3SGVpZ2h0ID0gcm90YXRlZFBhcmVudC5oZWlnaHQ7XHJcbiAgICAgICAgbmV3V2lkdGggPSBuZXdIZWlnaHQgKiB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNGb2xsb3dXaWR0aCAmJiB0aGlzLmlzRm9sbG93SGVpZ2h0KSB7XHJcbiAgICAgICAgaWYgKHJvdGF0ZWRQYXJlbnQud2lkdGggLyByb3RhdGVkUGFyZW50LmhlaWdodCA+IHRoaXMuYXNwZWN0UmF0aW8pIHtcclxuICAgICAgICAgIG5ld1dpZHRoID0gcm90YXRlZFBhcmVudC53aWR0aDtcclxuICAgICAgICAgIG5ld0hlaWdodCA9IG5ld1dpZHRoIC8gdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbmV3SGVpZ2h0ID0gcm90YXRlZFBhcmVudC5oZWlnaHQ7XHJcbiAgICAgICAgICBuZXdXaWR0aCA9IG5ld0hlaWdodCAqIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDEkGnhu4F1IGNo4buJbmgga8OtY2ggdGjGsOG7m2MgbmfGsOG7o2MgbOG6oWkgxJHhu4MgcGjDuSBo4bujcCB24bubaSBnw7NjIHhvYXlcclxuICAgICAgY29uc3Qgbm9kZVJvdGF0aW9uID0gdGhpcy5ub2RlLmV1bGVyQW5nbGVzLno7XHJcbiAgICAgIGNvbnN0IGFkanVzdGVkRGltZW5zaW9ucyA9IHRoaXMuZ2V0Um90YXRlZERpbWVuc2lvbnMoXHJcbiAgICAgICAgbmV3V2lkdGgsXHJcbiAgICAgICAgbmV3SGVpZ2h0LFxyXG4gICAgICAgIC1ub2RlUm90YXRpb24gLy8gU+G7rSBk4bulbmcgZ8OzYyDDom0gxJHhu4MgxJFp4buBdSBjaOG7iW5oIG5nxrDhu6NjIGzhuqFpXHJcbiAgICAgICk7XHJcblxyXG4gICAgICB1aVRyYW5zZm9ybS5zZXRDb250ZW50U2l6ZShhZGp1c3RlZERpbWVuc2lvbnMud2lkdGgsIGFkanVzdGVkRGltZW5zaW9ucy5oZWlnaHQpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsImltcG9ydCB7IF9kZWNvcmF0b3IsIENvbXBvbmVudCwgTm9kZSwgVUlUcmFuc2Zvcm0sIFNpemUgfSBmcm9tICdjYyc7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHksIGV4ZWN1dGVJbkVkaXRNb2RlIH0gPSBfZGVjb3JhdG9yO1xyXG5cclxuQGNjY2xhc3MoJ0FzcGVjdFJhdGlvRml0dGVyRm9sbG93Tm9kZScpXHJcbkBleGVjdXRlSW5FZGl0TW9kZVxyXG5leHBvcnQgY2xhc3MgQXNwZWN0UmF0aW9GaXR0ZXJGb2xsb3dOb2RlIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IE5vZGUsIHRvb2x0aXA6IFwiTm9kZSBiw6puIHRyw6FpIMSR4buDIGPEg24gY2jhu4luaFwiIH0pXHJcbiAgICBsZWZ0Tm9kZTogTm9kZSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIEBwcm9wZXJ0eSh7IHRvb2x0aXA6IFwiS2hv4bqjbmcgY8OhY2ggduG7m2kgbm9kZSBiw6puIHRyw6FpXCIgfSlcclxuICAgIGxlZnRTcGFjaW5nOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IE5vZGUsIHRvb2x0aXA6IFwiTm9kZSBiw6puIHBo4bqjaSDEkeG7gyBjxINuIGNo4buJbmhcIiB9KVxyXG4gICAgcmlnaHROb2RlOiBOb2RlIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgQHByb3BlcnR5KHsgdG9vbHRpcDogXCJLaG/huqNuZyBjw6FjaCB24bubaSBub2RlIGLDqm4gcGjhuqNpXCIgfSlcclxuICAgIHJpZ2h0U3BhY2luZzogbnVtYmVyID0gMDtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBOb2RlLCB0b29sdGlwOiBcIk5vZGUgcGjDrWEgZMaw4bubaSDEkeG7gyBjxINuIGNo4buJbmhcIiB9KVxyXG4gICAgbm9kZURvd246IE5vZGUgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0b29sdGlwOiBcIktob+G6o25nIGPDoWNoIHbhu5tpIG5vZGUgcGjDrWEgZMaw4bubaVwiIH0pXHJcbiAgICBkb3duU3BhY2luZzogbnVtYmVyID0gMDtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBOb2RlLCB0b29sdGlwOiBcIk5vZGUgcGjDrWEgdHLDqm4gxJHhu4MgY8SDbiBjaOG7iW5oXCIgfSlcclxuICAgIG5vZGVVcDogTm9kZSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIEBwcm9wZXJ0eSh7IHRvb2x0aXA6IFwiS2hv4bqjbmcgY8OhY2ggduG7m2kgbm9kZSBwaMOtYSB0csOqblwiIH0pXHJcbiAgICB1cFNwYWNpbmc6IG51bWJlciA9IDA7XHJcblxyXG4gICAgQHByb3BlcnR5KHsgXHJcbiAgICAgICAgdHlwZTogTnVtYmVyLCBcclxuICAgICAgICB0b29sdGlwOiBcIlThu7cgbOG7hyBraHVuZyBow6xuaCBtb25nIG114buRbiAod2lkdGggLyBoZWlnaHQpXCIgXHJcbiAgICB9KVxyXG4gICAgYXNwZWN0UmF0aW86IG51bWJlciA9IDEuMDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgb25FbmFibGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXRBc3BlY3RSYXRpbygpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShkZWx0YVRpbWU6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmxlZnROb2RlICYmICF0aGlzLm5vZGVEb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQXNwZWN0UmF0aW9YKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm5vZGVEb3duICYmICF0aGlzLmxlZnROb2RlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQXNwZWN0UmF0aW9ZKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMubGVmdE5vZGUgJiYgdGhpcy5ub2RlRG93bikge1xyXG4gICAgICAgICAgICBjb25zdCBub2RlVHJhbnNmb3JtID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFRyYW5zZm9ybSA9IHRoaXMubGVmdE5vZGUuZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0VHJhbnNmb3JtMiA9IHRoaXMubm9kZURvd24uZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghbm9kZVRyYW5zZm9ybSB8fCAhdGFyZ2V0VHJhbnNmb3JtIHx8ICF0YXJnZXRUcmFuc2Zvcm0yKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAvLyBM4bqleSBib3VuZCBj4bunYSBj4bqjIDIgbm9kZVxyXG4gICAgICAgICAgICBjb25zdCBub2RlQm91bmQgPSBub2RlVHJhbnNmb3JtLmdldEJvdW5kaW5nQm94VG9Xb3JsZCgpO1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRCb3VuZDEgPSB0YXJnZXRUcmFuc2Zvcm0uZ2V0Qm91bmRpbmdCb3hUb1dvcmxkKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEJvdW5kMiA9IHRhcmdldFRyYW5zZm9ybTIuZ2V0Qm91bmRpbmdCb3hUb1dvcmxkKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBUw61uaCB0b8OhbiBjaGnhu4F1IHLhu5luZyBt4bubaSBk4buxYSB0csOqbiBraG/huqNuZyBjw6FjaCBnaeG7r2EgMiBub2RlXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1dpZHRoID0gTWF0aC5hYnMobm9kZUJvdW5kLnhNaW4gLSB0YXJnZXRCb3VuZDEueE1pbikgLSB0aGlzLmxlZnRTcGFjaW5nO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdZID0gTWF0aC5hYnMobm9kZUJvdW5kLnlNYXggLSB0YXJnZXRCb3VuZDIueU1pbikgLSB0aGlzLmRvd25TcGFjaW5nO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5ld1dpZHRoIDwgbmV3WSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBc3BlY3RSYXRpb1goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQXNwZWN0UmF0aW9ZKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRBc3BlY3RSYXRpbygpIHtcclxuICAgICAgICBjb25zdCB1aVRyYW5zZm9ybSA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pO1xyXG4gICAgICAgIGlmICh1aVRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICB0aGlzLmFzcGVjdFJhdGlvID0gdWlUcmFuc2Zvcm0ud2lkdGggLyB1aVRyYW5zZm9ybS5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUFzcGVjdFJhdGlvWCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMubGVmdE5vZGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3Qgbm9kZVRyYW5zZm9ybSA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldFRyYW5zZm9ybSA9IHRoaXMubGVmdE5vZGUuZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKTtcclxuXHJcbiAgICAgICAgaWYgKCFub2RlVHJhbnNmb3JtIHx8ICF0YXJnZXRUcmFuc2Zvcm0pIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gTOG6pXkgYm91bmQgY+G7p2EgY+G6oyAyIG5vZGVcclxuICAgICAgICBjb25zdCBub2RlQm91bmQgPSBub2RlVHJhbnNmb3JtLmdldEJvdW5kaW5nQm94VG9Xb3JsZCgpO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEJvdW5kMSA9IHRhcmdldFRyYW5zZm9ybS5nZXRCb3VuZGluZ0JveFRvV29ybGQoKTtcclxuXHJcbiAgICAgICAgLy8gVMOtbmggdG/DoW4gY2hp4buBdSBy4buZbmcgbeG7m2kgZOG7sWEgdHLDqm4ga2hv4bqjbmcgY8OhY2ggZ2nhu69hIDIgbm9kZVxyXG4gICAgICAgIGNvbnN0IG5ld1dpZHRoID0gTWF0aC5hYnMobm9kZUJvdW5kLnhNaW4gLSB0YXJnZXRCb3VuZDEueE1pbikgLSB0aGlzLmxlZnRTcGFjaW5nO1xyXG4gICAgICAgIGNvbnN0IG5ld0hlaWdodCA9IG5ld1dpZHRoIC8gdGhpcy5hc3BlY3RSYXRpbztcclxuXHJcbiAgICAgICAgbm9kZVRyYW5zZm9ybS5zZXRDb250ZW50U2l6ZShuZXcgU2l6ZShuZXdXaWR0aCwgbmV3SGVpZ2h0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQXNwZWN0UmF0aW9ZKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ub2RlRG93bikgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBub2RlVHJhbnNmb3JtID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSk7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0VHJhbnNmb3JtMiA9IHRoaXMubm9kZURvd24uZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKTtcclxuXHJcbiAgICAgICAgaWYgKCFub2RlVHJhbnNmb3JtIHx8ICF0YXJnZXRUcmFuc2Zvcm0yKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIEzhuqV5IGJvdW5kIGPhu6dhIGPhuqMgMiBub2RlXHJcbiAgICAgICAgY29uc3Qgbm9kZUJvdW5kID0gbm9kZVRyYW5zZm9ybS5nZXRCb3VuZGluZ0JveFRvV29ybGQoKTtcclxuICAgICAgICBjb25zdCB0YXJnZXRCb3VuZDIgPSB0YXJnZXRUcmFuc2Zvcm0yLmdldEJvdW5kaW5nQm94VG9Xb3JsZCgpO1xyXG5cclxuICAgICAgICAvLyBUw61uaCB0b8OhbiB24buLIHRyw60gbeG7m2kgY+G7p2Egbm9kZVxyXG4gICAgICAgIGNvbnN0IG5ld1kgPSBNYXRoLmFicyhub2RlQm91bmQueU1heCAtIHRhcmdldEJvdW5kMi55TWluKSAtIHRoaXMuZG93blNwYWNpbmc7XHJcbiAgICAgICAgY29uc3QgbmV3WCA9IG5ld1kgKiB0aGlzLmFzcGVjdFJhdGlvO1xyXG5cclxuICAgICAgICBub2RlVHJhbnNmb3JtLnNldENvbnRlbnRTaXplKG5ldyBTaXplKG5ld1gsIG5ld1kpKTtcclxuICAgIH1cclxufVxyXG4iLCIvKipcclxuICogTcO0IHThuqNcclxuICogXHJcbiAqIFTDrW5oIG7Eg25nOlxyXG4gKiBHaeG7kW5nIHbhu5tpIEFzcGVjdFJhdGlvRml0dGVyIGtow7RuZyBjaG8gxJHhu5FpIHTGsOG7o25nIG7DoHkgYuG7iyBiaeG6v24gZOG6oW5nIGtoaSBsYXllciBjaGEgdGhheSDEkeG7lWkga8OtY2ggdGjGsOG7m2NcclxuICogTmjGsG5nIG3DoCB04bu3IGzhu4cgc+G6vSDEkcaw4bujYyBnaeG7ryBraGkgYXNwZWN0UmF0aW8gbmjhu48gaMahbiBt4bupYyBhc3BlY3RSYXRpbyBjaG8gcGjDqXBcclxuICogXHJcbiAqL1xyXG5pbXBvcnQgeyBfZGVjb3JhdG9yLCBDb21wb25lbnQsIE5vZGUsIFVJVHJhbnNmb3JtLCBWZWMyIH0gZnJvbSBcImNjXCI7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHksIGV4ZWN1dGVJbkVkaXRNb2RlIH0gPSBfZGVjb3JhdG9yO1xyXG5cclxuQGNjY2xhc3MoXCJBc3BlY3RSYXRpb0ZpdHRlckhvbGRcIilcclxuQGV4ZWN1dGVJbkVkaXRNb2RlXHJcbmV4cG9ydCBjbGFzcyBBc3BlY3RSYXRpb0ZpdHRlckhvbGQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBhdXRvVXBkYXRlOiBib29sZWFuID0gdHJ1ZTtcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIHB1YmxpYyBhc3BlY3RSYXRpbzogbnVtYmVyID0gMS4wOyAvLyBU4bu3IGzhu4cga2h1bmcgaMOsbmggbW9uZyBtdeG7kW4gKHdpZHRoIC8gaGVpZ2h0KVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHVibGljIGlzRm9sbG93V2lkdGg6IGJvb2xlYW4gPSB0cnVlOyAvLyBUaGVvIGNoaeG7gXUgcuG7mW5nIGhheSBjaGnhu4F1IGNhb1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHVibGljIGlzRm9sbG93SGVpZ2h0OiBib29sZWFuID0gdHJ1ZTsgLy8gVGhlbyBjaGnhu4F1IHLhu5luZyBoYXkgY2hp4buBdSBjYW9cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIHB1YmxpYyBpc0hvbGQ6IGJvb2xlYW4gPSB0cnVlOyAvLyBraGkgY2hp4buBdSBkw6BpIHbGsOG7o3Qgbmfhu69uZyBSYXRpbyB0aMOsIHPhur0ga2jDtG5nIGLhu4sgdGhheSDEkeG7lWkgdsOgIG5nxrDhu6NjIGzhuqFpXHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5nZXRBc3BlY3RSYXRpbygpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShkZWx0YVRpbWU6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmF1dG9VcGRhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlVG9QYXJlbnRDZW50ZXIoKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVBc3BlY3RSYXRpbygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXNldEluRWRpdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZ2V0QXNwZWN0UmF0aW8oKTtcclxuICAgICAgICB0aGlzLmF1dG9VcGRhdGUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFzcGVjdFJhdGlvKCkge1xyXG4gICAgICAgIGNvbnN0IHVpVHJhbnNmb3JtID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSk7XHJcbiAgICAgICAgaWYgKHVpVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXNwZWN0UmF0aW8gPSB1aVRyYW5zZm9ybS53aWR0aCAvIHVpVHJhbnNmb3JtLmhlaWdodDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQXNwZWN0UmF0aW8oKSB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5ub2RlLnBhcmVudDtcclxuICAgICAgICBpZiAoIXBhcmVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBwYXJlbnRUcmFuc2Zvcm0gPSBwYXJlbnQuZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKTtcclxuICAgICAgICBjb25zdCB1aVRyYW5zZm9ybSA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pO1xyXG5cclxuICAgICAgICBpZiAocGFyZW50VHJhbnNmb3JtICYmIHVpVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFdpZHRoID0gcGFyZW50VHJhbnNmb3JtLndpZHRoO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnRIZWlnaHQgPSBwYXJlbnRUcmFuc2Zvcm0uaGVpZ2h0O1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UmF0aW8gPSBwYXJlbnRXaWR0aCAvIHBhcmVudEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgIGxldCBuZXdXaWR0aCwgbmV3SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNIb2xkICYmIGN1cnJlbnRSYXRpbyA8IHRoaXMuYXNwZWN0UmF0aW8pIHtcclxuICAgICAgICAgICAgICAgIHVpVHJhbnNmb3JtLnNldENvbnRlbnRTaXplKHBhcmVudFRyYW5zZm9ybS5jb250ZW50U2l6ZS54LCBwYXJlbnRUcmFuc2Zvcm0uY29udGVudFNpemUueSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIE1haW50YWluIGN1cnJlbnQgc2l6ZSB3aGVuIGhvbGRpbmcgYW5kIHJhdGlvIGlzIGV4Y2VlZGVkXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRm9sbG93V2lkdGggJiYgIXRoaXMuaXNGb2xsb3dIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIG5ld1dpZHRoID0gcGFyZW50VHJhbnNmb3JtLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgbmV3SGVpZ2h0ID0gbmV3V2lkdGggLyB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNGb2xsb3dIZWlnaHQgJiYgIXRoaXMuaXNGb2xsb3dXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgbmV3SGVpZ2h0ID0gcGFyZW50VHJhbnNmb3JtLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIG5ld1dpZHRoID0gbmV3SGVpZ2h0ICogdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzRm9sbG93V2lkdGggJiYgdGhpcy5pc0ZvbGxvd0hlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFdpZHRoIC8gcGFyZW50SGVpZ2h0IDwgdGhpcy5hc3BlY3RSYXRpbykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1dpZHRoID0gcGFyZW50V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3SGVpZ2h0ID0gbmV3V2lkdGggLyB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdIZWlnaHQgPSBwYXJlbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3V2lkdGggPSBuZXdIZWlnaHQgKiB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB1aVRyYW5zZm9ybS5zZXRDb250ZW50U2l6ZShuZXdXaWR0aCwgbmV3SGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaSBjaHV54buDbiDEkeG7kWkgdMaw4bujbmcgbsOgeSDEkeG6v24gduG7iyB0csOtIHRydW5nIHTDom0gY+G7p2EgxJHhu5FpIHTGsOG7o25nIGNoYVxyXG4gICAgICogVHLhuqMgduG7gSB04buNYSDEkeG7mSB0cnVuZyB0w6JtIGPhu6dhIMSR4buRaSB0xrDhu6NuZyBjaGEgaG/hurdjIHVuZGVmaW5lZCBu4bq/dSBraMO0bmcgY8OzIMSR4buRaSB0xrDhu6NuZyBjaGFcclxuICAgICAqL1xyXG4gICAgZ2V0UGFyZW50UG9pbnRDZW50ZXIoKSB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5ub2RlLnBhcmVudDtcclxuICAgICAgICBpZiAoIXBhcmVudCkgcmV0dXJuO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3QgcGFyZW50VHJhbnNmb3JtID0gcGFyZW50LmdldENvbXBvbmVudChVSVRyYW5zZm9ybSk7XHJcbiAgICAgICAgY29uc3Qgbm9kZVRyYW5zZm9ybSA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pO1xyXG4gICAgICAgIGlmICghcGFyZW50VHJhbnNmb3JtIHx8ICFub2RlVHJhbnNmb3JtKSByZXR1cm47XHJcbiAgICBcclxuICAgICAgICBjb25zdCBjb250ZW50U2l6ZSA9IHBhcmVudFRyYW5zZm9ybS5jb250ZW50U2l6ZTtcclxuICAgICAgICBjb25zdCBwYXJlbnRBbmNob3IgPSBwYXJlbnRUcmFuc2Zvcm0uYW5jaG9yUG9pbnQ7XHJcbiAgICAgICAgY29uc3Qgbm9kZUFuY2hvciA9IG5vZGVUcmFuc2Zvcm0uYW5jaG9yUG9pbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKFxyXG4gICAgICAgICAgY29udGVudFNpemUud2lkdGggKiAoMC41IC0gcGFyZW50QW5jaG9yLnggKyAwLjUgLSBub2RlQW5jaG9yLngpLFxyXG4gICAgICAgICAgY29udGVudFNpemUuaGVpZ2h0ICogKDAuNSAtIHBhcmVudEFuY2hvci55ICsgMC41IC0gbm9kZUFuY2hvci55KVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpIGNodXnhu4NuIMSR4buRaSB0xrDhu6NuZyBuw6B5IMSR4bq/biB24buLIHRyw60gdHJ1bmcgdMOibSBj4bunYSDEkeG7kWkgdMaw4bujbmcgY2hhXHJcbiAgICAgKi9cclxuICAgIG1vdmVUb1BhcmVudENlbnRlcigpIHtcclxuICAgICAgICBjb25zdCBjZW50ZXJQb2ludCA9IHRoaXMuZ2V0UGFyZW50UG9pbnRDZW50ZXIoKTtcclxuICAgICAgICBpZiAoY2VudGVyUG9pbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnNldFBvc2l0aW9uKGNlbnRlclBvaW50LngsIGNlbnRlclBvaW50LnkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBfZGVjb3JhdG9yLCBDb21wb25lbnQsIE5vZGUgfSBmcm9tICdjYyc7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IF9kZWNvcmF0b3I7XHJcblxyXG4vKipcclxuICogUXXhuqNuIGzDvSBoaeG7g24gdGjhu4sgY8OhYyBub2RlIGThu7FhIHRyw6puIHThu7cgbOG7hyBraHVuZyBow6xuaCAoYXNwZWN0IHJhdGlvKSBj4bunYSBtw6BuIGjDrG5oLlxyXG4gKiBcclxuICogVMOtbmggbsSDbmc6XHJcbiAqIC0gVOG7sSDEkeG7mW5nIGtp4buDbSB0cmEgdOG7tyBs4buHIG3DoG4gaMOsbmggKHdpZHRoL2hlaWdodClcclxuICogLSBIaeG7g24gdGjhu4sv4bqpbiBjw6FjIG5vZGUgZOG7sWEgdHLDqm4gdOG7tyBs4buHIG3DoG4gaMOsbmg6XHJcbiAqICAgKyBLaGkgcmF0aW8gPj0gMSAobcOgbiBow6xuaCBuZ2FuZyk6IGhp4buDbiB0aOG7iyBub2RlV2lkdGgsIOG6qW4gbm9kZUhlaWdodFxyXG4gKiAgICsgS2hpIHJhdGlvIDwgMSAobcOgbiBow6xuaCBk4buNYyk6IGhp4buDbiB0aOG7iyBub2RlSGVpZ2h0LCDhuqluIG5vZGVXaWR0aFxyXG4gKiBcclxuICogQGV4YW1wbGVcclxuICogLy8gQ8OhY2ggc+G7rSBk4bulbmc6XHJcbiAqIC8vIDEuIFRow6ptIGNvbXBvbmVudCB2w6BvIG3hu5l0IG5vZGVcclxuICogLy8gMi4gS8OpbyBjw6FjIG5vZGUgY+G6p24gaGnhu4NuIHRo4buLIGtoaSBtw6BuIGjDrG5oIG5nYW5nIHbDoG8gbm9kZVdpZHRoXHJcbiAqIC8vIDMuIEvDqW8gY8OhYyBub2RlIGPhuqduIGhp4buDbiB0aOG7iyBraGkgbcOgbiBow6xuaCBk4buNYyB2w6BvIG5vZGVIZWlnaHRcclxuICovXHJcbiBcclxuXHJcbkBjY2NsYXNzKCdBc3BlY3RSYXRpb01hbmFnZXInKVxyXG5leHBvcnQgY2xhc3MgQXNwZWN0UmF0aW9NYW5hZ2VyIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IFtOb2RlXSwgdG9vbHRpcDogXCJEYW5oIHPDoWNoIG5vZGUgc+G6vSDEkcaw4bujYyBhY3RpdmUga2hpIHJhdGlvID49IDEgKG3DoG4gaMOsbmggbmdhbmcpXCIgfSlcclxuICAgIG5vZGVXaWR0aDogTm9kZVtdID0gW107XHJcblxyXG4gICAgQHByb3BlcnR5KHsgdHlwZTogW05vZGVdLCB0b29sdGlwOiBcIkRhbmggc8OhY2ggbm9kZSBz4bq9IMSRxrDhu6NjIGFjdGl2ZSBraGkgcmF0aW8gPCAxIChtw6BuIGjDrG5oIGThu41jKVwiIH0pXHJcbiAgICBub2RlSGVpZ2h0OiBOb2RlW10gPSBbXTtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0b29sdGlwOiBcIlThu7cgbOG7hyBraHVuZyBow6xuaCB04buRaSB0aGnhu4N1XCIgfSlcclxuICAgIG1pblJhdGU6IG51bWJlciA9IDE7IFxyXG5cclxuICAgIHVwZGF0ZShkZWx0YVRpbWU6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHJhdGlvID0gdGhpcy5nZXRSYXRlKCk7XHJcbiAgICAgICAgaWYgKHJhdGlvIDwgdGhpcy5taW5SYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlTm9kZXModGhpcy5ub2RlV2lkdGgsIGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVOb2Rlcyh0aGlzLm5vZGVIZWlnaHQsIHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlTm9kZXModGhpcy5ub2RlV2lkdGgsIHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZU5vZGVzKHRoaXMubm9kZUhlaWdodCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldEFjdGl2ZU5vZGVzKG5vZGVzOiBOb2RlW10sIGlzQWN0aXZlOiBib29sZWFuKSB7XHJcbiAgICAgICAgbm9kZXMuZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgaWYgKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUuYWN0aXZlID0gaXNBY3RpdmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSYXRlKCk6IG51bWJlciB7XHJcbiAgICAgICAgLy8gR2V0IHJlYWwtdGltZSB3aW5kb3cgZGltZW5zaW9uc1xyXG4gICAgICAgIGNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgcmV0dXJuIHdpZHRoIC8gaGVpZ2h0O1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuIiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCBWaWRlb1BsYXllciwgVmlkZW9DbGlwLCBzeXMsIENDRmxvYXQgfSBmcm9tICdjYyc7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IF9kZWNvcmF0b3I7XHJcblxyXG5AY2NjbGFzcygnQXV0b0NoYW5nZVZpZGVvJylcclxuZXhwb3J0IGNsYXNzIEF1dG9DaGFuZ2VWaWRlbyBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBbVmlkZW9DbGlwXSwgdG9vbHRpcDogXCJMaXN0IG9mIHZpZGVvcyB0byBwbGF5IGluIHNlcXVlbmNlXCIgfSlcclxuICAgIHZpZGVvTGlzdDogVmlkZW9DbGlwW10gPSBbXTtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBWaWRlb1BsYXllciB9KVxyXG4gICAgdmlkZW9QbGF5ZXI6IFZpZGVvUGxheWVyID0gbnVsbDtcclxuXHJcbiAgICBwcml2YXRlIGN1cnJlbnRWaWRlb0luZGV4OiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSByZXRyeUNvdW50OiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBtYXhSZXRyaWVzOiBudW1iZXIgPSAzO1xyXG4gICAgQHByb3BlcnR5KHsgdHlwZTogQ0NGbG9hdCwgdG9vbHRpcDogXCJEZWxheSBiZXR3ZWVuIHJldHJpZXMgKHNlY29uZHMpXCIgfSlcclxuICAgIHByaXZhdGUgcmV0cnlEZWxheTogbnVtYmVyID0gMS4wO1xyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVZpZGVvKCk7XHJcblxyXG4gICAgICAgIC8vIFRow6ptIGxpc3RlbmVyIGNobyByZWxvYWQgZXZlbnRcclxuICAgICAgICBpZiAoc3lzLmlzQnJvd3Nlcikge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gTMawdSB0cuG6oW5nIHRow6FpIHZpZGVvIHRyxrDhu5tjIGtoaSByZWxvYWRcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd2aWRlb1N0YXRlJywgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmN1cnJlbnRWaWRlb0luZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IHRoaXMudmlkZW9QbGF5ZXI/LmN1cnJlbnRUaW1lIHx8IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSB2w6Aga2jDtGkgcGjhu6VjIHRy4bqhbmcgdGjDoWkgc2F1IGtoaSBsb2FkXHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tQcmV2aW91c1N0YXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBM4bqvbmcgbmdoZSBz4buxIGtp4buHbiB3ZWJzaXRlIGxvYWRlZCDEkeG7gyByZXNldCB2aWRlb1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd3ZWJzaXRlTG9hZGVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRWaWRlbygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBM4bqvbmcgbmdoZSBz4buxIGtp4buHbiB2aXNpYmlsaXR5IMSR4buDIHjhu60gbMO9IGtoaSB0YWIgxJHGsOG7o2MgYWN0aXZlIGzhuqFpXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYnNpdGVWaXNpYmlsaXR5Q2hhbmdlZCcsIChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBpc1Zpc2libGUgfSA9IGV2ZW50LmRldGFpbDtcclxuICAgICAgICAgICAgaWYgKGlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja0FuZFJlc3RhcnRWaWRlbygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja1ByZXZpb3VzU3RhdGUoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgc2F2ZWRTdGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd2aWRlb1N0YXRlJyk7XHJcbiAgICAgICAgICAgIGlmIChzYXZlZFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IEpTT04ucGFyc2Uoc2F2ZWRTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBDaOG7iSBraMO0aSBwaOG7pWMgbuG6v3UgdGjhu51pIGdpYW4gcmVsb2FkIDwgMyBnacOieVxyXG4gICAgICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSBzdGF0ZS50aW1lc3RhbXAgPCAzMDAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VmlkZW9JbmRleCA9IHN0YXRlLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5Q3VycmVudFZpZGVvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlZWsgxJHhur9uIHbhu4sgdHLDrSBjxalcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlkZW9QbGF5ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlkZW9QbGF5ZXIuY3VycmVudFRpbWUgPSBzdGF0ZS50aW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMC41KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd2aWRlb1N0YXRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXN0b3JpbmcgdmlkZW8gc3RhdGU6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRpYWxpemVWaWRlbygpIHtcclxuICAgICAgICBpZiAoIXRoaXMudmlkZW9QbGF5ZXIgfHwgdGhpcy52aWRlb0xpc3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVmlkZW8gcGxheWVyIG9yIHZpZGVvIGxpc3Qgbm90IHByb3Blcmx5IGluaXRpYWxpemVkJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENsZWFudXAgZXhpc3RpbmcgbGlzdGVuZXJzXHJcbiAgICAgICAgdGhpcy52aWRlb1BsYXllci5ub2RlLm9mZignY29tcGxldGVkJywgdGhpcy5vblZpZGVvQ29tcGxldGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnZpZGVvUGxheWVyLm5vZGUub2ZmKCdlcnJvcicsIHRoaXMub25WaWRlb0Vycm9yLCB0aGlzKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGxpc3RlbmVyc1xyXG4gICAgICAgIHRoaXMudmlkZW9QbGF5ZXIubm9kZS5vbignY29tcGxldGVkJywgdGhpcy5vblZpZGVvQ29tcGxldGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnZpZGVvUGxheWVyLm5vZGUub24oJ2Vycm9yJywgdGhpcy5vblZpZGVvRXJyb3IsIHRoaXMpO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsIHBsYXkgd2l0aCBkZWxheVxyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5Q3VycmVudFZpZGVvKCk7XHJcbiAgICAgICAgfSwgMC4xKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBsYXlDdXJyZW50VmlkZW8oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFZpZGVvSW5kZXggPj0gdGhpcy52aWRlb0xpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZGVvSW5kZXggPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5yZXRyeUNvdW50ID0gMDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFRow6ptIGNoZWNrIHRy4bqhbmcgdGjDoWkgbmV0d29ya1xyXG4gICAgICAgICAgICBpZiAoc3lzLmlzQnJvd3NlciAmJiAhbmF2aWdhdG9yLm9uTGluZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU9uY2UoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheUN1cnJlbnRWaWRlbygpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvUGxheWVyLmlzUGxheWluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb1BsYXllci5zdG9wKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlkZW9QbGF5ZXIuY2xpcCA9IHRoaXMudmlkZW9MaXN0W3RoaXMuY3VycmVudFZpZGVvSW5kZXhdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVMSDbmcgZGVsYXkgdHLGsOG7m2Mga2hpIHBsYXkgxJHhu4MgxJHhuqNtIGLhuqNvIHZpZGVvIMSRxrDhu6NjIGxvYWRcclxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU9uY2UoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb1BsYXllci5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFRow6ptIG5oaeG7gXUgY2hlY2tzIGjGoW5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGUodGhpcy5jaGVja1ZpZGVvUGxheWJhY2ssIDAuNSwgNSk7XHJcbiAgICAgICAgICAgIH0sIDAuMyk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBsYXlpbmcgdmlkZW86JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVBsYXliYWNrRmFpbHVyZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrVmlkZW9QbGF5YmFjaygpIHtcclxuICAgICAgICBpZiAodGhpcy52aWRlb1BsYXllciAmJiAhdGhpcy52aWRlb1BsYXllci5pc1BsYXlpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVQbGF5YmFja0ZhaWx1cmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVQbGF5YmFja0ZhaWx1cmUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmV0cnlDb3VudCA8IHRoaXMubWF4UmV0cmllcykge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFJldHJ5IGF0dGVtcHQgJHt0aGlzLnJldHJ5Q291bnQgKyAxfSBvZiAke3RoaXMubWF4UmV0cmllc31gKTtcclxuICAgICAgICAgICAgdGhpcy5yZXRyeUNvdW50Kys7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBSZXRyeSB3aXRoIGluY3JlYXNpbmcgZGVsYXlcclxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU9uY2UoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5Q3VycmVudFZpZGVvKCk7XHJcbiAgICAgICAgICAgIH0sIHRoaXMucmV0cnlEZWxheSAqIHRoaXMucmV0cnlDb3VudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTWF4IHJldHJpZXMgcmVhY2hlZCwgbW92aW5nIHRvIG5leHQgdmlkZW8nKTtcclxuICAgICAgICAgICAgdGhpcy5yZXRyeUNvdW50ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmlkZW9JbmRleCsrO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXlDdXJyZW50VmlkZW8oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja0FuZFJlc3RhcnRWaWRlbygpIHtcclxuICAgICAgICAvLyBLaeG7g20gdHJhIG7hur91IHZpZGVvIGtow7RuZyBwaMOhdCBob+G6t2MgYuG7iyDEkeG7qW5nXHJcbiAgICAgICAgaWYgKHRoaXMudmlkZW9QbGF5ZXIgJiYgKCF0aGlzLnZpZGVvUGxheWVyLmlzUGxheWluZyB8fCB0aGlzLnZpZGVvUGxheWVyLmN1cnJlbnRUaW1lID09PSB0aGlzLnZpZGVvUGxheWVyLmR1cmF0aW9uKSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRWaWRlbygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVmlkZW9Db21wbGV0ZWQoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VmlkZW9JbmRleCsrO1xyXG4gICAgICAgIHRoaXMucGxheUN1cnJlbnRWaWRlbygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25WaWRlb0Vycm9yKGV2ZW50KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignVmlkZW8gcGxheWJhY2sgZXJyb3I6JywgZXZlbnQpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlUGxheWJhY2tGYWlsdXJlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25EZXN0cm95KCkge1xyXG4gICAgICAgIC8vIENsZWFudXBcclxuICAgICAgICBpZiAodGhpcy52aWRlb1BsYXllcikge1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvUGxheWVyLm5vZGUub2ZmKCdjb21wbGV0ZWQnLCB0aGlzLm9uVmlkZW9Db21wbGV0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvUGxheWVyLm5vZGUub2ZmKCdlcnJvcicsIHRoaXMub25WaWRlb0Vycm9yLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dlYnNpdGVMb2FkZWQnLCB0aGlzLnJlc3RhcnRWaWRlbyk7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dlYnNpdGVWaXNpYmlsaXR5Q2hhbmdlZCcsIG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFB1YmxpYyBtZXRob2QgdG8gZm9yY2UgcmVzdGFydCB2aWRlbyBwbGF5YmFja1xyXG4gICAgcHVibGljIHJlc3RhcnRWaWRlbygpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRWaWRlb0luZGV4ID0gMDtcclxuICAgICAgICB0aGlzLnJldHJ5Q291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVZpZGVvKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiLypcclxuKiBDaMawYSBob+G6oXQgxJHhu5luZyDEkcaw4bujY1xyXG4qIMSRw6J5IGzDoCBt4buZdCBjb21wb25lbnQgbGF5b3V0IHThu7EgxJHhu5luZyBz4bqvcCB44bq/cCBjw6FjIGNoaWxkZW4gY29uIGPhu6dhIG7Ds1xyXG4qL1xyXG5cclxuaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCBFbnVtLCBWZWMzLCBVSVRyYW5zZm9ybSB9IGZyb20gXCJjY1wiO1xyXG5jb25zdCB7IGNjY2xhc3MsIHByb3BlcnR5LCBleGVjdXRlSW5FZGl0TW9kZX0gPSBfZGVjb3JhdG9yO1xyXG5cclxuLy8gbMOgIHPhuq9wIHjhur9wIGPDoWMgxJHhu5FpIHTGsOG7o25nIGNoaWxkZW4gdGhlbyB0aOG7qSB04buxXHJcbmVudW0gU29ydFR5cGUge1xyXG4gIE5vbmUsIC8vIGtow7RuZyBz4bqvcCB44bq/cCBraMO0bmcgbMOgbSBnw6xcclxuICBIb3Jpem9udGFsLCAvLyB0aOG7sWMgaGnhu4duIHZp4buHYyBz4bqvcCB44bq/cCB0aGVvIGNoaeG7gXUgZOG7jWNcclxuICBWZXJ0aWNhbCwgLy8gdGjhu7FjIGhp4buHbiBz4bqvcCB44bq/cCB0aGVvIGNoaeG7gXUgbmdhbmdcclxufVxyXG5cclxuLy8gdOG7sSDEkeG7mW5nIMSRaeG7gXUgY2jhu4luaGggY8OhYyBjaGlsZHJlbiwgc2V0IGxheW91dCBjw6FjIGNoaWxkcmVuIHNhbyBjaG8gduG7q2Ega2jDrXQgduG7m2kgbGF5b3V0IG7DoHkgxJHDonkgbMOgIMSR4buRaSB0xrDhu6NuZyBjaGEgY2jhu6lhIGNvZGVcclxuZW51bSBSZXNpemVNb2RlIHtcclxuICBOb25lLFxyXG4gIENoaWxkcmVuLCAvLyBjw6FjIGNoaWxkcmVuIGPhu6dhIMSR4buRaSB0xrDhu6NuZyBuw6B5IHPhur0gdMOtbmggdG/DoW4gdOG7tyBs4buHIGxheW91dCBwaMO5IGjhu6NwXHJcbn1cclxuXHJcbkBjY2NsYXNzKFwiQXV0b0dyaWRMYXlvdXRcIilcclxuQGV4ZWN1dGVJbkVkaXRNb2RlXHJcbmV4cG9ydCBjbGFzcyBBdXRvR3JpZExheW91dCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgQHByb3BlcnR5KHsgdHlwZTogRW51bShTb3J0VHlwZSkgfSlcclxuICBzb3J0VHlwZTogU29ydFR5cGUgPSBTb3J0VHlwZS5Ob25lO1xyXG5cclxuICBAcHJvcGVydHkoeyB0eXBlOiBFbnVtKFJlc2l6ZU1vZGUpIH0pXHJcbiAgcmVzaXplTW9kZTogUmVzaXplTW9kZSA9IFJlc2l6ZU1vZGUuTm9uZTtcclxuXHJcbiAgcHJvdGVjdGVkIG9uTG9hZCgpOiB2b2lkIHtcclxuICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZGVsdGFUaW1lOiBudW1iZXIpIHtcclxuICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVMYXlvdXQoKSB7XHJcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMubm9kZS5jaGlsZHJlbjtcclxuXHJcbiAgICBpZiAodGhpcy5zb3J0VHlwZSAhPT0gU29ydFR5cGUuTm9uZSkge1xyXG4gICAgICB0aGlzLnNvcnRDaGlsZHJlbihjaGlsZHJlbik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMucmVzaXplTW9kZSA9PT0gUmVzaXplTW9kZS5DaGlsZHJlbikge1xyXG4gICAgICB0aGlzLnJlc2l6ZUNoaWxkcmVuKGNoaWxkcmVuKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNvcnRDaGlsZHJlbihjaGlsZHJlbjogTm9kZVtdKSB7XHJcbiAgICBpZiAodGhpcy5zb3J0VHlwZSA9PT0gU29ydFR5cGUuSG9yaXpvbnRhbCkge1xyXG4gICAgICBjaGlsZHJlbi5zb3J0KChhLCBiKSA9PiBhLnBvc2l0aW9uLnggLSBiLnBvc2l0aW9uLngpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNvcnRUeXBlID09PSBTb3J0VHlwZS5WZXJ0aWNhbCkge1xyXG4gICAgICBjaGlsZHJlbi5zb3J0KChhLCBiKSA9PiBhLnBvc2l0aW9uLnkgLSBiLnBvc2l0aW9uLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBvZmZzZXQgPSAwO1xyXG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbikge1xyXG4gICAgICBpZiAodGhpcy5zb3J0VHlwZSA9PT0gU29ydFR5cGUuSG9yaXpvbnRhbCkge1xyXG4gICAgICAgIGNoaWxkLnNldFBvc2l0aW9uKG5ldyBWZWMzKG9mZnNldCwgY2hpbGQucG9zaXRpb24ueSwgY2hpbGQucG9zaXRpb24ueikpO1xyXG4gICAgICAgIG9mZnNldCArPSBjaGlsZC5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pLndpZHRoO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc29ydFR5cGUgPT09IFNvcnRUeXBlLlZlcnRpY2FsKSB7XHJcbiAgICAgICAgY2hpbGQuc2V0UG9zaXRpb24obmV3IFZlYzMoY2hpbGQucG9zaXRpb24ueCwgb2Zmc2V0LCBjaGlsZC5wb3NpdGlvbi56KSk7XHJcbiAgICAgICAgb2Zmc2V0ICs9IGNoaWxkLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSkuaGVpZ2h0O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNpemVDaGlsZHJlbihjaGlsZHJlbjogTm9kZVtdKSB7XHJcbiAgICBjb25zdCBwYXJlbnRUcmFuc2Zvcm0gPSB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKTtcclxuICAgIGNvbnN0IHBhcmVudFdpZHRoID0gcGFyZW50VHJhbnNmb3JtLndpZHRoO1xyXG4gICAgY29uc3QgcGFyZW50SGVpZ2h0ID0gcGFyZW50VHJhbnNmb3JtLmhlaWdodDtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XHJcbiAgICAgIGNvbnN0IGNoaWxkVHJhbnNmb3JtID0gY2hpbGQuZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKTtcclxuICAgICAgY2hpbGRUcmFuc2Zvcm0ud2lkdGggPSBwYXJlbnRXaWR0aCAvIGNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgY2hpbGRUcmFuc2Zvcm0uaGVpZ2h0ID0gcGFyZW50SGVpZ2h0IC8gY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBfZGVjb3JhdG9yLCBDb21wb25lbnQsIE5vZGUsIEFuaW1hdGlvbiwgQW5pbWF0aW9uQ2xpcCB9IGZyb20gJ2NjJztcclxuY29uc3QgeyBjY2NsYXNzLCBwcm9wZXJ0eSB9ID0gX2RlY29yYXRvcjtcclxuXHJcbkBjY2NsYXNzKCdQbGF5QW5pbWF0aW9uQ2xpcHMnKVxyXG5leHBvcnQgY2xhc3MgUGxheUFuaW1hdGlvbkNsaXBzIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIEBwcm9wZXJ0eShBbmltYXRpb24pXHJcbiAgICBwcml2YXRlIGFuaW06IEFuaW1hdGlvbiA9IG51bGw7XHJcblxyXG4gICAgcHJpdmF0ZSBjdXJyZW50Q2xpcEluZGV4OiBudW1iZXIgPSAwO1xyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmFuaW0pIHtcclxuICAgICAgICAgICAgLy8gTOG6r25nIG5naGUgc+G7sSBraeG7h24ga2hpIGFuaW1hdGlvbiBr4bq/dCB0aMO6Y1xyXG4gICAgICAgICAgICB0aGlzLmFuaW0ub24oQW5pbWF0aW9uLkV2ZW50VHlwZS5GSU5JU0hFRCwgdGhpcy5vbkFuaW1hdGlvbkZpbmlzaGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgLy8gUGxheSBhbmltYXRpb24gxJHhuqd1IHRpw6puXHJcbiAgICAgICAgICAgIHRoaXMucGxheUN1cnJlbnRDbGlwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGxheUN1cnJlbnRDbGlwKCkge1xyXG4gICAgICAgIGNvbnN0IGNsaXBzID0gdGhpcy5hbmltLmNsaXBzO1xyXG4gICAgICAgIGlmIChjbGlwcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDbGlwSW5kZXggPj0gY2xpcHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDbGlwSW5kZXggPSAwOyAvLyBRdWF5IGzhuqFpIGNsaXAgxJHhuqd1IHRpw6puIG7hur91IMSRw6MgaOG6v3RcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmFuaW0ucGxheShjbGlwc1t0aGlzLmN1cnJlbnRDbGlwSW5kZXhdLm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uQW5pbWF0aW9uRmluaXNoZWQoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50Q2xpcEluZGV4Kys7XHJcbiAgICAgICAgdGhpcy5wbGF5Q3VycmVudENsaXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYW5pbSkge1xyXG4gICAgICAgICAgICB0aGlzLmFuaW0ub2ZmKEFuaW1hdGlvbi5FdmVudFR5cGUuRklOSVNIRUQsIHRoaXMub25BbmltYXRpb25GaW5pc2hlZCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCBVSVRyYW5zZm9ybSwgVmVjMiwgVmVjMywgQ0NCb29sZWFuIH0gZnJvbSAnY2MnO1xyXG5jb25zdCB7IGNjY2xhc3MsIHByb3BlcnR5LCBleGVjdXRlSW5FZGl0TW9kZSB9ID0gX2RlY29yYXRvcjtcclxuXHJcbi8vIFThu7EgxJHhu5luZyBzY2FsZSB0aGVvIMSR4buRaSB0xrDhu6NuZyBjaGEgc2NhbGUg4bufIMSRw6J5IGzDoCDEkeG7kWkgY2hp4bq/dSB0aGVvIFVJIFRyYW5zZm9ybVxyXG5AY2NjbGFzcygnQXV0b1NjYWxlJylcclxuQGV4ZWN1dGVJbkVkaXRNb2RlXHJcbmV4cG9ydCBjbGFzcyBBdXRvU2NhbGUgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgQHByb3BlcnR5KHsgdHlwZTogVUlUcmFuc2Zvcm0sIHRvb2x0aXA6IFwiTm9kZSBjaGFcIiB9KVxyXG4gICAgcGFyZW50VHJhbnNmb3JtOiBVSVRyYW5zZm9ybSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IFZlYzIsIHRvb2x0aXA6IFwiS8OtY2ggdGjGsOG7m2MgY+G7p2Egbm9kZSBjaGFcIiB9KVxyXG4gICAgcGFyZW50Q29udGVudFNpemU6IFZlYzIgPSBuZXcgVmVjMigwLCAwKTtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBWZWMyLCB0b29sdGlwOiBcIkvDrWNoIHRoxrDhu5tjIGJhbiDEkeG6p3UgY+G7p2Egbm9kZSBjb25cIiB9KVxyXG4gICAgY29udGVudFNpemU6IFZlYzIgPSBuZXcgVmVjMigwLCAwKTtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBWZWMyLCB0b29sdGlwOiBcIlbhu4sgdHLDrSBiYW4gxJHhuqd1IGPhu6dhIG5vZGUgY29uXCIgfSlcclxuICAgIHBvc2l0aW9uOiBWZWMyID0gbmV3IFZlYzIoMCwgMCk7XHJcblxyXG4gICAgcHJvdGVjdGVkIG9uRW5hYmxlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucGFyZW50VHJhbnNmb3JtID0gdGhpcy5ub2RlLnBhcmVudD8uZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKSB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMucGFyZW50Q29udGVudFNpemUgPSBuZXcgVmVjMih0aGlzLnBhcmVudFRyYW5zZm9ybT8ud2lkdGggfHwgMCwgdGhpcy5wYXJlbnRUcmFuc2Zvcm0/LmhlaWdodCB8fCAwKTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRTaXplID0gbmV3IFZlYzIodGhpcy5ub2RlLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSk/LndpZHRoIHx8IDAsIHRoaXMubm9kZS5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pPy5oZWlnaHQgfHwgMCk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWMyKHRoaXMubm9kZS5wb3NpdGlvbi54LCB0aGlzLm5vZGUucG9zaXRpb24ueSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVVJVHJhbnNmb3JtKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVVSVRyYW5zZm9ybSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMucGFyZW50VHJhbnNmb3JtKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IHJhdGlvU2NhbGVQYXJlbnRXaWR0aCA9IHRoaXMucGFyZW50VHJhbnNmb3JtLndpZHRoIC8gdGhpcy5wYXJlbnRDb250ZW50U2l6ZS54O1xyXG4gICAgICAgIGNvbnN0IHJhdGlvU2NhbGVQYXJlbnRIZWlnaHQgPSB0aGlzLnBhcmVudFRyYW5zZm9ybS5oZWlnaHQgLyB0aGlzLnBhcmVudENvbnRlbnRTaXplLnk7XHJcblxyXG4gICAgICAgIHRoaXMubm9kZS5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pPy5zZXRDb250ZW50U2l6ZSh0aGlzLmNvbnRlbnRTaXplLnggKiByYXRpb1NjYWxlUGFyZW50V2lkdGgsIHRoaXMuY29udGVudFNpemUueSAqIHJhdGlvU2NhbGVQYXJlbnRIZWlnaHQpO1xyXG4gICAgICAgIHRoaXMubm9kZS5wb3NpdGlvbiA9IG5ldyBWZWMzKHRoaXMucG9zaXRpb24ueCAqIHJhdGlvU2NhbGVQYXJlbnRXaWR0aCwgdGhpcy5wb3NpdGlvbi55ICogcmF0aW9TY2FsZVBhcmVudEhlaWdodCwgMCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCJpbXBvcnQgeyBfZGVjb3JhdG9yLCBDb21wb25lbnQsIE5vZGUsIFVJVHJhbnNmb3JtLCBWZWMyLCBWZWMzLCBDQ0Jvb2xlYW4gfSBmcm9tICdjYyc7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHksIGV4ZWN1dGVJbkVkaXRNb2RlIH0gPSBfZGVjb3JhdG9yO1xyXG5cclxuQGNjY2xhc3MoJ0xheW91dFRvcERvd24nKVxyXG5AZXhlY3V0ZUluRWRpdE1vZGVcclxuZXhwb3J0IGNsYXNzIExheW91dFRvcERvd24gZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cclxuICAgIHByaXZhdGUgX3BhcmVudFRyYW5zZm9ybTogVUlUcmFuc2Zvcm0gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBOb2RlLCB0b29sdGlwOiBcIkxheW91dCB0csOqblwiIH0pXHJcbiAgICBsYXlvdXRUb3A6IE5vZGUgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBOb2RlLCB0b29sdGlwOiBcIkxheW91dCBkxrDhu5tpXCIgfSlcclxuICAgIGxheW91dEJvdHRvbTogTm9kZSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IFZlYzIsIHZpc2libGU6IGZhbHNlIH0pXHJcbiAgICBsYXlvdXRUb3BTaXplOiBWZWMyID0gbmV3IFZlYzIoMCwgMCk7XHJcblxyXG4gICAgQHByb3BlcnR5KHsgdHlwZTogVmVjMiwgdmlzaWJsZTogZmFsc2UgfSlcclxuICAgIGxheW91dEJvdHRvbVNpemU6IFZlYzIgPSBuZXcgVmVjMigwLCAwKTtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBDQ0Jvb2xlYW4sIHRvb2x0aXA6IFwiVOG7sSDEkeG7mW5nIGPhuq1wIG5o4bqtdCB0cm9uZyBydW50aW1lXCIgfSlcclxuICAgIGF1dG9VcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuX3BhcmVudFRyYW5zZm9ybSA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0SW5FZGl0b3IoKSB7IFxyXG4gICAgICAgIHRoaXMuYXV0b1VwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0TGF5b3V0VG9wRG93bigpO1xyXG4gICAgICAgIHRoaXMuZ2V0TGF5b3V0U2l6ZSgpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRMYXlvdXRUb3BEb3duKCkge1xyXG4gICAgICAgIHRoaXMubGF5b3V0VG9wID0gdGhpcy5ub2RlLmNoaWxkcmVuWzFdO1xyXG4gICAgICAgIHRoaXMubGF5b3V0Qm90dG9tID0gdGhpcy5ub2RlLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubGF5b3V0VG9wLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSkuc2V0QW5jaG9yUG9pbnQoMCwgMCk7XHJcbiAgICAgICAgdGhpcy5sYXlvdXRCb3R0b20uZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKS5zZXRBbmNob3JQb2ludCgwLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b1VwZGF0ZSlcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUxheW91dCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMubGF5b3V0VG9wIHx8ICF0aGlzLmxheW91dEJvdHRvbSkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5fcGFyZW50VHJhbnNmb3JtLndpZHRoO1xyXG5cclxuICAgICAgICAvLyBzZXQgc2l6ZSB3aWR0aFxyXG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMubm9kZS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICBjaGlsZC5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pLnNldENvbnRlbnRTaXplKHdpZHRoLCBjaGlsZC5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pLmhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHNldCBwb3NpdGlvblxyXG4gICAgICAgIHRoaXMubGF5b3V0VG9wLnNldFBvc2l0aW9uKDAsIHRoaXMuX3BhcmVudFRyYW5zZm9ybS5oZWlnaHQgLSB0aGlzLmxheW91dFRvcC5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pLmhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5sYXlvdXRCb3R0b20uc2V0UG9zaXRpb24oMCwgMCk7XHJcblxyXG4gICAgICAgIHRoaXMuYXV0b1NjYWxlTGF5b3V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhdXRvU2NhbGVMYXlvdXQoKSB7XHJcbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLl9wYXJlbnRUcmFuc2Zvcm0ud2lkdGg7XHJcblxyXG4gICAgICAgIGxldCBsYXlvdXRUb3BUcmFucyA9IHRoaXMubGF5b3V0VG9wLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSk7XHJcbiAgICAgICAgbGV0IGxheW91dEJvdHRvbVRyYW5zID0gdGhpcy5sYXlvdXRCb3R0b20uZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKTtcclxuXHJcbiAgICAgICAgaWYgKGxheW91dFRvcFRyYW5zLmhlaWdodCArIGxheW91dEJvdHRvbVRyYW5zLmhlaWdodCA+IHRoaXMuX3BhcmVudFRyYW5zZm9ybS5oZWlnaHQpIHtcclxuICAgICAgICAgICAgbGF5b3V0VG9wVHJhbnMuc2V0Q29udGVudFNpemUod2lkdGgsIHRoaXMuX3BhcmVudFRyYW5zZm9ybS5oZWlnaHQgLSBsYXlvdXRCb3R0b21UcmFucy5oZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbGF5b3V0VG9wVHJhbnMuc2V0Q29udGVudFNpemUod2lkdGgsIHRoaXMubGF5b3V0VG9wU2l6ZS55KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRMYXlvdXRTaXplKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5sYXlvdXRUb3AgfHwgIXRoaXMubGF5b3V0Qm90dG9tKSByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMubGF5b3V0VG9wU2l6ZSA9IG5ldyBWZWMyKHRoaXMubGF5b3V0VG9wLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSkud2lkdGgsIHRoaXMubGF5b3V0VG9wLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSkuaGVpZ2h0KTtcclxuICAgICAgICB0aGlzLmxheW91dEJvdHRvbVNpemUgPSBuZXcgVmVjMih0aGlzLmxheW91dEJvdHRvbS5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pLndpZHRoLCB0aGlzLmxheW91dEJvdHRvbS5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pLmhlaWdodCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCJpbXBvcnQgeyBfZGVjb3JhdG9yLCBDb21wb25lbnQsIE5vZGUgfSBmcm9tICdjYyc7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IF9kZWNvcmF0b3I7XHJcblxyXG5AY2NjbGFzcygnTGlzdGVuV2ViQmVoYXZpb3InKVxyXG5leHBvcnQgY2xhc3MgTGlzdGVuV2ViQmVoYXZpb3IgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgLy8gTOG6r25nIG5naGUgc+G7sSBraeG7h24gd2Vic2l0ZSBsb2FkZWRcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd2Vic2l0ZUxvYWRlZCcsIChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBpc0ZpcnN0TG9hZCwgZnJvbUNhY2hlLCBsb2FkVGltZSwgdGltZXN0YW1wIH0gPSBldmVudC5kZXRhaWw7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXZWJzaXRlIGxvYWRlZDonLCB7XHJcbiAgICAgICAgICAgICAgICBpc0ZpcnN0TG9hZCxcclxuICAgICAgICAgICAgICAgIGZyb21DYWNoZSxcclxuICAgICAgICAgICAgICAgIGxvYWRUaW1lLFxyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gVGjhu7FjIGhp4buHbiBjw6FjIGjDoG5oIMSR4buZbmcgY+G6p24gdGhp4bq/dCBzYXUga2hpIHdlYnNpdGUgbG9hZCB4b25nXHJcbiAgICAgICAgICAgIHRoaXMub25XZWJzaXRlUmVhZHkoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTOG6r25nIG5naGUgc+G7sSBraeG7h24gdmlzaWJpbGl0eSBjaGFuZ2VkXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYnNpdGVWaXNpYmlsaXR5Q2hhbmdlZCcsIChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBpc1Zpc2libGUsIHRpbWVzdGFtcCB9ID0gZXZlbnQuZGV0YWlsO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnV2Vic2l0ZSB2aXNpYmlsaXR5IGNoYW5nZWQ6Jywge1xyXG4gICAgICAgICAgICAgICAgaXNWaXNpYmxlLFxyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gV2Vic2l0ZSB24burYSB0cuG7nyBuw6puIHZpc2libGVcclxuICAgICAgICAgICAgICAgIHRoaXMub25XZWJzaXRlVmlzaWJsZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gV2Vic2l0ZSB24burYSBi4buLIOG6qW5cclxuICAgICAgICAgICAgICAgIHRoaXMub25XZWJzaXRlSGlkZGVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uV2Vic2l0ZVJlYWR5KCkge1xyXG4gICAgICAgIC8vIFRo4buxYyBoaeG7h24gY8OhYyBow6BuaCDEkeG7mW5nIGtoaSB3ZWJzaXRlIMSRw6Mgc+G6tW4gc8OgbmdcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uV2Vic2l0ZVZpc2libGUoKSB7XHJcbiAgICAgICAgLy8gVGjhu7FjIGhp4buHbiBjw6FjIGjDoG5oIMSR4buZbmcga2hpIHdlYnNpdGUgdHLhu58gbsOqbiB2aXNpYmxlXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbldlYnNpdGVIaWRkZW4oKSB7XHJcbiAgICAgICAgLy8gVGjhu7FjIGhp4buHbiBjw6FjIGjDoG5oIMSR4buZbmcga2hpIHdlYnNpdGUgYuG7iyDhuqluXHJcbiAgICB9XHJcblxyXG4gICAgb25EZXN0cm95KCkge1xyXG4gICAgICAgIC8vIENsZWFudXBcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2Vic2l0ZUxvYWRlZCcsIG51bGwpO1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd3ZWJzaXRlVmlzaWJpbGl0eUNoYW5nZWQnLCBudWxsKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IF9kZWNvcmF0b3IsIENvbXBvbmVudCwgdmlldywgc2NyZWVuLCBzeXMgfSBmcm9tICdjYyc7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IF9kZWNvcmF0b3I7XHJcblxyXG5AY2NjbGFzcygnTWluU2NyZWVuU2l6ZScpXHJcbmV4cG9ydCBjbGFzcyBNaW5TY3JlZW5TaXplIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgTUlOX1dJRFRIID0gNDAwO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBNSU5fSEVJR0hUID0gMzAwO1xyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIC8vIENo4buJIMOhcCBk4bulbmcgY2hvIHdlYiBwbGF0Zm9ybVxyXG4gICAgICAgIGlmIChzeXMuaXNCcm93c2VyKSB7XHJcbiAgICAgICAgICAgIC8vIFNldCBpbml0aWFsIHNpemVcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFNpemUgPSB2aWV3LmdldEZyYW1lU2l6ZSgpO1xyXG4gICAgICAgICAgICB2aWV3LnNldEZyYW1lU2l6ZShcclxuICAgICAgICAgICAgICAgIE1hdGgubWF4KHRoaXMuTUlOX1dJRFRILCBjdXJyZW50U2l6ZS53aWR0aCksXHJcbiAgICAgICAgICAgICAgICBNYXRoLm1heCh0aGlzLk1JTl9IRUlHSFQsIGN1cnJlbnRTaXplLmhlaWdodClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIMSQxINuZyBrw70gc+G7sSBraeG7h24gcmVzaXplXHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gdmlldy5nZXRGcmFtZVNpemUoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1dpZHRoID0gTWF0aC5tYXgodGhpcy5NSU5fV0lEVEgsIHdpbmRvd1dpZHRoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0hlaWdodCA9IE1hdGgubWF4KHRoaXMuTUlOX0hFSUdIVCwgd2luZG93SGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHNpemUud2lkdGggIT09IG5ld1dpZHRoIHx8IHNpemUuaGVpZ2h0ICE9PSBuZXdIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2aWV3LnNldEZyYW1lU2l6ZShuZXdXaWR0aCwgbmV3SGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBD4bqtcCBuaOG6rXQgbOG6oWkgY2FudmFzIHNpemVcclxuICAgICAgICAgICAgICAgICAgICB2aWV3LnNldERlc2lnblJlc29sdXRpb25TaXplKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdXaWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmdldFJlc29sdXRpb25Qb2xpY3koKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBfZGVjb3JhdG9yLCBDb21wb25lbnQsIE5vZGUsIFVJVHJhbnNmb3JtLCBWZWMyLCBWZWMzIH0gZnJvbSBcImNjXCI7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHksIGV4ZWN1dGVJbkVkaXRNb2RlIH0gPSBfZGVjb3JhdG9yO1xyXG5cclxuQGNjY2xhc3MoJ01vdmVMYXlvdXRUb0NlbnRlcicpXHJcbkBleGVjdXRlSW5FZGl0TW9kZVxyXG5leHBvcnQgY2xhc3MgTW92ZUxheW91dFRvQ2VudGVyIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGF1dG9VcGRhdGU6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMubW92ZVRvUGFyZW50Q2VudGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKGRlbHRhVGltZTogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b1VwZGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVUb1BhcmVudENlbnRlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRQb2ludENlbnRlcigpIHtcclxuICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLm5vZGUucGFyZW50O1xyXG4gICAgICAgIGlmICghcGFyZW50KSByZXR1cm47XHJcbiAgICBcclxuICAgICAgICBjb25zdCBwYXJlbnRUcmFuc2Zvcm0gPSBwYXJlbnQuZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKTtcclxuICAgICAgICBjb25zdCBub2RlVHJhbnNmb3JtID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSk7XHJcbiAgICAgICAgaWYgKCFwYXJlbnRUcmFuc2Zvcm0gfHwgIW5vZGVUcmFuc2Zvcm0pIHJldHVybjtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IHBhcmVudENvbnRlbnRTaXplID0gcGFyZW50VHJhbnNmb3JtLmNvbnRlbnRTaXplO1xyXG4gICAgICAgIGNvbnN0IG5vZGVDb250ZW50U2l6ZSA9IG5vZGVUcmFuc2Zvcm0uY29udGVudFNpemU7XHJcbiAgICAgICAgY29uc3QgcGFyZW50QW5jaG9yID0gcGFyZW50VHJhbnNmb3JtLmFuY2hvclBvaW50O1xyXG4gICAgICAgIGNvbnN0IG5vZGVBbmNob3IgPSBub2RlVHJhbnNmb3JtLmFuY2hvclBvaW50O1xyXG4gICAgXHJcbiAgICAgICAgLy8gVMOtbmggdG/DoW4gduG7iyB0csOtIGNlbnRlciBj4bunYSBwYXJlbnQgdHJvbmcgaOG7hyB04buNYSDEkeG7mSBsb2NhbCBj4bunYSBwYXJlbnRcclxuICAgICAgICBjb25zdCBwYXJlbnRDZW50ZXJMb2NhbCA9IG5ldyBWZWMyKFxyXG4gICAgICAgICAgICBwYXJlbnRDb250ZW50U2l6ZS53aWR0aCAqICgwLjUgLSBwYXJlbnRBbmNob3IueCksXHJcbiAgICAgICAgICAgIHBhcmVudENvbnRlbnRTaXplLmhlaWdodCAqICgwLjUgLSBwYXJlbnRBbmNob3IueSlcclxuICAgICAgICApO1xyXG4gICAgXHJcbiAgICAgICAgLy8gVMOtbmggdG/DoW4gb2Zmc2V0IGPhuqduIHRoaeG6v3QgxJHhu4Mgbm9kZSBu4bqxbSBnaeG7r2EgcGFyZW50XHJcbiAgICAgICAgLy8gQ+G6p24gYsO5IMSR4bqvcCBjaG8gYW5jaG9yIHBvaW50IGPhu6dhIG5vZGVcclxuICAgICAgICBjb25zdCBvZmZzZXRYID0gbm9kZUNvbnRlbnRTaXplLndpZHRoICogKDAuNSAtIG5vZGVBbmNob3IueCk7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IG5vZGVDb250ZW50U2l6ZS5oZWlnaHQgKiAoMC41IC0gbm9kZUFuY2hvci55KTtcclxuICAgIFxyXG4gICAgICAgIC8vIFbhu4sgdHLDrSBj4bqnbiDEkeG6t3QgxJHhu4Mgbm9kZSBu4bqxbSBjaMOtbmggZ2nhu69hIHBhcmVudFxyXG4gICAgICAgIGNvbnN0IHBvaW50Q2VudGVyID0gbmV3IFZlYzIoXHJcbiAgICAgICAgICAgIHBhcmVudENlbnRlckxvY2FsLnggLSBvZmZzZXRYLFxyXG4gICAgICAgICAgICBwYXJlbnRDZW50ZXJMb2NhbC55IC0gb2Zmc2V0WVxyXG4gICAgICAgICk7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gcG9pbnRDZW50ZXI7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZVRvUGFyZW50Q2VudGVyKCkge1xyXG4gICAgICAgIGNvbnN0IGNlbnRlclBvaW50ID0gdGhpcy5nZXRQb2ludENlbnRlcigpO1xyXG4gICAgICAgIGlmIChjZW50ZXJQb2ludCkge1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuc2V0UG9zaXRpb24oY2VudGVyUG9pbnQueCwgY2VudGVyUG9pbnQueSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuIiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCBBbmltYXRpb24sIEFuaW1hdGlvbkNsaXAgfSBmcm9tICdjYyc7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IF9kZWNvcmF0b3I7XHJcblxyXG5AY2NjbGFzcygnT3BlblBhbmVsV2hlbkNsaWNrJylcclxuZXhwb3J0IGNsYXNzIE9wZW5QYW5lbFdoZW5DbGljayBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBbTm9kZV0sIHRvb2x0aXA6IFwiRGFuaCBzw6FjaCBub2RlIHPhur0gxJHGsOG7o2MgYWN0aXZlIGtoaSBjbGlja1wiIH0pXHJcbiAgICBub2Rlc1RvQWN0aXZlOiBOb2RlW10gPSBbXTtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBbTm9kZV0sIHRvb2x0aXA6IFwiRGFuaCBzw6FjaCBub2RlIHPhur0gxJHGsOG7o2MgZGlzYWJsZSBraGkgY2xpY2tcIiB9KVxyXG4gICAgbm9kZXNUb0Rpc2FibGU6IE5vZGVbXSA9IFtdO1xyXG5cclxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IFtOb2RlXSwgdG9vbHRpcDogXCJEYW5oIHPDoWNoIGFuaW1hdGlvbiBz4bq9IMSRxrDhu6NjIHBsYXkga2hpIGNsaWNrXCIgfSlcclxuICAgIG5vZGVzVG9BbmltYXRpb246IE5vZGVbXSA9IFtdO1xyXG5cclxuICAgIEBwcm9wZXJ0eSh7IHRvb2x0aXA6IFwixJDGsOG7nW5nIGThuqtuIMSR4bq/biB0cmFuZyB3ZWJcIiB9KVxyXG4gICAgdXJsOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICBpc0FuaW1hdGlvblBsYXlpbmcgPSBmYWxzZTtcclxuXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICB0aGlzLm5vZGUub24oTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIHRoaXMub25DbGljaywgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbGljaygpIHtcclxuICAgICAgICAvLyBLw61jaCBob+G6oXQgY8OhYyBub2RlIHRyb25nIG3huqNuZyBub2Rlc1RvQWN0aXZlXHJcbiAgICAgICAgdGhpcy5ub2Rlc1RvQWN0aXZlLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gVOG6r3QgY8OhYyBub2RlIHRyb25nIG3huqNuZyBub2Rlc1RvRGlzYWJsZVxyXG4gICAgICAgIHRoaXMubm9kZXNUb0Rpc2FibGUuZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgaWYgKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gUGxheSBjw6FjIGFuaW1hdGlvbiB0cm9uZyBt4bqjbmcgYW5pbWF0aW9uUGxheU9uQ2xpY2tcclxuICAgICAgICB0aGlzLm5vZGVzVG9BbmltYXRpb24uZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgaWYgKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFuaW0gPSBub2RlLmdldENvbXBvbmVudChBbmltYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFuaW0gJiYgIXRoaXMuaXNBbmltYXRpb25QbGF5aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGFuaW1hdGlvbiB0byBwbGF5IG9ubHkgb25jZVxyXG4gICAgICAgICAgICAgICAgICAgIGFuaW0ucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpb25QbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBN4bufIHRyYW5nIHdlYlxyXG4gICAgICAgIGlmICh0aGlzLnVybCAhPT0gJycpIHtcclxuICAgICAgICAgICAgd2luZG93Lm9wZW4odGhpcy51cmwsICdfYmxhbmsnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25EZXN0cm95KCkge1xyXG4gICAgICAgIC8vIENsZWFudXAgZXZlbnQgbGlzdGVuZXJcclxuICAgICAgICB0aGlzLm5vZGUub2ZmKE5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCB0aGlzLm9uQ2xpY2ssIHRoaXMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuIiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCBWaWRlb1BsYXllciB9IGZyb20gJ2NjJztcclxuY29uc3QgeyBjY2NsYXNzLCBwcm9wZXJ0eSB9ID0gX2RlY29yYXRvcjtcclxuXHJcbkBjY2NsYXNzKCdPbkNvdW50ZG93bicpXHJcbmV4cG9ydCBjbGFzcyBPbkNvdW50ZG93biBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBbTm9kZV0sIHRvb2x0aXA6IFwiRGFuaCBzw6FjaCBub2RlIHPhur0gxJHGsOG7o2MgYWN0aXZlIHNhdSB0aOG7nWkgZ2lhbiDEkeG7i25oIHPhurVuXCIgfSlcclxuICAgIG5vZGVBY3RpdmU6IE5vZGVbXSA9IFtdO1xyXG5cclxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IFtOb2RlXSwgdG9vbHRpcDogXCJEYW5oIHPDoWNoIG5vZGUgc+G6vSDEkcaw4bujYyBpbmFjdGl2ZSBzYXUgdGjhu51pIGdpYW4gxJHhu4tuaCBz4bq1blwiIH0pXHJcbiAgICBub2RlSW5hY3RpdmU6IE5vZGVbXSA9IFtdO1xyXG5cclxuICAgIEBwcm9wZXJ0eSh7IHRvb2x0aXA6IFwiVGjhu51pIGdpYW4gY2jhu50gdHLGsOG7m2Mga2hpIGNodXnhu4NuIChnacOieSlcIiB9KVxyXG4gICAgZGVsYXlUaW1lOiBudW1iZXIgPSA1O1xyXG5cclxuICAgIEBwcm9wZXJ0eSh7IHRvb2x0aXA6IFwixJDGsOG7nW5nIGThuqtuIHdlYnNpdGUgc+G6vSDEkcaw4bujYyBt4bufIHNhdSBraGkgaOG6v3QgdGjhu51pIGdpYW5cIiB9KVxyXG4gICAgdXJsOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICAvLyDEkOG6t3QgdGltZXIgxJHhu4MgdGjhu7FjIGhp4buHbiBjaHV54buDbiDEkeG7lWkgc2F1IGRlbGF5VGltZSBnacOieVxyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zd2l0Y2hOb2RlcygpO1xyXG4gICAgICAgIH0sIHRoaXMuZGVsYXlUaW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN3aXRjaE5vZGVzKCkge1xyXG4gICAgICAgIC8vIEvDrWNoIGhv4bqhdCBjw6FjIG5vZGUgdHJvbmcgbeG6o25nIG5vZGVBY3RpdmVcclxuICAgICAgICB0aGlzLm5vZGVBY3RpdmUuZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgaWYgKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBU4bqvdCBjw6FjIG5vZGUgdHJvbmcgbeG6o25nIG5vZGVJbmFjdGl2ZVxyXG4gICAgICAgIHRoaXMubm9kZUluYWN0aXZlLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIE3hu58gdHJhbmcgd2ViXHJcbiAgICAgICAgaWYgKHRoaXMudXJsICE9PSAnJykge1xyXG4gICAgICAgICAgICB3aW5kb3cub3Blbih0aGlzLnVybCwgJ19ibGFuaycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgLy8gSOG7p3kgdOG6pXQgY+G6oyBjw6FjIHRpbWVyIMSRYW5nIGNo4bqheVxyXG4gICAgICAgIHRoaXMudW5zY2hlZHVsZUFsbENhbGxiYWNrcygpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCBBbmltYXRpb24sIEFuaW1hdGlvbkNsaXAgfSBmcm9tICdjYyc7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IF9kZWNvcmF0b3I7XHJcblxyXG5AY2NjbGFzcygnT25DbGlja1RoaXMnKVxyXG5leHBvcnQgY2xhc3MgT25DbGlja1RoaXMgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgQHByb3BlcnR5KHsgdHlwZTogW05vZGVdLCB0b29sdGlwOiBcIkRhbmggc8OhY2ggbm9kZSBz4bq9IMSRxrDhu6NjIGFjdGl2ZSBraGkgY2xpY2tcIiB9KVxyXG4gICAgbm9kZXNUb0FjdGl2ZTogTm9kZVtdID0gW107XHJcblxyXG4gICAgQHByb3BlcnR5KHsgdHlwZTogW05vZGVdLCB0b29sdGlwOiBcIkRhbmggc8OhY2ggbm9kZSBz4bq9IMSRxrDhu6NjIGRpc2FibGUga2hpIGNsaWNrXCIgfSlcclxuICAgIG5vZGVzVG9EaXNhYmxlOiBOb2RlW10gPSBbXTtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBbTm9kZV0sIHRvb2x0aXA6IFwiRGFuaCBzw6FjaCBhbmltYXRpb24gc+G6vSDEkcaw4bujYyBwbGF5IGtoaSBjbGlja1wiIH0pXHJcbiAgICBub2Rlc1RvQW5pbWF0aW9uOiBOb2RlW10gPSBbXTtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0b29sdGlwOiBcIsSQxrDhu51uZyBk4bqrbiDEkeG6v24gdHJhbmcgd2ViXCIgfSlcclxuICAgIHVybDogc3RyaW5nID0gJyc7XHJcblxyXG4gICAgaXNBbmltYXRpb25QbGF5aW5nID0gZmFsc2U7XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9uKE5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCB0aGlzLm9uQ2xpY2ssIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xpY2soKSB7XHJcbiAgICAgICAgLy8gS8OtY2ggaG/huqF0IGPDoWMgbm9kZSB0cm9uZyBt4bqjbmcgbm9kZXNUb0FjdGl2ZVxyXG4gICAgICAgIHRoaXMubm9kZXNUb0FjdGl2ZS5mb3JFYWNoKG5vZGUgPT4ge1xyXG4gICAgICAgICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgbm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFThuq90IGPDoWMgbm9kZSB0cm9uZyBt4bqjbmcgbm9kZXNUb0Rpc2FibGVcclxuICAgICAgICB0aGlzLm5vZGVzVG9EaXNhYmxlLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFBsYXkgY8OhYyBhbmltYXRpb24gdHJvbmcgbeG6o25nIGFuaW1hdGlvblBsYXlPbkNsaWNrXHJcbiAgICAgICAgdGhpcy5ub2Rlc1RvQW5pbWF0aW9uLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbmltID0gbm9kZS5nZXRDb21wb25lbnQoQW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgICAgIGlmIChhbmltICYmICF0aGlzLmlzQW5pbWF0aW9uUGxheWluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCBhbmltYXRpb24gdG8gcGxheSBvbmx5IG9uY2VcclxuICAgICAgICAgICAgICAgICAgICBhbmltLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW9uUGxheWluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTeG7nyB0cmFuZyB3ZWJcclxuICAgICAgICBpZiAodGhpcy51cmwgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHRoaXMudXJsLCAnX2JsYW5rJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uRGVzdHJveSgpIHtcclxuICAgICAgICAvLyBDbGVhbnVwIGV2ZW50IGxpc3RlbmVyXHJcbiAgICAgICAgdGhpcy5ub2RlLm9mZihOb2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgdGhpcy5vbkNsaWNrLCB0aGlzKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsImltcG9ydCB7IF9kZWNvcmF0b3IsIENvbXBvbmVudCwgTm9kZSwgQW5pbWF0aW9uLCBBbmltYXRpb25DbGlwIH0gZnJvbSAnY2MnO1xyXG5jb25zdCB7IGNjY2xhc3MsIHByb3BlcnR5IH0gPSBfZGVjb3JhdG9yO1xyXG5cclxuQGNjY2xhc3MoJ0F1dG9QbGF5Q2xpcHMnKVxyXG5leHBvcnQgY2xhc3MgQXV0b1BsYXlDbGlwcyBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBAcHJvcGVydHkoQW5pbWF0aW9uKVxyXG4gICAgcHJpdmF0ZSBhbmltOiBBbmltYXRpb24gPSBudWxsO1xyXG5cclxuICAgIHByaXZhdGUgY3VycmVudENsaXBJbmRleDogbnVtYmVyID0gMDtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBOdW1iZXIsIHRvb2x0aXA6IFwiQ2xpcCBz4bq9IMSRxrDhu6NjIGzhuq1wIMSRaSBs4bqtcCBs4bqhaSBraGkgbeG6o25nIGjhur90XCIgfSlcclxuICAgIGNsaXBMb29wSW5kZXg6IG51bWJlciA9IDA7XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYW5pbSkge1xyXG4gICAgICAgICAgICB0aGlzLmFuaW0ub24oQW5pbWF0aW9uLkV2ZW50VHlwZS5GSU5JU0hFRCwgdGhpcy5vbkFuaW1hdGlvbkZpbmlzaGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5Q3VycmVudENsaXAoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwbGF5Q3VycmVudENsaXAoKSB7XHJcbiAgICAgICAgY29uc3QgY2xpcHMgPSB0aGlzLmFuaW0uY2xpcHM7XHJcbiAgICAgICAgaWYgKGNsaXBzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudENsaXBJbmRleCA+PSBjbGlwcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudENsaXBJbmRleCA9IHRoaXMuY2xpcExvb3BJbmRleDsgLy8gUXVheSBs4bqhaSBjbGlwIMSRxrDhu6NjIGNo4buJIMSR4buLbmhcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmFuaW0ucGxheShjbGlwc1t0aGlzLmN1cnJlbnRDbGlwSW5kZXhdLm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uQW5pbWF0aW9uRmluaXNoZWQoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50Q2xpcEluZGV4Kys7XHJcbiAgICAgICAgdGhpcy5wbGF5Q3VycmVudENsaXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYW5pbSkge1xyXG4gICAgICAgICAgICB0aGlzLmFuaW0ub2ZmKEFuaW1hdGlvbi5FdmVudFR5cGUuRklOSVNIRUQsIHRoaXMub25BbmltYXRpb25GaW5pc2hlZCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IF9kZWNvcmF0b3IsIENvbXBvbmVudCwgTm9kZSwgVUlUcmFuc2Zvcm0sIFZlYzIsIFZlYzMgfSBmcm9tICdjYyc7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHksIGV4ZWN1dGVJbkVkaXRNb2RlIH0gPSBfZGVjb3JhdG9yO1xyXG5cclxuLy8gVOG7sSDEkeG7mW5nIHNjYWxlIHRoZW8gxJHhu5FpIHTGsOG7o25nIGNoYSBzY2FsZSDhu58gxJHDonkgbMOgIMSR4buRaSBjaGnhur91IHRoZW8gVUkgVHJhbnNmb3JtXHJcbkBjY2NsYXNzKCdSYXRpb0F1dG9TY2FsZScpXHJcbkBleGVjdXRlSW5FZGl0TW9kZVxyXG5leHBvcnQgY2xhc3MgUmF0aW9BdXRvU2NhbGUgZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cclxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IFVJVHJhbnNmb3JtLCB0b29sdGlwOiBcIk5vZGUgY2hhXCIgfSlcclxuICAgIHBhcmVudFRyYW5zZm9ybTogVUlUcmFuc2Zvcm0gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBWZWMyLCB0b29sdGlwOiBcIkvDrWNoIHRoxrDhu5tjIGPhu6dhIG5vZGUgY2hhXCIgfSlcclxuICAgIHBhcmVudENvbnRlbnRTaXplOiBWZWMyID0gbmV3IFZlYzIoMCwgMCk7XHJcblxyXG4gICAgQHByb3BlcnR5KHsgdHlwZTogVmVjMiwgdG9vbHRpcDogXCJLw61jaCB0aMaw4bubYyBiYW4gxJHhuqd1IGPhu6dhIG5vZGUgY29uXCIgfSlcclxuICAgIGNvbnRlbnRTaXplOiBWZWMyID0gbmV3IFZlYzIoMCwgMCk7XHJcblxyXG4gICAgQHByb3BlcnR5KHsgdHlwZTogVmVjMiwgdG9vbHRpcDogXCJW4buLIHRyw60gYmFuIMSR4bqndSBj4bunYSBub2RlIGNvblwiIH0pXHJcbiAgICBwb3NpdGlvbjogVmVjMiA9IG5ldyBWZWMyKDAsIDApO1xyXG5cclxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIHRvb2x0aXA6IFwiVOG7sSDEkeG7mW5nIGPhuq1wIG5o4bqtdCB0cm9uZyBydW50aW1lXCIgfSlcclxuICAgIGF1dG9VcGRhdGU6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgIFxyXG4gICAgcmVzZXRJbkVkaXRvcigpIHtcclxuICAgICAgICB0aGlzLnBhcmVudFRyYW5zZm9ybSA9IHRoaXMubm9kZS5wYXJlbnQ/LmdldENvbXBvbmVudChVSVRyYW5zZm9ybSkgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLnBhcmVudENvbnRlbnRTaXplID0gbmV3IFZlYzIodGhpcy5wYXJlbnRUcmFuc2Zvcm0/LndpZHRoIHx8IDAsIHRoaXMucGFyZW50VHJhbnNmb3JtPy5oZWlnaHQgfHwgMCk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50U2l6ZSA9IG5ldyBWZWMyKHRoaXMubm9kZS5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pPy53aWR0aCB8fCAwLCB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKT8uaGVpZ2h0IHx8IDApO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMih0aGlzLm5vZGUucG9zaXRpb24ueCwgdGhpcy5ub2RlLnBvc2l0aW9uLnkpO1xyXG5cclxuICAgICAgICB0aGlzLmF1dG9VcGRhdGUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5hdXRvVXBkYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVUlUcmFuc2Zvcm0oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVVSVRyYW5zZm9ybSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMucGFyZW50VHJhbnNmb3JtKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IHJhdGlvU2NhbGVQYXJlbnRXaWR0aCA9IHRoaXMucGFyZW50VHJhbnNmb3JtLndpZHRoIC8gdGhpcy5wYXJlbnRDb250ZW50U2l6ZS54O1xyXG4gICAgICAgIGNvbnN0IHJhdGlvU2NhbGVQYXJlbnRIZWlnaHQgPSB0aGlzLnBhcmVudFRyYW5zZm9ybS5oZWlnaHQgLyB0aGlzLnBhcmVudENvbnRlbnRTaXplLnk7XHJcblxyXG4gICAgICAgIHRoaXMubm9kZS5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pPy5zZXRDb250ZW50U2l6ZSh0aGlzLmNvbnRlbnRTaXplLnggKiByYXRpb1NjYWxlUGFyZW50V2lkdGgsIHRoaXMuY29udGVudFNpemUueSAqIHJhdGlvU2NhbGVQYXJlbnRIZWlnaHQpO1xyXG4gICAgICAgIHRoaXMubm9kZS5wb3NpdGlvbiA9IG5ldyBWZWMzKHRoaXMucG9zaXRpb24ueCAqIHJhdGlvU2NhbGVQYXJlbnRXaWR0aCwgdGhpcy5wb3NpdGlvbi55ICogcmF0aW9TY2FsZVBhcmVudEhlaWdodCwgMCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCJleHBvcnQgeyBfQXN5bmNHZW5lcmF0b3IgYXMgQXN5bmNHZW5lcmF0b3IsIF9PdmVybG9hZFlpZWxkIGFzIE92ZXJsb2FkWWllbGQsIF9hcHBseURlY3MgYXMgYXBwbHlEZWNzLCBfYXBwbHlEZWNzMjIwMyBhcyBhcHBseURlY3MyMjAzLCBfYXBwbHlEZWNzMjIwM1IgYXMgYXBwbHlEZWNzMjIwM1IsIF9hcHBseURlY3MyMzAxIGFzIGFwcGx5RGVjczIzMDEsIF9hcHBseURlY3MyMzA1IGFzIGFwcGx5RGVjczIzMDUsIF9hc3luY0dlbmVyYXRvckRlbGVnYXRlIGFzIGFzeW5jR2VuZXJhdG9yRGVsZWdhdGUsIF9hc3luY0l0ZXJhdG9yIGFzIGFzeW5jSXRlcmF0b3IsIF9hd2FpdEFzeW5jR2VuZXJhdG9yIGFzIGF3YWl0QXN5bmNHZW5lcmF0b3IsIF9jaGVja0luUkhTIGFzIGNoZWNrSW5SSFMsIF9kZWZpbmVBY2Nlc3NvciBhcyBkZWZpbmVBY2Nlc3NvciwgX2Rpc3Bvc2UgYXMgZGlzcG9zZSwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0IGFzIGl0ZXJhYmxlVG9BcnJheUxpbWl0LCBfaXRlcmFibGVUb0FycmF5TGltaXRMb29zZSBhcyBpdGVyYWJsZVRvQXJyYXlMaW1pdExvb3NlLCBfanN4IGFzIGpzeCwgX29iamVjdFNwcmVhZDIgYXMgb2JqZWN0U3ByZWFkMiwgX3JlZ2VuZXJhdG9yUnVudGltZSBhcyByZWdlbmVyYXRvclJ1bnRpbWUsIF90eXBlb2YgYXMgdHlwZW9mLCBfdXNpbmcgYXMgdXNpbmcsIF93cmFwUmVnRXhwIGFzIHdyYXBSZWdFeHAsIF9Bd2FpdFZhbHVlIGFzIEF3YWl0VmFsdWUsIF93cmFwQXN5bmNHZW5lcmF0b3IgYXMgd3JhcEFzeW5jR2VuZXJhdG9yLCBfYXN5bmNUb0dlbmVyYXRvciBhcyBhc3luY1RvR2VuZXJhdG9yLCBfY2xhc3NDYWxsQ2hlY2sgYXMgY2xhc3NDYWxsQ2hlY2ssIF9jcmVhdGVDbGFzcyBhcyBjcmVhdGVDbGFzcywgX2RlZmluZUVudW1lcmFibGVQcm9wZXJ0aWVzIGFzIGRlZmluZUVudW1lcmFibGVQcm9wZXJ0aWVzLCBfZGVmYXVsdHMgYXMgZGVmYXVsdHMsIF9kZWZpbmVQcm9wZXJ0eSBhcyBkZWZpbmVQcm9wZXJ0eSwgX2V4dGVuZHMgYXMgZXh0ZW5kcywgX29iamVjdFNwcmVhZCBhcyBvYmplY3RTcHJlYWQsIF9pbmhlcml0cyBhcyBpbmhlcml0cywgX2luaGVyaXRzTG9vc2UgYXMgaW5oZXJpdHNMb29zZSwgX2dldFByb3RvdHlwZU9mIGFzIGdldFByb3RvdHlwZU9mLCBfc2V0UHJvdG90eXBlT2YgYXMgc2V0UHJvdG90eXBlT2YsIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgYXMgaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0LCBfY29uc3RydWN0IGFzIGNvbnN0cnVjdCwgX2lzTmF0aXZlRnVuY3Rpb24gYXMgaXNOYXRpdmVGdW5jdGlvbiwgX3dyYXBOYXRpdmVTdXBlciBhcyB3cmFwTmF0aXZlU3VwZXIsIF9pbnN0YW5jZW9mIGFzIGluc3RhbmNlb2YsIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgYXMgaW50ZXJvcFJlcXVpcmVEZWZhdWx0LCBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCBhcyBpbnRlcm9wUmVxdWlyZVdpbGRjYXJkLCBfbmV3QXJyb3dDaGVjayBhcyBuZXdBcnJvd0NoZWNrLCBfb2JqZWN0RGVzdHJ1Y3R1cmluZ0VtcHR5IGFzIG9iamVjdERlc3RydWN0dXJpbmdFbXB0eSwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgYXMgb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGFzIG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGFzIGFzc2VydFRoaXNJbml0aWFsaXplZCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gYXMgcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiwgX2NyZWF0ZVN1cGVyIGFzIGNyZWF0ZVN1cGVyLCBfc3VwZXJQcm9wQmFzZSBhcyBzdXBlclByb3BCYXNlLCBfZ2V0IGFzIGdldCwgX3NldCBhcyBzZXQsIF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwgYXMgdGFnZ2VkVGVtcGxhdGVMaXRlcmFsLCBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2UgYXMgdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2UsIF9yZWFkT25seUVycm9yIGFzIHJlYWRPbmx5RXJyb3IsIF93cml0ZU9ubHlFcnJvciBhcyB3cml0ZU9ubHlFcnJvciwgX2NsYXNzTmFtZVREWkVycm9yIGFzIGNsYXNzTmFtZVREWkVycm9yLCBfdGVtcG9yYWxVbmRlZmluZWQgYXMgdGVtcG9yYWxVbmRlZmluZWQsIF90ZHogYXMgdGR6LCBfdGVtcG9yYWxSZWYgYXMgdGVtcG9yYWxSZWYsIF9zbGljZWRUb0FycmF5IGFzIHNsaWNlZFRvQXJyYXksIF9zbGljZWRUb0FycmF5TG9vc2UgYXMgc2xpY2VkVG9BcnJheUxvb3NlLCBfdG9BcnJheSBhcyB0b0FycmF5LCBfdG9Db25zdW1hYmxlQXJyYXkgYXMgdG9Db25zdW1hYmxlQXJyYXksIF9hcnJheVdpdGhvdXRIb2xlcyBhcyBhcnJheVdpdGhvdXRIb2xlcywgX2FycmF5V2l0aEhvbGVzIGFzIGFycmF5V2l0aEhvbGVzLCBfbWF5YmVBcnJheUxpa2UgYXMgbWF5YmVBcnJheUxpa2UsIF9pdGVyYWJsZVRvQXJyYXkgYXMgaXRlcmFibGVUb0FycmF5LCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkgYXMgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXksIF9hcnJheUxpa2VUb0FycmF5IGFzIGFycmF5TGlrZVRvQXJyYXksIF9ub25JdGVyYWJsZVNwcmVhZCBhcyBub25JdGVyYWJsZVNwcmVhZCwgX25vbkl0ZXJhYmxlUmVzdCBhcyBub25JdGVyYWJsZVJlc3QsIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGFzIGNyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIsIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UgYXMgY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlLCBfc2tpcEZpcnN0R2VuZXJhdG9yTmV4dCBhcyBza2lwRmlyc3RHZW5lcmF0b3JOZXh0LCBfdG9QcmltaXRpdmUgYXMgdG9QcmltaXRpdmUsIF90b1Byb3BlcnR5S2V5IGFzIHRvUHJvcGVydHlLZXksIF9pbml0aWFsaXplcldhcm5pbmdIZWxwZXIgYXMgaW5pdGlhbGl6ZXJXYXJuaW5nSGVscGVyLCBfaW5pdGlhbGl6ZXJEZWZpbmVQcm9wZXJ0eSBhcyBpbml0aWFsaXplckRlZmluZVByb3BlcnR5LCBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yIGFzIGFwcGx5RGVjb3JhdGVkRGVzY3JpcHRvciwgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkgYXMgY2xhc3NQcml2YXRlRmllbGRMb29zZUtleSwgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlIGFzIGNsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlLCBfY2xhc3NQcml2YXRlRmllbGRHZXQgYXMgY2xhc3NQcml2YXRlRmllbGRHZXQsIF9jbGFzc1ByaXZhdGVGaWVsZFNldCBhcyBjbGFzc1ByaXZhdGVGaWVsZFNldCwgX2NsYXNzUHJpdmF0ZUZpZWxkRGVzdHJ1Y3R1cmVTZXQgYXMgY2xhc3NQcml2YXRlRmllbGREZXN0cnVjdHVyZVNldCwgX2NsYXNzRXh0cmFjdEZpZWxkRGVzY3JpcHRvciBhcyBjbGFzc0V4dHJhY3RGaWVsZERlc2NyaXB0b3IsIF9jbGFzc1N0YXRpY1ByaXZhdGVGaWVsZFNwZWNHZXQgYXMgY2xhc3NTdGF0aWNQcml2YXRlRmllbGRTcGVjR2V0LCBfY2xhc3NTdGF0aWNQcml2YXRlRmllbGRTcGVjU2V0IGFzIGNsYXNzU3RhdGljUHJpdmF0ZUZpZWxkU3BlY1NldCwgX2NsYXNzU3RhdGljUHJpdmF0ZU1ldGhvZEdldCBhcyBjbGFzc1N0YXRpY1ByaXZhdGVNZXRob2RHZXQsIF9jbGFzc1N0YXRpY1ByaXZhdGVNZXRob2RTZXQgYXMgY2xhc3NTdGF0aWNQcml2YXRlTWV0aG9kU2V0LCBfY2xhc3NBcHBseURlc2NyaXB0b3JHZXQgYXMgY2xhc3NBcHBseURlc2NyaXB0b3JHZXQsIF9jbGFzc0FwcGx5RGVzY3JpcHRvclNldCBhcyBjbGFzc0FwcGx5RGVzY3JpcHRvclNldCwgX2NsYXNzQXBwbHlEZXNjcmlwdG9yRGVzdHJ1Y3R1cmVTZXQgYXMgY2xhc3NBcHBseURlc2NyaXB0b3JEZXN0cnVjdHVyZVNldCwgX2NsYXNzU3RhdGljUHJpdmF0ZUZpZWxkRGVzdHJ1Y3R1cmVTZXQgYXMgY2xhc3NTdGF0aWNQcml2YXRlRmllbGREZXN0cnVjdHVyZVNldCwgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzIGFzIGNsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzLCBfY2xhc3NDaGVja1ByaXZhdGVTdGF0aWNGaWVsZERlc2NyaXB0b3IgYXMgY2xhc3NDaGVja1ByaXZhdGVTdGF0aWNGaWVsZERlc2NyaXB0b3IsIF9kZWNvcmF0ZSBhcyBkZWNvcmF0ZSwgX2NsYXNzUHJpdmF0ZU1ldGhvZEdldCBhcyBjbGFzc1ByaXZhdGVNZXRob2RHZXQsIF9jaGVja1ByaXZhdGVSZWRlY2xhcmF0aW9uIGFzIGNoZWNrUHJpdmF0ZVJlZGVjbGFyYXRpb24sIF9jbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjIGFzIGNsYXNzUHJpdmF0ZUZpZWxkSW5pdFNwZWMsIF9jbGFzc1ByaXZhdGVNZXRob2RJbml0U3BlYyBhcyBjbGFzc1ByaXZhdGVNZXRob2RJbml0U3BlYywgX2NsYXNzUHJpdmF0ZU1ldGhvZFNldCBhcyBjbGFzc1ByaXZhdGVNZXRob2RTZXQsIF9pZGVudGl0eSBhcyBpZGVudGl0eSB9O1xuZnVuY3Rpb24gX0FzeW5jR2VuZXJhdG9yKGUpIHtcbiAgdmFyIHIsIHQ7XG4gIGZ1bmN0aW9uIHJlc3VtZShyLCB0KSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBuID0gZVtyXSh0KSxcbiAgICAgICAgbyA9IG4udmFsdWUsXG4gICAgICAgIHUgPSBvIGluc3RhbmNlb2YgX092ZXJsb2FkWWllbGQ7XG4gICAgICBQcm9taXNlLnJlc29sdmUodSA/IG8udiA6IG8pLnRoZW4oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgaWYgKHUpIHtcbiAgICAgICAgICB2YXIgaSA9IFwicmV0dXJuXCIgPT09IHIgPyBcInJldHVyblwiIDogXCJuZXh0XCI7XG4gICAgICAgICAgaWYgKCFvLmsgfHwgdC5kb25lKSByZXR1cm4gcmVzdW1lKGksIHQpO1xuICAgICAgICAgIHQgPSBlW2ldKHQpLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHNldHRsZShuLmRvbmUgPyBcInJldHVyblwiIDogXCJub3JtYWxcIiwgdCk7XG4gICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXN1bWUoXCJ0aHJvd1wiLCBlKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHNldHRsZShcInRocm93XCIsIGUpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBzZXR0bGUoZSwgbikge1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgY2FzZSBcInJldHVyblwiOlxuICAgICAgICByLnJlc29sdmUoe1xuICAgICAgICAgIHZhbHVlOiBuLFxuICAgICAgICAgIGRvbmU6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJ0aHJvd1wiOlxuICAgICAgICByLnJlamVjdChuKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByLnJlc29sdmUoe1xuICAgICAgICAgIHZhbHVlOiBuLFxuICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAociA9IHIubmV4dCkgPyByZXN1bWUoci5rZXksIHIuYXJnKSA6IHQgPSBudWxsO1xuICB9XG4gIHRoaXMuX2ludm9rZSA9IGZ1bmN0aW9uIChlLCBuKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChvLCB1KSB7XG4gICAgICB2YXIgaSA9IHtcbiAgICAgICAga2V5OiBlLFxuICAgICAgICBhcmc6IG4sXG4gICAgICAgIHJlc29sdmU6IG8sXG4gICAgICAgIHJlamVjdDogdSxcbiAgICAgICAgbmV4dDogbnVsbFxuICAgICAgfTtcbiAgICAgIHQgPyB0ID0gdC5uZXh0ID0gaSA6IChyID0gdCA9IGksIHJlc3VtZShlLCBuKSk7XG4gICAgfSk7XG4gIH0sIFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgZS5yZXR1cm4gJiYgKHRoaXMucmV0dXJuID0gdm9pZCAwKTtcbn1cbl9Bc3luY0dlbmVyYXRvci5wcm90b3R5cGVbXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIl0gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzO1xufSwgX0FzeW5jR2VuZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKGUpIHtcbiAgcmV0dXJuIHRoaXMuX2ludm9rZShcIm5leHRcIiwgZSk7XG59LCBfQXN5bmNHZW5lcmF0b3IucHJvdG90eXBlLnRocm93ID0gZnVuY3Rpb24gKGUpIHtcbiAgcmV0dXJuIHRoaXMuX2ludm9rZShcInRocm93XCIsIGUpO1xufSwgX0FzeW5jR2VuZXJhdG9yLnByb3RvdHlwZS5yZXR1cm4gPSBmdW5jdGlvbiAoZSkge1xuICByZXR1cm4gdGhpcy5faW52b2tlKFwicmV0dXJuXCIsIGUpO1xufTtcbmZ1bmN0aW9uIF9PdmVybG9hZFlpZWxkKHQsIGUpIHtcbiAgdGhpcy52ID0gdCwgdGhpcy5rID0gZTtcbn1cbmZ1bmN0aW9uIG9sZF9jcmVhdGVNZXRhZGF0YU1ldGhvZHNGb3JQcm9wZXJ0eShlLCB0LCBhLCByKSB7XG4gIHJldHVybiB7XG4gICAgZ2V0TWV0YWRhdGE6IGZ1bmN0aW9uIChvKSB7XG4gICAgICBvbGRfYXNzZXJ0Tm90RmluaXNoZWQociwgXCJnZXRNZXRhZGF0YVwiKSwgb2xkX2Fzc2VydE1ldGFkYXRhS2V5KG8pO1xuICAgICAgdmFyIGkgPSBlW29dO1xuICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgaWYgKDEgPT09IHQpIHtcbiAgICAgICAgdmFyIG4gPSBpLnB1YmxpYztcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgcmV0dXJuIG5bYV07XG4gICAgICB9IGVsc2UgaWYgKDIgPT09IHQpIHtcbiAgICAgICAgdmFyIGwgPSBpLnByaXZhdGU7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IGwpIHJldHVybiBsLmdldChhKTtcbiAgICAgIH0gZWxzZSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoaSwgXCJjb25zdHJ1Y3RvclwiKSkgcmV0dXJuIGkuY29uc3RydWN0b3I7XG4gICAgfSxcbiAgICBzZXRNZXRhZGF0YTogZnVuY3Rpb24gKG8sIGkpIHtcbiAgICAgIG9sZF9hc3NlcnROb3RGaW5pc2hlZChyLCBcInNldE1ldGFkYXRhXCIpLCBvbGRfYXNzZXJ0TWV0YWRhdGFLZXkobyk7XG4gICAgICB2YXIgbiA9IGVbb107XG4gICAgICBpZiAodm9pZCAwID09PSBuICYmIChuID0gZVtvXSA9IHt9KSwgMSA9PT0gdCkge1xuICAgICAgICB2YXIgbCA9IG4ucHVibGljO1xuICAgICAgICB2b2lkIDAgPT09IGwgJiYgKGwgPSBuLnB1YmxpYyA9IHt9KSwgbFthXSA9IGk7XG4gICAgICB9IGVsc2UgaWYgKDIgPT09IHQpIHtcbiAgICAgICAgdmFyIHMgPSBuLnByaXY7XG4gICAgICAgIHZvaWQgMCA9PT0gcyAmJiAocyA9IG4ucHJpdmF0ZSA9IG5ldyBNYXAoKSksIHMuc2V0KGEsIGkpO1xuICAgICAgfSBlbHNlIG4uY29uc3RydWN0b3IgPSBpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIG9sZF9jb252ZXJ0TWV0YWRhdGFNYXBUb0ZpbmFsKGUsIHQpIHtcbiAgdmFyIGEgPSBlW1N5bWJvbC5tZXRhZGF0YSB8fCBTeW1ib2wuZm9yKFwiU3ltYm9sLm1ldGFkYXRhXCIpXSxcbiAgICByID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KTtcbiAgaWYgKDAgIT09IHIubGVuZ3RoKSB7XG4gICAgZm9yICh2YXIgbyA9IDA7IG8gPCByLmxlbmd0aDsgbysrKSB7XG4gICAgICB2YXIgaSA9IHJbb10sXG4gICAgICAgIG4gPSB0W2ldLFxuICAgICAgICBsID0gYSA/IGFbaV0gOiBudWxsLFxuICAgICAgICBzID0gbi5wdWJsaWMsXG4gICAgICAgIGMgPSBsID8gbC5wdWJsaWMgOiBudWxsO1xuICAgICAgcyAmJiBjICYmIE9iamVjdC5zZXRQcm90b3R5cGVPZihzLCBjKTtcbiAgICAgIHZhciBkID0gbi5wcml2YXRlO1xuICAgICAgaWYgKGQpIHtcbiAgICAgICAgdmFyIHUgPSBBcnJheS5mcm9tKGQudmFsdWVzKCkpLFxuICAgICAgICAgIGYgPSBsID8gbC5wcml2YXRlIDogbnVsbDtcbiAgICAgICAgZiAmJiAodSA9IHUuY29uY2F0KGYpKSwgbi5wcml2YXRlID0gdTtcbiAgICAgIH1cbiAgICAgIGwgJiYgT2JqZWN0LnNldFByb3RvdHlwZU9mKG4sIGwpO1xuICAgIH1cbiAgICBhICYmIE9iamVjdC5zZXRQcm90b3R5cGVPZih0LCBhKSwgZVtTeW1ib2wubWV0YWRhdGEgfHwgU3ltYm9sLmZvcihcIlN5bWJvbC5tZXRhZGF0YVwiKV0gPSB0O1xuICB9XG59XG5mdW5jdGlvbiBvbGRfY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QoZSwgdCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICBvbGRfYXNzZXJ0Tm90RmluaXNoZWQodCwgXCJhZGRJbml0aWFsaXplclwiKSwgb2xkX2Fzc2VydENhbGxhYmxlKGEsIFwiQW4gaW5pdGlhbGl6ZXJcIiksIGUucHVzaChhKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIG9sZF9tZW1iZXJEZWMoZSwgdCwgYSwgciwgbywgaSwgbiwgbCwgcykge1xuICB2YXIgYztcbiAgc3dpdGNoIChpKSB7XG4gICAgY2FzZSAxOlxuICAgICAgYyA9IFwiYWNjZXNzb3JcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIGMgPSBcIm1ldGhvZFwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgYyA9IFwiZ2V0dGVyXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ6XG4gICAgICBjID0gXCJzZXR0ZXJcIjtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBjID0gXCJmaWVsZFwiO1xuICB9XG4gIHZhciBkLFxuICAgIHUsXG4gICAgZiA9IHtcbiAgICAgIGtpbmQ6IGMsXG4gICAgICBuYW1lOiBsID8gXCIjXCIgKyB0IDogdCxcbiAgICAgIGlzU3RhdGljOiBuLFxuICAgICAgaXNQcml2YXRlOiBsXG4gICAgfSxcbiAgICBwID0ge1xuICAgICAgdjogITFcbiAgICB9O1xuICBpZiAoMCAhPT0gaSAmJiAoZi5hZGRJbml0aWFsaXplciA9IG9sZF9jcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChvLCBwKSksIGwpIHtcbiAgICBkID0gMiwgdSA9IFN5bWJvbCh0KTtcbiAgICB2YXIgdiA9IHt9O1xuICAgIDAgPT09IGkgPyAodi5nZXQgPSBhLmdldCwgdi5zZXQgPSBhLnNldCkgOiAyID09PSBpID8gdi5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYS52YWx1ZTtcbiAgICB9IDogKDEgIT09IGkgJiYgMyAhPT0gaSB8fCAodi5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYS5nZXQuY2FsbCh0aGlzKTtcbiAgICB9KSwgMSAhPT0gaSAmJiA0ICE9PSBpIHx8ICh2LnNldCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBhLnNldC5jYWxsKHRoaXMsIGUpO1xuICAgIH0pKSwgZi5hY2Nlc3MgPSB2O1xuICB9IGVsc2UgZCA9IDEsIHUgPSB0O1xuICB0cnkge1xuICAgIHJldHVybiBlKHMsIE9iamVjdC5hc3NpZ24oZiwgb2xkX2NyZWF0ZU1ldGFkYXRhTWV0aG9kc0ZvclByb3BlcnR5KHIsIGQsIHUsIHApKSk7XG4gIH0gZmluYWxseSB7XG4gICAgcC52ID0gITA7XG4gIH1cbn1cbmZ1bmN0aW9uIG9sZF9hc3NlcnROb3RGaW5pc2hlZChlLCB0KSB7XG4gIGlmIChlLnYpIHRocm93IG5ldyBFcnJvcihcImF0dGVtcHRlZCB0byBjYWxsIFwiICsgdCArIFwiIGFmdGVyIGRlY29yYXRpb24gd2FzIGZpbmlzaGVkXCIpO1xufVxuZnVuY3Rpb24gb2xkX2Fzc2VydE1ldGFkYXRhS2V5KGUpIHtcbiAgaWYgKFwic3ltYm9sXCIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNZXRhZGF0YSBrZXlzIG11c3QgYmUgc3ltYm9scywgcmVjZWl2ZWQ6IFwiICsgZSk7XG59XG5mdW5jdGlvbiBvbGRfYXNzZXJ0Q2FsbGFibGUoZSwgdCkge1xuICBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKHQgKyBcIiBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XG59XG5mdW5jdGlvbiBvbGRfYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShlLCB0KSB7XG4gIHZhciBhID0gdHlwZW9mIHQ7XG4gIGlmICgxID09PSBlKSB7XG4gICAgaWYgKFwib2JqZWN0XCIgIT09IGEgfHwgbnVsbCA9PT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcImFjY2Vzc29yIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHdpdGggZ2V0LCBzZXQsIG9yIGluaXQgcHJvcGVydGllcyBvciB2b2lkIDBcIik7XG4gICAgdm9pZCAwICE9PSB0LmdldCAmJiBvbGRfYXNzZXJ0Q2FsbGFibGUodC5nZXQsIFwiYWNjZXNzb3IuZ2V0XCIpLCB2b2lkIDAgIT09IHQuc2V0ICYmIG9sZF9hc3NlcnRDYWxsYWJsZSh0LnNldCwgXCJhY2Nlc3Nvci5zZXRcIiksIHZvaWQgMCAhPT0gdC5pbml0ICYmIG9sZF9hc3NlcnRDYWxsYWJsZSh0LmluaXQsIFwiYWNjZXNzb3IuaW5pdFwiKSwgdm9pZCAwICE9PSB0LmluaXRpYWxpemVyICYmIG9sZF9hc3NlcnRDYWxsYWJsZSh0LmluaXRpYWxpemVyLCBcImFjY2Vzc29yLmluaXRpYWxpemVyXCIpO1xuICB9IGVsc2UgaWYgKFwiZnVuY3Rpb25cIiAhPT0gYSkge1xuICAgIHZhciByO1xuICAgIHRocm93IHIgPSAwID09PSBlID8gXCJmaWVsZFwiIDogMTAgPT09IGUgPyBcImNsYXNzXCIgOiBcIm1ldGhvZFwiLCBuZXcgVHlwZUVycm9yKHIgKyBcIiBkZWNvcmF0b3JzIG11c3QgcmV0dXJuIGEgZnVuY3Rpb24gb3Igdm9pZCAwXCIpO1xuICB9XG59XG5mdW5jdGlvbiBvbGRfZ2V0SW5pdChlKSB7XG4gIHZhciB0O1xuICByZXR1cm4gbnVsbCA9PSAodCA9IGUuaW5pdCkgJiYgKHQgPSBlLmluaXRpYWxpemVyKSAmJiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBjb25zb2xlICYmIGNvbnNvbGUud2FybihcIi5pbml0aWFsaXplciBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbml0IGFzIG9mIE1hcmNoIDIwMjJcIiksIHQ7XG59XG5mdW5jdGlvbiBvbGRfYXBwbHlNZW1iZXJEZWMoZSwgdCwgYSwgciwgbywgaSwgbiwgbCwgcykge1xuICB2YXIgYyxcbiAgICBkLFxuICAgIHUsXG4gICAgZixcbiAgICBwLFxuICAgIHYsXG4gICAgaCA9IGFbMF07XG4gIGlmIChuID8gYyA9IDAgPT09IG8gfHwgMSA9PT0gbyA/IHtcbiAgICBnZXQ6IGFbM10sXG4gICAgc2V0OiBhWzRdXG4gIH0gOiAzID09PSBvID8ge1xuICAgIGdldDogYVszXVxuICB9IDogNCA9PT0gbyA/IHtcbiAgICBzZXQ6IGFbM11cbiAgfSA6IHtcbiAgICB2YWx1ZTogYVszXVxuICB9IDogMCAhPT0gbyAmJiAoYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpLCAxID09PSBvID8gdSA9IHtcbiAgICBnZXQ6IGMuZ2V0LFxuICAgIHNldDogYy5zZXRcbiAgfSA6IDIgPT09IG8gPyB1ID0gYy52YWx1ZSA6IDMgPT09IG8gPyB1ID0gYy5nZXQgOiA0ID09PSBvICYmICh1ID0gYy5zZXQpLCBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGgpIHZvaWQgMCAhPT0gKGYgPSBvbGRfbWVtYmVyRGVjKGgsIHIsIGMsIGwsIHMsIG8sIGksIG4sIHUpKSAmJiAob2xkX2Fzc2VydFZhbGlkUmV0dXJuVmFsdWUobywgZiksIDAgPT09IG8gPyBkID0gZiA6IDEgPT09IG8gPyAoZCA9IG9sZF9nZXRJbml0KGYpLCBwID0gZi5nZXQgfHwgdS5nZXQsIHYgPSBmLnNldCB8fCB1LnNldCwgdSA9IHtcbiAgICBnZXQ6IHAsXG4gICAgc2V0OiB2XG4gIH0pIDogdSA9IGYpO2Vsc2UgZm9yICh2YXIgeSA9IGgubGVuZ3RoIC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICB2YXIgYjtcbiAgICBpZiAodm9pZCAwICE9PSAoZiA9IG9sZF9tZW1iZXJEZWMoaFt5XSwgciwgYywgbCwgcywgbywgaSwgbiwgdSkpKSBvbGRfYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShvLCBmKSwgMCA9PT0gbyA/IGIgPSBmIDogMSA9PT0gbyA/IChiID0gb2xkX2dldEluaXQoZiksIHAgPSBmLmdldCB8fCB1LmdldCwgdiA9IGYuc2V0IHx8IHUuc2V0LCB1ID0ge1xuICAgICAgZ2V0OiBwLFxuICAgICAgc2V0OiB2XG4gICAgfSkgOiB1ID0gZiwgdm9pZCAwICE9PSBiICYmICh2b2lkIDAgPT09IGQgPyBkID0gYiA6IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZCA/IGQgPSBbZCwgYl0gOiBkLnB1c2goYikpO1xuICB9XG4gIGlmICgwID09PSBvIHx8IDEgPT09IG8pIHtcbiAgICBpZiAodm9pZCAwID09PSBkKSBkID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHJldHVybiB0O1xuICAgIH07ZWxzZSBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBkKSB7XG4gICAgICB2YXIgZyA9IGQ7XG4gICAgICBkID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgZm9yICh2YXIgYSA9IHQsIHIgPSAwOyByIDwgZy5sZW5ndGg7IHIrKykgYSA9IGdbcl0uY2FsbChlLCBhKTtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbSA9IGQ7XG4gICAgICBkID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG0uY2FsbChlLCB0KTtcbiAgICAgIH07XG4gICAgfVxuICAgIGUucHVzaChkKTtcbiAgfVxuICAwICE9PSBvICYmICgxID09PSBvID8gKGMuZ2V0ID0gdS5nZXQsIGMuc2V0ID0gdS5zZXQpIDogMiA9PT0gbyA/IGMudmFsdWUgPSB1IDogMyA9PT0gbyA/IGMuZ2V0ID0gdSA6IDQgPT09IG8gJiYgKGMuc2V0ID0gdSksIG4gPyAxID09PSBvID8gKGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgIHJldHVybiB1LmdldC5jYWxsKGUsIHQpO1xuICB9KSwgZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgcmV0dXJuIHUuc2V0LmNhbGwoZSwgdCk7XG4gIH0pKSA6IDIgPT09IG8gPyBlLnB1c2godSkgOiBlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICByZXR1cm4gdS5jYWxsKGUsIHQpO1xuICB9KSA6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCByLCBjKSk7XG59XG5mdW5jdGlvbiBvbGRfYXBwbHlNZW1iZXJEZWNzKGUsIHQsIGEsIHIsIG8pIHtcbiAgZm9yICh2YXIgaSwgbiwgbCA9IG5ldyBNYXAoKSwgcyA9IG5ldyBNYXAoKSwgYyA9IDA7IGMgPCBvLmxlbmd0aDsgYysrKSB7XG4gICAgdmFyIGQgPSBvW2NdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGQpKSB7XG4gICAgICB2YXIgdSxcbiAgICAgICAgZixcbiAgICAgICAgcCxcbiAgICAgICAgdiA9IGRbMV0sXG4gICAgICAgIGggPSBkWzJdLFxuICAgICAgICB5ID0gZC5sZW5ndGggPiAzLFxuICAgICAgICBiID0gdiA+PSA1O1xuICAgICAgaWYgKGIgPyAodSA9IHQsIGYgPSByLCAwICE9PSAodiAtPSA1KSAmJiAocCA9IG4gPSBuIHx8IFtdKSkgOiAodSA9IHQucHJvdG90eXBlLCBmID0gYSwgMCAhPT0gdiAmJiAocCA9IGkgPSBpIHx8IFtdKSksIDAgIT09IHYgJiYgIXkpIHtcbiAgICAgICAgdmFyIGcgPSBiID8gcyA6IGwsXG4gICAgICAgICAgbSA9IGcuZ2V0KGgpIHx8IDA7XG4gICAgICAgIGlmICghMCA9PT0gbSB8fCAzID09PSBtICYmIDQgIT09IHYgfHwgNCA9PT0gbSAmJiAzICE9PSB2KSB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gZGVjb3JhdGUgYSBwdWJsaWMgbWV0aG9kL2FjY2Vzc29yIHRoYXQgaGFzIHRoZSBzYW1lIG5hbWUgYXMgYSBwcmV2aW91c2x5IGRlY29yYXRlZCBwdWJsaWMgbWV0aG9kL2FjY2Vzc29yLiBUaGlzIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IHRoZSBkZWNvcmF0b3JzIHBsdWdpbi4gUHJvcGVydHkgbmFtZSB3YXM6IFwiICsgaCk7XG4gICAgICAgICFtICYmIHYgPiAyID8gZy5zZXQoaCwgdikgOiBnLnNldChoLCAhMCk7XG4gICAgICB9XG4gICAgICBvbGRfYXBwbHlNZW1iZXJEZWMoZSwgdSwgZCwgaCwgdiwgYiwgeSwgZiwgcCk7XG4gICAgfVxuICB9XG4gIG9sZF9wdXNoSW5pdGlhbGl6ZXJzKGUsIGkpLCBvbGRfcHVzaEluaXRpYWxpemVycyhlLCBuKTtcbn1cbmZ1bmN0aW9uIG9sZF9wdXNoSW5pdGlhbGl6ZXJzKGUsIHQpIHtcbiAgdCAmJiBlLnB1c2goZnVuY3Rpb24gKGUpIHtcbiAgICBmb3IgKHZhciBhID0gMDsgYSA8IHQubGVuZ3RoOyBhKyspIHRbYV0uY2FsbChlKTtcbiAgICByZXR1cm4gZTtcbiAgfSk7XG59XG5mdW5jdGlvbiBvbGRfYXBwbHlDbGFzc0RlY3MoZSwgdCwgYSwgcikge1xuICBpZiAoci5sZW5ndGggPiAwKSB7XG4gICAgZm9yICh2YXIgbyA9IFtdLCBpID0gdCwgbiA9IHQubmFtZSwgbCA9IHIubGVuZ3RoIC0gMTsgbCA+PSAwOyBsLS0pIHtcbiAgICAgIHZhciBzID0ge1xuICAgICAgICB2OiAhMVxuICAgICAgfTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBjID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBraW5kOiBcImNsYXNzXCIsXG4gICAgICAgICAgICBuYW1lOiBuLFxuICAgICAgICAgICAgYWRkSW5pdGlhbGl6ZXI6IG9sZF9jcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChvLCBzKVxuICAgICAgICAgIH0sIG9sZF9jcmVhdGVNZXRhZGF0YU1ldGhvZHNGb3JQcm9wZXJ0eShhLCAwLCBuLCBzKSksXG4gICAgICAgICAgZCA9IHJbbF0oaSwgYyk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzLnYgPSAhMDtcbiAgICAgIH1cbiAgICAgIHZvaWQgMCAhPT0gZCAmJiAob2xkX2Fzc2VydFZhbGlkUmV0dXJuVmFsdWUoMTAsIGQpLCBpID0gZCk7XG4gICAgfVxuICAgIGUucHVzaChpLCBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBlID0gMDsgZSA8IG8ubGVuZ3RoOyBlKyspIG9bZV0uY2FsbChpKTtcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gX2FwcGx5RGVjcyhlLCB0LCBhKSB7XG4gIHZhciByID0gW10sXG4gICAgbyA9IHt9LFxuICAgIGkgPSB7fTtcbiAgcmV0dXJuIG9sZF9hcHBseU1lbWJlckRlY3MociwgZSwgaSwgbywgdCksIG9sZF9jb252ZXJ0TWV0YWRhdGFNYXBUb0ZpbmFsKGUucHJvdG90eXBlLCBpKSwgb2xkX2FwcGx5Q2xhc3NEZWNzKHIsIGUsIG8sIGEpLCBvbGRfY29udmVydE1ldGFkYXRhTWFwVG9GaW5hbChlLCBvKSwgcjtcbn1cbmZ1bmN0aW9uIGFwcGx5RGVjczIyMDNGYWN0b3J5KCkge1xuICBmdW5jdGlvbiBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChlLCB0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAhZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgaWYgKGUudikgdGhyb3cgbmV3IEVycm9yKFwiYXR0ZW1wdGVkIHRvIGNhbGwgXCIgKyB0ICsgXCIgYWZ0ZXIgZGVjb3JhdGlvbiB3YXMgZmluaXNoZWRcIik7XG4gICAgICB9KHQsIFwiYWRkSW5pdGlhbGl6ZXJcIiksIGFzc2VydENhbGxhYmxlKHIsIFwiQW4gaW5pdGlhbGl6ZXJcIiksIGUucHVzaChyKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIG1lbWJlckRlYyhlLCB0LCByLCBhLCBuLCBpLCBzLCBvKSB7XG4gICAgdmFyIGM7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGMgPSBcImFjY2Vzc29yXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBjID0gXCJtZXRob2RcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIGMgPSBcImdldHRlclwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgYyA9IFwic2V0dGVyXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYyA9IFwiZmllbGRcIjtcbiAgICB9XG4gICAgdmFyIGwsXG4gICAgICB1LFxuICAgICAgZiA9IHtcbiAgICAgICAga2luZDogYyxcbiAgICAgICAgbmFtZTogcyA/IFwiI1wiICsgdCA6IHQsXG4gICAgICAgIHN0YXRpYzogaSxcbiAgICAgICAgcHJpdmF0ZTogc1xuICAgICAgfSxcbiAgICAgIHAgPSB7XG4gICAgICAgIHY6ICExXG4gICAgICB9O1xuICAgIDAgIT09IG4gJiYgKGYuYWRkSW5pdGlhbGl6ZXIgPSBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChhLCBwKSksIDAgPT09IG4gPyBzID8gKGwgPSByLmdldCwgdSA9IHIuc2V0KSA6IChsID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXNbdF07XG4gICAgfSwgdSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzW3RdID0gZTtcbiAgICB9KSA6IDIgPT09IG4gPyBsID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHIudmFsdWU7XG4gICAgfSA6ICgxICE9PSBuICYmIDMgIT09IG4gfHwgKGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gci5nZXQuY2FsbCh0aGlzKTtcbiAgICB9KSwgMSAhPT0gbiAmJiA0ICE9PSBuIHx8ICh1ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHIuc2V0LmNhbGwodGhpcywgZSk7XG4gICAgfSkpLCBmLmFjY2VzcyA9IGwgJiYgdSA/IHtcbiAgICAgIGdldDogbCxcbiAgICAgIHNldDogdVxuICAgIH0gOiBsID8ge1xuICAgICAgZ2V0OiBsXG4gICAgfSA6IHtcbiAgICAgIHNldDogdVxuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBlKG8sIGYpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBwLnYgPSAhMDtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gYXNzZXJ0Q2FsbGFibGUoZSwgdCkge1xuICAgIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBUeXBlRXJyb3IodCArIFwiIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcbiAgfVxuICBmdW5jdGlvbiBhc3NlcnRWYWxpZFJldHVyblZhbHVlKGUsIHQpIHtcbiAgICB2YXIgciA9IHR5cGVvZiB0O1xuICAgIGlmICgxID09PSBlKSB7XG4gICAgICBpZiAoXCJvYmplY3RcIiAhPT0gciB8fCBudWxsID09PSB0KSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYWNjZXNzb3IgZGVjb3JhdG9ycyBtdXN0IHJldHVybiBhbiBvYmplY3Qgd2l0aCBnZXQsIHNldCwgb3IgaW5pdCBwcm9wZXJ0aWVzIG9yIHZvaWQgMFwiKTtcbiAgICAgIHZvaWQgMCAhPT0gdC5nZXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5nZXQsIFwiYWNjZXNzb3IuZ2V0XCIpLCB2b2lkIDAgIT09IHQuc2V0ICYmIGFzc2VydENhbGxhYmxlKHQuc2V0LCBcImFjY2Vzc29yLnNldFwiKSwgdm9pZCAwICE9PSB0LmluaXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5pbml0LCBcImFjY2Vzc29yLmluaXRcIik7XG4gICAgfSBlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT09IHIpIHtcbiAgICAgIHZhciBhO1xuICAgICAgdGhyb3cgYSA9IDAgPT09IGUgPyBcImZpZWxkXCIgOiAxMCA9PT0gZSA/IFwiY2xhc3NcIiA6IFwibWV0aG9kXCIsIG5ldyBUeXBlRXJyb3IoYSArIFwiIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYSBmdW5jdGlvbiBvciB2b2lkIDBcIik7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGFwcGx5TWVtYmVyRGVjKGUsIHQsIHIsIGEsIG4sIGksIHMsIG8pIHtcbiAgICB2YXIgYyxcbiAgICAgIGwsXG4gICAgICB1LFxuICAgICAgZixcbiAgICAgIHAsXG4gICAgICBkLFxuICAgICAgaCA9IHJbMF07XG4gICAgaWYgKHMgPyBjID0gMCA9PT0gbiB8fCAxID09PSBuID8ge1xuICAgICAgZ2V0OiByWzNdLFxuICAgICAgc2V0OiByWzRdXG4gICAgfSA6IDMgPT09IG4gPyB7XG4gICAgICBnZXQ6IHJbM11cbiAgICB9IDogNCA9PT0gbiA/IHtcbiAgICAgIHNldDogclszXVxuICAgIH0gOiB7XG4gICAgICB2YWx1ZTogclszXVxuICAgIH0gOiAwICE9PSBuICYmIChjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCBhKSksIDEgPT09IG4gPyB1ID0ge1xuICAgICAgZ2V0OiBjLmdldCxcbiAgICAgIHNldDogYy5zZXRcbiAgICB9IDogMiA9PT0gbiA/IHUgPSBjLnZhbHVlIDogMyA9PT0gbiA/IHUgPSBjLmdldCA6IDQgPT09IG4gJiYgKHUgPSBjLnNldCksIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgaCkgdm9pZCAwICE9PSAoZiA9IG1lbWJlckRlYyhoLCBhLCBjLCBvLCBuLCBpLCBzLCB1KSkgJiYgKGFzc2VydFZhbGlkUmV0dXJuVmFsdWUobiwgZiksIDAgPT09IG4gPyBsID0gZiA6IDEgPT09IG4gPyAobCA9IGYuaW5pdCwgcCA9IGYuZ2V0IHx8IHUuZ2V0LCBkID0gZi5zZXQgfHwgdS5zZXQsIHUgPSB7XG4gICAgICBnZXQ6IHAsXG4gICAgICBzZXQ6IGRcbiAgICB9KSA6IHUgPSBmKTtlbHNlIGZvciAodmFyIHYgPSBoLmxlbmd0aCAtIDE7IHYgPj0gMDsgdi0tKSB7XG4gICAgICB2YXIgZztcbiAgICAgIGlmICh2b2lkIDAgIT09IChmID0gbWVtYmVyRGVjKGhbdl0sIGEsIGMsIG8sIG4sIGksIHMsIHUpKSkgYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShuLCBmKSwgMCA9PT0gbiA/IGcgPSBmIDogMSA9PT0gbiA/IChnID0gZi5pbml0LCBwID0gZi5nZXQgfHwgdS5nZXQsIGQgPSBmLnNldCB8fCB1LnNldCwgdSA9IHtcbiAgICAgICAgZ2V0OiBwLFxuICAgICAgICBzZXQ6IGRcbiAgICAgIH0pIDogdSA9IGYsIHZvaWQgMCAhPT0gZyAmJiAodm9pZCAwID09PSBsID8gbCA9IGcgOiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGwgPyBsID0gW2wsIGddIDogbC5wdXNoKGcpKTtcbiAgICB9XG4gICAgaWYgKDAgPT09IG4gfHwgMSA9PT0gbikge1xuICAgICAgaWYgKHZvaWQgMCA9PT0gbCkgbCA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0O1xuICAgICAgfTtlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIGwpIHtcbiAgICAgICAgdmFyIHkgPSBsO1xuICAgICAgICBsID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICBmb3IgKHZhciByID0gdCwgYSA9IDA7IGEgPCB5Lmxlbmd0aDsgYSsrKSByID0geVthXS5jYWxsKGUsIHIpO1xuICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG0gPSBsO1xuICAgICAgICBsID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICByZXR1cm4gbS5jYWxsKGUsIHQpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgZS5wdXNoKGwpO1xuICAgIH1cbiAgICAwICE9PSBuICYmICgxID09PSBuID8gKGMuZ2V0ID0gdS5nZXQsIGMuc2V0ID0gdS5zZXQpIDogMiA9PT0gbiA/IGMudmFsdWUgPSB1IDogMyA9PT0gbiA/IGMuZ2V0ID0gdSA6IDQgPT09IG4gJiYgKGMuc2V0ID0gdSksIHMgPyAxID09PSBuID8gKGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgcmV0dXJuIHUuZ2V0LmNhbGwoZSwgdCk7XG4gICAgfSksIGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgcmV0dXJuIHUuc2V0LmNhbGwoZSwgdCk7XG4gICAgfSkpIDogMiA9PT0gbiA/IGUucHVzaCh1KSA6IGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgcmV0dXJuIHUuY2FsbChlLCB0KTtcbiAgICB9KSA6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBhLCBjKSk7XG4gIH1cbiAgZnVuY3Rpb24gcHVzaEluaXRpYWxpemVycyhlLCB0KSB7XG4gICAgdCAmJiBlLnB1c2goZnVuY3Rpb24gKGUpIHtcbiAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgdC5sZW5ndGg7IHIrKykgdFtyXS5jYWxsKGUpO1xuICAgICAgcmV0dXJuIGU7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChlLCB0LCByKSB7XG4gICAgdmFyIGEgPSBbXTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQsIHIpIHtcbiAgICAgIGZvciAodmFyIGEsIG4sIGkgPSBuZXcgTWFwKCksIHMgPSBuZXcgTWFwKCksIG8gPSAwOyBvIDwgci5sZW5ndGg7IG8rKykge1xuICAgICAgICB2YXIgYyA9IHJbb107XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGMpKSB7XG4gICAgICAgICAgdmFyIGwsXG4gICAgICAgICAgICB1LFxuICAgICAgICAgICAgZiA9IGNbMV0sXG4gICAgICAgICAgICBwID0gY1syXSxcbiAgICAgICAgICAgIGQgPSBjLmxlbmd0aCA+IDMsXG4gICAgICAgICAgICBoID0gZiA+PSA1O1xuICAgICAgICAgIGlmIChoID8gKGwgPSB0LCAwICE9IChmIC09IDUpICYmICh1ID0gbiA9IG4gfHwgW10pKSA6IChsID0gdC5wcm90b3R5cGUsIDAgIT09IGYgJiYgKHUgPSBhID0gYSB8fCBbXSkpLCAwICE9PSBmICYmICFkKSB7XG4gICAgICAgICAgICB2YXIgdiA9IGggPyBzIDogaSxcbiAgICAgICAgICAgICAgZyA9IHYuZ2V0KHApIHx8IDA7XG4gICAgICAgICAgICBpZiAoITAgPT09IGcgfHwgMyA9PT0gZyAmJiA0ICE9PSBmIHx8IDQgPT09IGcgJiYgMyAhPT0gZikgdGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGVkIHRvIGRlY29yYXRlIGEgcHVibGljIG1ldGhvZC9hY2Nlc3NvciB0aGF0IGhhcyB0aGUgc2FtZSBuYW1lIGFzIGEgcHJldmlvdXNseSBkZWNvcmF0ZWQgcHVibGljIG1ldGhvZC9hY2Nlc3Nvci4gVGhpcyBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBieSB0aGUgZGVjb3JhdG9ycyBwbHVnaW4uIFByb3BlcnR5IG5hbWUgd2FzOiBcIiArIHApO1xuICAgICAgICAgICAgIWcgJiYgZiA+IDIgPyB2LnNldChwLCBmKSA6IHYuc2V0KHAsICEwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYXBwbHlNZW1iZXJEZWMoZSwgbCwgYywgcCwgZiwgaCwgZCwgdSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHB1c2hJbml0aWFsaXplcnMoZSwgYSksIHB1c2hJbml0aWFsaXplcnMoZSwgbik7XG4gICAgfShhLCBlLCB0KSwgZnVuY3Rpb24gKGUsIHQsIHIpIHtcbiAgICAgIGlmIChyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yICh2YXIgYSA9IFtdLCBuID0gdCwgaSA9IHQubmFtZSwgcyA9IHIubGVuZ3RoIC0gMTsgcyA+PSAwOyBzLS0pIHtcbiAgICAgICAgICB2YXIgbyA9IHtcbiAgICAgICAgICAgIHY6ICExXG4gICAgICAgICAgfTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGMgPSByW3NdKG4sIHtcbiAgICAgICAgICAgICAga2luZDogXCJjbGFzc1wiLFxuICAgICAgICAgICAgICBuYW1lOiBpLFxuICAgICAgICAgICAgICBhZGRJbml0aWFsaXplcjogY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QoYSwgbylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBvLnYgPSAhMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdm9pZCAwICE9PSBjICYmIChhc3NlcnRWYWxpZFJldHVyblZhbHVlKDEwLCBjKSwgbiA9IGMpO1xuICAgICAgICB9XG4gICAgICAgIGUucHVzaChuLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCBhLmxlbmd0aDsgZSsrKSBhW2VdLmNhbGwobik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0oYSwgZSwgciksIGE7XG4gIH07XG59XG52YXIgYXBwbHlEZWNzMjIwM0ltcGw7XG5mdW5jdGlvbiBfYXBwbHlEZWNzMjIwMyhlLCB0LCByKSB7XG4gIHJldHVybiAoYXBwbHlEZWNzMjIwM0ltcGwgPSBhcHBseURlY3MyMjAzSW1wbCB8fCBhcHBseURlY3MyMjAzRmFjdG9yeSgpKShlLCB0LCByKTtcbn1cbmZ1bmN0aW9uIGFwcGx5RGVjczIyMDNSRmFjdG9yeSgpIHtcbiAgZnVuY3Rpb24gY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QoZSwgdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgIWZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIGlmIChlLnYpIHRocm93IG5ldyBFcnJvcihcImF0dGVtcHRlZCB0byBjYWxsIFwiICsgdCArIFwiIGFmdGVyIGRlY29yYXRpb24gd2FzIGZpbmlzaGVkXCIpO1xuICAgICAgfSh0LCBcImFkZEluaXRpYWxpemVyXCIpLCBhc3NlcnRDYWxsYWJsZShyLCBcIkFuIGluaXRpYWxpemVyXCIpLCBlLnB1c2gocik7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBtZW1iZXJEZWMoZSwgdCwgciwgbiwgYSwgaSwgcywgbykge1xuICAgIHZhciBjO1xuICAgIHN3aXRjaCAoYSkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICBjID0gXCJhY2Nlc3NvclwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgYyA9IFwibWV0aG9kXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBjID0gXCJnZXR0ZXJcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIGMgPSBcInNldHRlclwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGMgPSBcImZpZWxkXCI7XG4gICAgfVxuICAgIHZhciBsLFxuICAgICAgdSxcbiAgICAgIGYgPSB7XG4gICAgICAgIGtpbmQ6IGMsXG4gICAgICAgIG5hbWU6IHMgPyBcIiNcIiArIHQgOiB0LFxuICAgICAgICBzdGF0aWM6IGksXG4gICAgICAgIHByaXZhdGU6IHNcbiAgICAgIH0sXG4gICAgICBwID0ge1xuICAgICAgICB2OiAhMVxuICAgICAgfTtcbiAgICAwICE9PSBhICYmIChmLmFkZEluaXRpYWxpemVyID0gY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QobiwgcCkpLCAwID09PSBhID8gcyA/IChsID0gci5nZXQsIHUgPSByLnNldCkgOiAobCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzW3RdO1xuICAgIH0sIHUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpc1t0XSA9IGU7XG4gICAgfSkgOiAyID09PSBhID8gbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiByLnZhbHVlO1xuICAgIH0gOiAoMSAhPT0gYSAmJiAzICE9PSBhIHx8IChsID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHIuZ2V0LmNhbGwodGhpcyk7XG4gICAgfSksIDEgIT09IGEgJiYgNCAhPT0gYSB8fCAodSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICByLnNldC5jYWxsKHRoaXMsIGUpO1xuICAgIH0pKSwgZi5hY2Nlc3MgPSBsICYmIHUgPyB7XG4gICAgICBnZXQ6IGwsXG4gICAgICBzZXQ6IHVcbiAgICB9IDogbCA/IHtcbiAgICAgIGdldDogbFxuICAgIH0gOiB7XG4gICAgICBzZXQ6IHVcbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZShvLCBmKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcC52ID0gITA7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGFzc2VydENhbGxhYmxlKGUsIHQpIHtcbiAgICBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKHQgKyBcIiBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XG4gIH1cbiAgZnVuY3Rpb24gYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShlLCB0KSB7XG4gICAgdmFyIHIgPSB0eXBlb2YgdDtcbiAgICBpZiAoMSA9PT0gZSkge1xuICAgICAgaWYgKFwib2JqZWN0XCIgIT09IHIgfHwgbnVsbCA9PT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcImFjY2Vzc29yIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHdpdGggZ2V0LCBzZXQsIG9yIGluaXQgcHJvcGVydGllcyBvciB2b2lkIDBcIik7XG4gICAgICB2b2lkIDAgIT09IHQuZ2V0ICYmIGFzc2VydENhbGxhYmxlKHQuZ2V0LCBcImFjY2Vzc29yLmdldFwiKSwgdm9pZCAwICE9PSB0LnNldCAmJiBhc3NlcnRDYWxsYWJsZSh0LnNldCwgXCJhY2Nlc3Nvci5zZXRcIiksIHZvaWQgMCAhPT0gdC5pbml0ICYmIGFzc2VydENhbGxhYmxlKHQuaW5pdCwgXCJhY2Nlc3Nvci5pbml0XCIpO1xuICAgIH0gZWxzZSBpZiAoXCJmdW5jdGlvblwiICE9PSByKSB7XG4gICAgICB2YXIgbjtcbiAgICAgIHRocm93IG4gPSAwID09PSBlID8gXCJmaWVsZFwiIDogMTAgPT09IGUgPyBcImNsYXNzXCIgOiBcIm1ldGhvZFwiLCBuZXcgVHlwZUVycm9yKG4gKyBcIiBkZWNvcmF0b3JzIG11c3QgcmV0dXJuIGEgZnVuY3Rpb24gb3Igdm9pZCAwXCIpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBhcHBseU1lbWJlckRlYyhlLCB0LCByLCBuLCBhLCBpLCBzLCBvKSB7XG4gICAgdmFyIGMsXG4gICAgICBsLFxuICAgICAgdSxcbiAgICAgIGYsXG4gICAgICBwLFxuICAgICAgZCxcbiAgICAgIGggPSByWzBdO1xuICAgIGlmIChzID8gYyA9IDAgPT09IGEgfHwgMSA9PT0gYSA/IHtcbiAgICAgIGdldDogclszXSxcbiAgICAgIHNldDogcls0XVxuICAgIH0gOiAzID09PSBhID8ge1xuICAgICAgZ2V0OiByWzNdXG4gICAgfSA6IDQgPT09IGEgPyB7XG4gICAgICBzZXQ6IHJbM11cbiAgICB9IDoge1xuICAgICAgdmFsdWU6IHJbM11cbiAgICB9IDogMCAhPT0gYSAmJiAoYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgbikpLCAxID09PSBhID8gdSA9IHtcbiAgICAgIGdldDogYy5nZXQsXG4gICAgICBzZXQ6IGMuc2V0XG4gICAgfSA6IDIgPT09IGEgPyB1ID0gYy52YWx1ZSA6IDMgPT09IGEgPyB1ID0gYy5nZXQgOiA0ID09PSBhICYmICh1ID0gYy5zZXQpLCBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGgpIHZvaWQgMCAhPT0gKGYgPSBtZW1iZXJEZWMoaCwgbiwgYywgbywgYSwgaSwgcywgdSkpICYmIChhc3NlcnRWYWxpZFJldHVyblZhbHVlKGEsIGYpLCAwID09PSBhID8gbCA9IGYgOiAxID09PSBhID8gKGwgPSBmLmluaXQsIHAgPSBmLmdldCB8fCB1LmdldCwgZCA9IGYuc2V0IHx8IHUuc2V0LCB1ID0ge1xuICAgICAgZ2V0OiBwLFxuICAgICAgc2V0OiBkXG4gICAgfSkgOiB1ID0gZik7ZWxzZSBmb3IgKHZhciB2ID0gaC5sZW5ndGggLSAxOyB2ID49IDA7IHYtLSkge1xuICAgICAgdmFyIGc7XG4gICAgICBpZiAodm9pZCAwICE9PSAoZiA9IG1lbWJlckRlYyhoW3ZdLCBuLCBjLCBvLCBhLCBpLCBzLCB1KSkpIGFzc2VydFZhbGlkUmV0dXJuVmFsdWUoYSwgZiksIDAgPT09IGEgPyBnID0gZiA6IDEgPT09IGEgPyAoZyA9IGYuaW5pdCwgcCA9IGYuZ2V0IHx8IHUuZ2V0LCBkID0gZi5zZXQgfHwgdS5zZXQsIHUgPSB7XG4gICAgICAgIGdldDogcCxcbiAgICAgICAgc2V0OiBkXG4gICAgICB9KSA6IHUgPSBmLCB2b2lkIDAgIT09IGcgJiYgKHZvaWQgMCA9PT0gbCA/IGwgPSBnIDogXCJmdW5jdGlvblwiID09IHR5cGVvZiBsID8gbCA9IFtsLCBnXSA6IGwucHVzaChnKSk7XG4gICAgfVxuICAgIGlmICgwID09PSBhIHx8IDEgPT09IGEpIHtcbiAgICAgIGlmICh2b2lkIDAgPT09IGwpIGwgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICByZXR1cm4gdDtcbiAgICAgIH07ZWxzZSBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBsKSB7XG4gICAgICAgIHZhciB5ID0gbDtcbiAgICAgICAgbCA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgZm9yICh2YXIgciA9IHQsIG4gPSAwOyBuIDwgeS5sZW5ndGg7IG4rKykgciA9IHlbbl0uY2FsbChlLCByKTtcbiAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBtID0gbDtcbiAgICAgICAgbCA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgcmV0dXJuIG0uY2FsbChlLCB0KTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGUucHVzaChsKTtcbiAgICB9XG4gICAgMCAhPT0gYSAmJiAoMSA9PT0gYSA/IChjLmdldCA9IHUuZ2V0LCBjLnNldCA9IHUuc2V0KSA6IDIgPT09IGEgPyBjLnZhbHVlID0gdSA6IDMgPT09IGEgPyBjLmdldCA9IHUgOiA0ID09PSBhICYmIChjLnNldCA9IHUpLCBzID8gMSA9PT0gYSA/IChlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHJldHVybiB1LmdldC5jYWxsKGUsIHQpO1xuICAgIH0pLCBlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHJldHVybiB1LnNldC5jYWxsKGUsIHQpO1xuICAgIH0pKSA6IDIgPT09IGEgPyBlLnB1c2godSkgOiBlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHJldHVybiB1LmNhbGwoZSwgdCk7XG4gICAgfSkgOiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgbiwgYykpO1xuICB9XG4gIGZ1bmN0aW9uIGFwcGx5TWVtYmVyRGVjcyhlLCB0KSB7XG4gICAgZm9yICh2YXIgciwgbiwgYSA9IFtdLCBpID0gbmV3IE1hcCgpLCBzID0gbmV3IE1hcCgpLCBvID0gMDsgbyA8IHQubGVuZ3RoOyBvKyspIHtcbiAgICAgIHZhciBjID0gdFtvXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGMpKSB7XG4gICAgICAgIHZhciBsLFxuICAgICAgICAgIHUsXG4gICAgICAgICAgZiA9IGNbMV0sXG4gICAgICAgICAgcCA9IGNbMl0sXG4gICAgICAgICAgZCA9IGMubGVuZ3RoID4gMyxcbiAgICAgICAgICBoID0gZiA+PSA1O1xuICAgICAgICBpZiAoaCA/IChsID0gZSwgMCAhPT0gKGYgLT0gNSkgJiYgKHUgPSBuID0gbiB8fCBbXSkpIDogKGwgPSBlLnByb3RvdHlwZSwgMCAhPT0gZiAmJiAodSA9IHIgPSByIHx8IFtdKSksIDAgIT09IGYgJiYgIWQpIHtcbiAgICAgICAgICB2YXIgdiA9IGggPyBzIDogaSxcbiAgICAgICAgICAgIGcgPSB2LmdldChwKSB8fCAwO1xuICAgICAgICAgIGlmICghMCA9PT0gZyB8fCAzID09PSBnICYmIDQgIT09IGYgfHwgNCA9PT0gZyAmJiAzICE9PSBmKSB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gZGVjb3JhdGUgYSBwdWJsaWMgbWV0aG9kL2FjY2Vzc29yIHRoYXQgaGFzIHRoZSBzYW1lIG5hbWUgYXMgYSBwcmV2aW91c2x5IGRlY29yYXRlZCBwdWJsaWMgbWV0aG9kL2FjY2Vzc29yLiBUaGlzIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IHRoZSBkZWNvcmF0b3JzIHBsdWdpbi4gUHJvcGVydHkgbmFtZSB3YXM6IFwiICsgcCk7XG4gICAgICAgICAgIWcgJiYgZiA+IDIgPyB2LnNldChwLCBmKSA6IHYuc2V0KHAsICEwKTtcbiAgICAgICAgfVxuICAgICAgICBhcHBseU1lbWJlckRlYyhhLCBsLCBjLCBwLCBmLCBoLCBkLCB1KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHB1c2hJbml0aWFsaXplcnMoYSwgciksIHB1c2hJbml0aWFsaXplcnMoYSwgbiksIGE7XG4gIH1cbiAgZnVuY3Rpb24gcHVzaEluaXRpYWxpemVycyhlLCB0KSB7XG4gICAgdCAmJiBlLnB1c2goZnVuY3Rpb24gKGUpIHtcbiAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgdC5sZW5ndGg7IHIrKykgdFtyXS5jYWxsKGUpO1xuICAgICAgcmV0dXJuIGU7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChlLCB0LCByKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGU6IGFwcGx5TWVtYmVyRGVjcyhlLCB0KSxcbiAgICAgIGdldCBjKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICBpZiAodC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKHZhciByID0gW10sIG4gPSBlLCBhID0gZS5uYW1lLCBpID0gdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICB2YXIgcyA9IHtcbiAgICAgICAgICAgICAgICB2OiAhMVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBvID0gdFtpXShuLCB7XG4gICAgICAgICAgICAgICAgICBraW5kOiBcImNsYXNzXCIsXG4gICAgICAgICAgICAgICAgICBuYW1lOiBhLFxuICAgICAgICAgICAgICAgICAgYWRkSW5pdGlhbGl6ZXI6IGNyZWF0ZUFkZEluaXRpYWxpemVyTWV0aG9kKHIsIHMpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgcy52ID0gITA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdm9pZCAwICE9PSBvICYmIChhc3NlcnRWYWxpZFJldHVyblZhbHVlKDEwLCBvKSwgbiA9IG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtuLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgci5sZW5ndGg7IGUrKykgcltlXS5jYWxsKG4pO1xuICAgICAgICAgICAgfV07XG4gICAgICAgICAgfVxuICAgICAgICB9KGUsIHIpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59XG5mdW5jdGlvbiBfYXBwbHlEZWNzMjIwM1IoZSwgdCwgcikge1xuICByZXR1cm4gKF9hcHBseURlY3MyMjAzUiA9IGFwcGx5RGVjczIyMDNSRmFjdG9yeSgpKShlLCB0LCByKTtcbn1cbmZ1bmN0aW9uIGFwcGx5RGVjczIzMDFGYWN0b3J5KCkge1xuICBmdW5jdGlvbiBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChlLCB0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAhZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgaWYgKGUudikgdGhyb3cgbmV3IEVycm9yKFwiYXR0ZW1wdGVkIHRvIGNhbGwgXCIgKyB0ICsgXCIgYWZ0ZXIgZGVjb3JhdGlvbiB3YXMgZmluaXNoZWRcIik7XG4gICAgICB9KHQsIFwiYWRkSW5pdGlhbGl6ZXJcIiksIGFzc2VydENhbGxhYmxlKHIsIFwiQW4gaW5pdGlhbGl6ZXJcIiksIGUucHVzaChyKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGFzc2VydEluc3RhbmNlSWZQcml2YXRlKGUsIHQpIHtcbiAgICBpZiAoIWUodCkpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJBdHRlbXB0ZWQgdG8gYWNjZXNzIHByaXZhdGUgZWxlbWVudCBvbiBub24taW5zdGFuY2VcIik7XG4gIH1cbiAgZnVuY3Rpb24gbWVtYmVyRGVjKGUsIHQsIHIsIG4sIGEsIGksIHMsIG8sIGMpIHtcbiAgICB2YXIgdTtcbiAgICBzd2l0Y2ggKGEpIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgdSA9IFwiYWNjZXNzb3JcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHUgPSBcIm1ldGhvZFwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgdSA9IFwiZ2V0dGVyXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA0OlxuICAgICAgICB1ID0gXCJzZXR0ZXJcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB1ID0gXCJmaWVsZFwiO1xuICAgIH1cbiAgICB2YXIgbCxcbiAgICAgIGYsXG4gICAgICBwID0ge1xuICAgICAgICBraW5kOiB1LFxuICAgICAgICBuYW1lOiBzID8gXCIjXCIgKyB0IDogdCxcbiAgICAgICAgc3RhdGljOiBpLFxuICAgICAgICBwcml2YXRlOiBzXG4gICAgICB9LFxuICAgICAgZCA9IHtcbiAgICAgICAgdjogITFcbiAgICAgIH07XG4gICAgaWYgKDAgIT09IGEgJiYgKHAuYWRkSW5pdGlhbGl6ZXIgPSBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChuLCBkKSksIHMgfHwgMCAhPT0gYSAmJiAyICE9PSBhKSB7XG4gICAgICBpZiAoMiA9PT0gYSkgbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShjLCBlKSwgci52YWx1ZTtcbiAgICAgIH07ZWxzZSB7XG4gICAgICAgIHZhciBoID0gMCA9PT0gYSB8fCAxID09PSBhO1xuICAgICAgICAoaCB8fCAzID09PSBhKSAmJiAobCA9IHMgPyBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShjLCBlKSwgci5nZXQuY2FsbChlKTtcbiAgICAgICAgfSA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIHIuZ2V0LmNhbGwoZSk7XG4gICAgICAgIH0pLCAoaCB8fCA0ID09PSBhKSAmJiAoZiA9IHMgPyBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIGFzc2VydEluc3RhbmNlSWZQcml2YXRlKGMsIGUpLCByLnNldC5jYWxsKGUsIHQpO1xuICAgICAgICB9IDogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICByLnNldC5jYWxsKGUsIHQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gZVt0XTtcbiAgICB9LCAwID09PSBhICYmIChmID0gZnVuY3Rpb24gKGUsIHIpIHtcbiAgICAgIGVbdF0gPSByO1xuICAgIH0pO1xuICAgIHZhciB2ID0gcyA/IGMuYmluZCgpIDogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiB0IGluIGU7XG4gICAgfTtcbiAgICBwLmFjY2VzcyA9IGwgJiYgZiA/IHtcbiAgICAgIGdldDogbCxcbiAgICAgIHNldDogZixcbiAgICAgIGhhczogdlxuICAgIH0gOiBsID8ge1xuICAgICAgZ2V0OiBsLFxuICAgICAgaGFzOiB2XG4gICAgfSA6IHtcbiAgICAgIHNldDogZixcbiAgICAgIGhhczogdlxuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBlKG8sIHApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBkLnYgPSAhMDtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gYXNzZXJ0Q2FsbGFibGUoZSwgdCkge1xuICAgIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBUeXBlRXJyb3IodCArIFwiIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcbiAgfVxuICBmdW5jdGlvbiBhc3NlcnRWYWxpZFJldHVyblZhbHVlKGUsIHQpIHtcbiAgICB2YXIgciA9IHR5cGVvZiB0O1xuICAgIGlmICgxID09PSBlKSB7XG4gICAgICBpZiAoXCJvYmplY3RcIiAhPT0gciB8fCBudWxsID09PSB0KSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYWNjZXNzb3IgZGVjb3JhdG9ycyBtdXN0IHJldHVybiBhbiBvYmplY3Qgd2l0aCBnZXQsIHNldCwgb3IgaW5pdCBwcm9wZXJ0aWVzIG9yIHZvaWQgMFwiKTtcbiAgICAgIHZvaWQgMCAhPT0gdC5nZXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5nZXQsIFwiYWNjZXNzb3IuZ2V0XCIpLCB2b2lkIDAgIT09IHQuc2V0ICYmIGFzc2VydENhbGxhYmxlKHQuc2V0LCBcImFjY2Vzc29yLnNldFwiKSwgdm9pZCAwICE9PSB0LmluaXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5pbml0LCBcImFjY2Vzc29yLmluaXRcIik7XG4gICAgfSBlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT09IHIpIHtcbiAgICAgIHZhciBuO1xuICAgICAgdGhyb3cgbiA9IDAgPT09IGUgPyBcImZpZWxkXCIgOiAxMCA9PT0gZSA/IFwiY2xhc3NcIiA6IFwibWV0aG9kXCIsIG5ldyBUeXBlRXJyb3IobiArIFwiIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYSBmdW5jdGlvbiBvciB2b2lkIDBcIik7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGN1cnJ5VGhpczIoZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodCkge1xuICAgICAgZSh0aGlzLCB0KTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGFwcGx5TWVtYmVyRGVjKGUsIHQsIHIsIG4sIGEsIGksIHMsIG8sIGMpIHtcbiAgICB2YXIgdSxcbiAgICAgIGwsXG4gICAgICBmLFxuICAgICAgcCxcbiAgICAgIGQsXG4gICAgICBoLFxuICAgICAgdixcbiAgICAgIGcgPSByWzBdO1xuICAgIGlmIChzID8gdSA9IDAgPT09IGEgfHwgMSA9PT0gYSA/IHtcbiAgICAgIGdldDogKHAgPSByWzNdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBwKHRoaXMpO1xuICAgICAgfSksXG4gICAgICBzZXQ6IGN1cnJ5VGhpczIocls0XSlcbiAgICB9IDogMyA9PT0gYSA/IHtcbiAgICAgIGdldDogclszXVxuICAgIH0gOiA0ID09PSBhID8ge1xuICAgICAgc2V0OiByWzNdXG4gICAgfSA6IHtcbiAgICAgIHZhbHVlOiByWzNdXG4gICAgfSA6IDAgIT09IGEgJiYgKHUgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIG4pKSwgMSA9PT0gYSA/IGYgPSB7XG4gICAgICBnZXQ6IHUuZ2V0LFxuICAgICAgc2V0OiB1LnNldFxuICAgIH0gOiAyID09PSBhID8gZiA9IHUudmFsdWUgOiAzID09PSBhID8gZiA9IHUuZ2V0IDogNCA9PT0gYSAmJiAoZiA9IHUuc2V0KSwgXCJmdW5jdGlvblwiID09IHR5cGVvZiBnKSB2b2lkIDAgIT09IChkID0gbWVtYmVyRGVjKGcsIG4sIHUsIG8sIGEsIGksIHMsIGYsIGMpKSAmJiAoYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShhLCBkKSwgMCA9PT0gYSA/IGwgPSBkIDogMSA9PT0gYSA/IChsID0gZC5pbml0LCBoID0gZC5nZXQgfHwgZi5nZXQsIHYgPSBkLnNldCB8fCBmLnNldCwgZiA9IHtcbiAgICAgIGdldDogaCxcbiAgICAgIHNldDogdlxuICAgIH0pIDogZiA9IGQpO2Vsc2UgZm9yICh2YXIgeSA9IGcubGVuZ3RoIC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICAgIHZhciBtO1xuICAgICAgaWYgKHZvaWQgMCAhPT0gKGQgPSBtZW1iZXJEZWMoZ1t5XSwgbiwgdSwgbywgYSwgaSwgcywgZiwgYykpKSBhc3NlcnRWYWxpZFJldHVyblZhbHVlKGEsIGQpLCAwID09PSBhID8gbSA9IGQgOiAxID09PSBhID8gKG0gPSBkLmluaXQsIGggPSBkLmdldCB8fCBmLmdldCwgdiA9IGQuc2V0IHx8IGYuc2V0LCBmID0ge1xuICAgICAgICBnZXQ6IGgsXG4gICAgICAgIHNldDogdlxuICAgICAgfSkgOiBmID0gZCwgdm9pZCAwICE9PSBtICYmICh2b2lkIDAgPT09IGwgPyBsID0gbSA6IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgbCA/IGwgPSBbbCwgbV0gOiBsLnB1c2gobSkpO1xuICAgIH1cbiAgICBpZiAoMCA9PT0gYSB8fCAxID09PSBhKSB7XG4gICAgICBpZiAodm9pZCAwID09PSBsKSBsID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgICB9O2Vsc2UgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgbCkge1xuICAgICAgICB2YXIgYiA9IGw7XG4gICAgICAgIGwgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIGZvciAodmFyIHIgPSB0LCBuID0gMDsgbiA8IGIubGVuZ3RoOyBuKyspIHIgPSBiW25dLmNhbGwoZSwgcik7XG4gICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgSSA9IGw7XG4gICAgICAgIGwgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIHJldHVybiBJLmNhbGwoZSwgdCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBlLnB1c2gobCk7XG4gICAgfVxuICAgIDAgIT09IGEgJiYgKDEgPT09IGEgPyAodS5nZXQgPSBmLmdldCwgdS5zZXQgPSBmLnNldCkgOiAyID09PSBhID8gdS52YWx1ZSA9IGYgOiAzID09PSBhID8gdS5nZXQgPSBmIDogNCA9PT0gYSAmJiAodS5zZXQgPSBmKSwgcyA/IDEgPT09IGEgPyAoZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICByZXR1cm4gZi5nZXQuY2FsbChlLCB0KTtcbiAgICB9KSwgZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICByZXR1cm4gZi5zZXQuY2FsbChlLCB0KTtcbiAgICB9KSkgOiAyID09PSBhID8gZS5wdXNoKGYpIDogZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICByZXR1cm4gZi5jYWxsKGUsIHQpO1xuICAgIH0pIDogT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIG4sIHUpKTtcbiAgfVxuICBmdW5jdGlvbiBhcHBseU1lbWJlckRlY3MoZSwgdCwgcikge1xuICAgIGZvciAodmFyIG4sIGEsIGksIHMgPSBbXSwgbyA9IG5ldyBNYXAoKSwgYyA9IG5ldyBNYXAoKSwgdSA9IDA7IHUgPCB0Lmxlbmd0aDsgdSsrKSB7XG4gICAgICB2YXIgbCA9IHRbdV07XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShsKSkge1xuICAgICAgICB2YXIgZixcbiAgICAgICAgICBwLFxuICAgICAgICAgIGQgPSBsWzFdLFxuICAgICAgICAgIGggPSBsWzJdLFxuICAgICAgICAgIHYgPSBsLmxlbmd0aCA+IDMsXG4gICAgICAgICAgZyA9IGQgPj0gNSxcbiAgICAgICAgICB5ID0gcjtcbiAgICAgICAgaWYgKGcgPyAoZiA9IGUsIDAgIT09IChkIC09IDUpICYmIChwID0gYSA9IGEgfHwgW10pLCB2ICYmICFpICYmIChpID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICByZXR1cm4gX2NoZWNrSW5SSFModCkgPT09IGU7XG4gICAgICAgIH0pLCB5ID0gaSkgOiAoZiA9IGUucHJvdG90eXBlLCAwICE9PSBkICYmIChwID0gbiA9IG4gfHwgW10pKSwgMCAhPT0gZCAmJiAhdikge1xuICAgICAgICAgIHZhciBtID0gZyA/IGMgOiBvLFxuICAgICAgICAgICAgYiA9IG0uZ2V0KGgpIHx8IDA7XG4gICAgICAgICAgaWYgKCEwID09PSBiIHx8IDMgPT09IGIgJiYgNCAhPT0gZCB8fCA0ID09PSBiICYmIDMgIT09IGQpIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBkZWNvcmF0ZSBhIHB1YmxpYyBtZXRob2QvYWNjZXNzb3IgdGhhdCBoYXMgdGhlIHNhbWUgbmFtZSBhcyBhIHByZXZpb3VzbHkgZGVjb3JhdGVkIHB1YmxpYyBtZXRob2QvYWNjZXNzb3IuIFRoaXMgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgYnkgdGhlIGRlY29yYXRvcnMgcGx1Z2luLiBQcm9wZXJ0eSBuYW1lIHdhczogXCIgKyBoKTtcbiAgICAgICAgICAhYiAmJiBkID4gMiA/IG0uc2V0KGgsIGQpIDogbS5zZXQoaCwgITApO1xuICAgICAgICB9XG4gICAgICAgIGFwcGx5TWVtYmVyRGVjKHMsIGYsIGwsIGgsIGQsIGcsIHYsIHAsIHkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcHVzaEluaXRpYWxpemVycyhzLCBuKSwgcHVzaEluaXRpYWxpemVycyhzLCBhKSwgcztcbiAgfVxuICBmdW5jdGlvbiBwdXNoSW5pdGlhbGl6ZXJzKGUsIHQpIHtcbiAgICB0ICYmIGUucHVzaChmdW5jdGlvbiAoZSkge1xuICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCB0Lmxlbmd0aDsgcisrKSB0W3JdLmNhbGwoZSk7XG4gICAgICByZXR1cm4gZTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZTogYXBwbHlNZW1iZXJEZWNzKGUsIHQsIG4pLFxuICAgICAgZ2V0IGMoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIGlmICh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAodmFyIHIgPSBbXSwgbiA9IGUsIGEgPSBlLm5hbWUsIGkgPSB0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgIHZhciBzID0ge1xuICAgICAgICAgICAgICAgIHY6ICExXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIG8gPSB0W2ldKG4sIHtcbiAgICAgICAgICAgICAgICAgIGtpbmQ6IFwiY2xhc3NcIixcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGEsXG4gICAgICAgICAgICAgICAgICBhZGRJbml0aWFsaXplcjogY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QociwgcylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBzLnYgPSAhMDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB2b2lkIDAgIT09IG8gJiYgKGFzc2VydFZhbGlkUmV0dXJuVmFsdWUoMTAsIG8pLCBuID0gbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW24sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCByLmxlbmd0aDsgZSsrKSByW2VdLmNhbGwobik7XG4gICAgICAgICAgICB9XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0oZSwgcik7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbn1cbmZ1bmN0aW9uIF9hcHBseURlY3MyMzAxKGUsIHQsIHIsIG4pIHtcbiAgcmV0dXJuIChfYXBwbHlEZWNzMjMwMSA9IGFwcGx5RGVjczIzMDFGYWN0b3J5KCkpKGUsIHQsIHIsIG4pO1xufVxuZnVuY3Rpb24gY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QoZSwgdCkge1xuICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICBhc3NlcnROb3RGaW5pc2hlZCh0LCBcImFkZEluaXRpYWxpemVyXCIpLCBhc3NlcnRDYWxsYWJsZShyLCBcIkFuIGluaXRpYWxpemVyXCIpLCBlLnB1c2gocik7XG4gIH07XG59XG5mdW5jdGlvbiBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShlLCB0KSB7XG4gIGlmICghZSh0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkF0dGVtcHRlZCB0byBhY2Nlc3MgcHJpdmF0ZSBlbGVtZW50IG9uIG5vbi1pbnN0YW5jZVwiKTtcbn1cbmZ1bmN0aW9uIG1lbWJlckRlYyhlLCB0LCByLCBuLCBhLCBpLCBzLCBvLCBjLCBsKSB7XG4gIHZhciB1O1xuICBzd2l0Y2ggKGkpIHtcbiAgICBjYXNlIDE6XG4gICAgICB1ID0gXCJhY2Nlc3NvclwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgdSA9IFwibWV0aG9kXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM6XG4gICAgICB1ID0gXCJnZXR0ZXJcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNDpcbiAgICAgIHUgPSBcInNldHRlclwiO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHUgPSBcImZpZWxkXCI7XG4gIH1cbiAgdmFyIGYsXG4gICAgZCxcbiAgICBwID0ge1xuICAgICAga2luZDogdSxcbiAgICAgIG5hbWU6IG8gPyBcIiNcIiArIHIgOiByLFxuICAgICAgc3RhdGljOiBzLFxuICAgICAgcHJpdmF0ZTogb1xuICAgIH0sXG4gICAgaCA9IHtcbiAgICAgIHY6ICExXG4gICAgfTtcbiAgaWYgKDAgIT09IGkgJiYgKHAuYWRkSW5pdGlhbGl6ZXIgPSBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChhLCBoKSksIG8gfHwgMCAhPT0gaSAmJiAyICE9PSBpKSB7XG4gICAgaWYgKDIgPT09IGkpIGYgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIGFzc2VydEluc3RhbmNlSWZQcml2YXRlKGwsIGUpLCBuLnZhbHVlO1xuICAgIH07ZWxzZSB7XG4gICAgICB2YXIgdiA9IDAgPT09IGkgfHwgMSA9PT0gaTtcbiAgICAgICh2IHx8IDMgPT09IGkpICYmIChmID0gbyA/IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShsLCBlKSwgbi5nZXQuY2FsbChlKTtcbiAgICAgIH0gOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gbi5nZXQuY2FsbChlKTtcbiAgICAgIH0pLCAodiB8fCA0ID09PSBpKSAmJiAoZCA9IG8gPyBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShsLCBlKSwgbi5zZXQuY2FsbChlLCB0KTtcbiAgICAgIH0gOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICBuLnNldC5jYWxsKGUsIHQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9IGVsc2UgZiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgcmV0dXJuIGVbcl07XG4gIH0sIDAgPT09IGkgJiYgKGQgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgIGVbcl0gPSB0O1xuICB9KTtcbiAgdmFyIHkgPSBvID8gbC5iaW5kKCkgOiBmdW5jdGlvbiAoZSkge1xuICAgIHJldHVybiByIGluIGU7XG4gIH07XG4gIHAuYWNjZXNzID0gZiAmJiBkID8ge1xuICAgIGdldDogZixcbiAgICBzZXQ6IGQsXG4gICAgaGFzOiB5XG4gIH0gOiBmID8ge1xuICAgIGdldDogZixcbiAgICBoYXM6IHlcbiAgfSA6IHtcbiAgICBzZXQ6IGQsXG4gICAgaGFzOiB5XG4gIH07XG4gIHRyeSB7XG4gICAgcmV0dXJuIGUuY2FsbCh0LCBjLCBwKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBoLnYgPSAhMDtcbiAgfVxufVxuZnVuY3Rpb24gYXNzZXJ0Tm90RmluaXNoZWQoZSwgdCkge1xuICBpZiAoZS52KSB0aHJvdyBuZXcgRXJyb3IoXCJhdHRlbXB0ZWQgdG8gY2FsbCBcIiArIHQgKyBcIiBhZnRlciBkZWNvcmF0aW9uIHdhcyBmaW5pc2hlZFwiKTtcbn1cbmZ1bmN0aW9uIGFzc2VydENhbGxhYmxlKGUsIHQpIHtcbiAgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgZSkgdGhyb3cgbmV3IFR5cGVFcnJvcih0ICsgXCIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xufVxuZnVuY3Rpb24gYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShlLCB0KSB7XG4gIHZhciByID0gdHlwZW9mIHQ7XG4gIGlmICgxID09PSBlKSB7XG4gICAgaWYgKFwib2JqZWN0XCIgIT09IHIgfHwgbnVsbCA9PT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcImFjY2Vzc29yIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHdpdGggZ2V0LCBzZXQsIG9yIGluaXQgcHJvcGVydGllcyBvciB2b2lkIDBcIik7XG4gICAgdm9pZCAwICE9PSB0LmdldCAmJiBhc3NlcnRDYWxsYWJsZSh0LmdldCwgXCJhY2Nlc3Nvci5nZXRcIiksIHZvaWQgMCAhPT0gdC5zZXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5zZXQsIFwiYWNjZXNzb3Iuc2V0XCIpLCB2b2lkIDAgIT09IHQuaW5pdCAmJiBhc3NlcnRDYWxsYWJsZSh0LmluaXQsIFwiYWNjZXNzb3IuaW5pdFwiKTtcbiAgfSBlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT09IHIpIHtcbiAgICB2YXIgbjtcbiAgICB0aHJvdyBuID0gMCA9PT0gZSA/IFwiZmllbGRcIiA6IDUgPT09IGUgPyBcImNsYXNzXCIgOiBcIm1ldGhvZFwiLCBuZXcgVHlwZUVycm9yKG4gKyBcIiBkZWNvcmF0b3JzIG11c3QgcmV0dXJuIGEgZnVuY3Rpb24gb3Igdm9pZCAwXCIpO1xuICB9XG59XG5mdW5jdGlvbiBjdXJyeVRoaXMxKGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZSh0aGlzKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGN1cnJ5VGhpczIoZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKHQpIHtcbiAgICBlKHRoaXMsIHQpO1xuICB9O1xufVxuZnVuY3Rpb24gYXBwbHlNZW1iZXJEZWMoZSwgdCwgciwgbiwgYSwgaSwgcywgbywgYywgbCkge1xuICB2YXIgdSxcbiAgICBmLFxuICAgIGQsXG4gICAgcCxcbiAgICBoLFxuICAgIHYsXG4gICAgeSA9IHJbMF07XG4gIG4gfHwgQXJyYXkuaXNBcnJheSh5KSB8fCAoeSA9IFt5XSksIG8gPyB1ID0gMCA9PT0gaSB8fCAxID09PSBpID8ge1xuICAgIGdldDogY3VycnlUaGlzMShyWzNdKSxcbiAgICBzZXQ6IGN1cnJ5VGhpczIocls0XSlcbiAgfSA6IDMgPT09IGkgPyB7XG4gICAgZ2V0OiByWzNdXG4gIH0gOiA0ID09PSBpID8ge1xuICAgIHNldDogclszXVxuICB9IDoge1xuICAgIHZhbHVlOiByWzNdXG4gIH0gOiAwICE9PSBpICYmICh1ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCBhKSksIDEgPT09IGkgPyBkID0ge1xuICAgIGdldDogdS5nZXQsXG4gICAgc2V0OiB1LnNldFxuICB9IDogMiA9PT0gaSA/IGQgPSB1LnZhbHVlIDogMyA9PT0gaSA/IGQgPSB1LmdldCA6IDQgPT09IGkgJiYgKGQgPSB1LnNldCk7XG4gIGZvciAodmFyIGcgPSBuID8gMiA6IDEsIG0gPSB5Lmxlbmd0aCAtIDE7IG0gPj0gMDsgbSAtPSBnKSB7XG4gICAgdmFyIGI7XG4gICAgaWYgKHZvaWQgMCAhPT0gKHAgPSBtZW1iZXJEZWMoeVttXSwgbiA/IHlbbSAtIDFdIDogdm9pZCAwLCBhLCB1LCBjLCBpLCBzLCBvLCBkLCBsKSkpIGFzc2VydFZhbGlkUmV0dXJuVmFsdWUoaSwgcCksIDAgPT09IGkgPyBiID0gcCA6IDEgPT09IGkgPyAoYiA9IHAuaW5pdCwgaCA9IHAuZ2V0IHx8IGQuZ2V0LCB2ID0gcC5zZXQgfHwgZC5zZXQsIGQgPSB7XG4gICAgICBnZXQ6IGgsXG4gICAgICBzZXQ6IHZcbiAgICB9KSA6IGQgPSBwLCB2b2lkIDAgIT09IGIgJiYgKHZvaWQgMCA9PT0gZiA/IGYgPSBiIDogXCJmdW5jdGlvblwiID09IHR5cGVvZiBmID8gZiA9IFtmLCBiXSA6IGYucHVzaChiKSk7XG4gIH1cbiAgaWYgKDAgPT09IGkgfHwgMSA9PT0gaSkge1xuICAgIGlmICh2b2lkIDAgPT09IGYpIGYgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgcmV0dXJuIHQ7XG4gICAgfTtlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIGYpIHtcbiAgICAgIHZhciBJID0gZjtcbiAgICAgIGYgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICBmb3IgKHZhciByID0gdCwgbiA9IEkubGVuZ3RoIC0gMTsgbiA+PSAwOyBuLS0pIHIgPSBJW25dLmNhbGwoZSwgcik7XG4gICAgICAgIHJldHVybiByO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHcgPSBmO1xuICAgICAgZiA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIHJldHVybiB3LmNhbGwoZSwgdCk7XG4gICAgICB9O1xuICAgIH1cbiAgICBlLnB1c2goZik7XG4gIH1cbiAgMCAhPT0gaSAmJiAoMSA9PT0gaSA/ICh1LmdldCA9IGQuZ2V0LCB1LnNldCA9IGQuc2V0KSA6IDIgPT09IGkgPyB1LnZhbHVlID0gZCA6IDMgPT09IGkgPyB1LmdldCA9IGQgOiA0ID09PSBpICYmICh1LnNldCA9IGQpLCBvID8gMSA9PT0gaSA/IChlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICByZXR1cm4gZC5nZXQuY2FsbChlLCB0KTtcbiAgfSksIGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgIHJldHVybiBkLnNldC5jYWxsKGUsIHQpO1xuICB9KSkgOiAyID09PSBpID8gZS5wdXNoKGQpIDogZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgcmV0dXJuIGQuY2FsbChlLCB0KTtcbiAgfSkgOiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgYSwgdSkpO1xufVxuZnVuY3Rpb24gYXBwbHlNZW1iZXJEZWNzKGUsIHQsIHIpIHtcbiAgZm9yICh2YXIgbiwgYSwgaSwgcyA9IFtdLCBvID0gbmV3IE1hcCgpLCBjID0gbmV3IE1hcCgpLCBsID0gMDsgbCA8IHQubGVuZ3RoOyBsKyspIHtcbiAgICB2YXIgdSA9IHRbbF07XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodSkpIHtcbiAgICAgIHZhciBmLFxuICAgICAgICBkLFxuICAgICAgICBwID0gdVsxXSxcbiAgICAgICAgaCA9IHVbMl0sXG4gICAgICAgIHYgPSB1Lmxlbmd0aCA+IDMsXG4gICAgICAgIHkgPSAxNiAmIHAsXG4gICAgICAgIGcgPSAhISg4ICYgcCksXG4gICAgICAgIG0gPSByO1xuICAgICAgaWYgKHAgJj0gNywgZyA/IChmID0gZSwgMCAhPT0gcCAmJiAoZCA9IGEgPSBhIHx8IFtdKSwgdiAmJiAhaSAmJiAoaSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiBfY2hlY2tJblJIUyh0KSA9PT0gZTtcbiAgICAgIH0pLCBtID0gaSkgOiAoZiA9IGUucHJvdG90eXBlLCAwICE9PSBwICYmIChkID0gbiA9IG4gfHwgW10pKSwgMCAhPT0gcCAmJiAhdikge1xuICAgICAgICB2YXIgYiA9IGcgPyBjIDogbyxcbiAgICAgICAgICBJID0gYi5nZXQoaCkgfHwgMDtcbiAgICAgICAgaWYgKCEwID09PSBJIHx8IDMgPT09IEkgJiYgNCAhPT0gcCB8fCA0ID09PSBJICYmIDMgIT09IHApIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBkZWNvcmF0ZSBhIHB1YmxpYyBtZXRob2QvYWNjZXNzb3IgdGhhdCBoYXMgdGhlIHNhbWUgbmFtZSBhcyBhIHByZXZpb3VzbHkgZGVjb3JhdGVkIHB1YmxpYyBtZXRob2QvYWNjZXNzb3IuIFRoaXMgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgYnkgdGhlIGRlY29yYXRvcnMgcGx1Z2luLiBQcm9wZXJ0eSBuYW1lIHdhczogXCIgKyBoKTtcbiAgICAgICAgYi5zZXQoaCwgISghSSAmJiBwID4gMikgfHwgcCk7XG4gICAgICB9XG4gICAgICBhcHBseU1lbWJlckRlYyhzLCBmLCB1LCB5LCBoLCBwLCBnLCB2LCBkLCBtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHB1c2hJbml0aWFsaXplcnMocywgbiksIHB1c2hJbml0aWFsaXplcnMocywgYSksIHM7XG59XG5mdW5jdGlvbiBwdXNoSW5pdGlhbGl6ZXJzKGUsIHQpIHtcbiAgdCAmJiBlLnB1c2goZnVuY3Rpb24gKGUpIHtcbiAgICBmb3IgKHZhciByID0gMDsgciA8IHQubGVuZ3RoOyByKyspIHRbcl0uY2FsbChlKTtcbiAgICByZXR1cm4gZTtcbiAgfSk7XG59XG5mdW5jdGlvbiBhcHBseUNsYXNzRGVjcyhlLCB0LCByKSB7XG4gIGlmICh0Lmxlbmd0aCkge1xuICAgIGZvciAodmFyIG4gPSBbXSwgYSA9IGUsIGkgPSBlLm5hbWUsIHMgPSByID8gMiA6IDEsIG8gPSB0Lmxlbmd0aCAtIDE7IG8gPj0gMDsgbyAtPSBzKSB7XG4gICAgICB2YXIgYyA9IHtcbiAgICAgICAgdjogITFcbiAgICAgIH07XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbCA9IHRbb10uY2FsbChyID8gdFtvIC0gMV0gOiB2b2lkIDAsIGEsIHtcbiAgICAgICAgICBraW5kOiBcImNsYXNzXCIsXG4gICAgICAgICAgbmFtZTogaSxcbiAgICAgICAgICBhZGRJbml0aWFsaXplcjogY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QobiwgYylcbiAgICAgICAgfSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjLnYgPSAhMDtcbiAgICAgIH1cbiAgICAgIHZvaWQgMCAhPT0gbCAmJiAoYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZSg1LCBsKSwgYSA9IGwpO1xuICAgIH1cbiAgICByZXR1cm4gW2EsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgbi5sZW5ndGg7IGUrKykgbltlXS5jYWxsKGEpO1xuICAgIH1dO1xuICB9XG59XG5mdW5jdGlvbiBfYXBwbHlEZWNzMjMwNShlLCB0LCByLCBuLCBhKSB7XG4gIHJldHVybiB7XG4gICAgZTogYXBwbHlNZW1iZXJEZWNzKGUsIHQsIGEpLFxuICAgIGdldCBjKCkge1xuICAgICAgcmV0dXJuIGFwcGx5Q2xhc3NEZWNzKGUsIHIsIG4pO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIF9hc3luY0dlbmVyYXRvckRlbGVnYXRlKHQpIHtcbiAgdmFyIGUgPSB7fSxcbiAgICBuID0gITE7XG4gIGZ1bmN0aW9uIHB1bXAoZSwgcikge1xuICAgIHJldHVybiBuID0gITAsIHIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAobikge1xuICAgICAgbih0W2VdKHIpKTtcbiAgICB9KSwge1xuICAgICAgZG9uZTogITEsXG4gICAgICB2YWx1ZTogbmV3IF9PdmVybG9hZFlpZWxkKHIsIDEpXG4gICAgfTtcbiAgfVxuICByZXR1cm4gZVtcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLml0ZXJhdG9yIHx8IFwiQEBpdGVyYXRvclwiXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSwgZS5uZXh0ID0gZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gbiA/IChuID0gITEsIHQpIDogcHVtcChcIm5leHRcIiwgdCk7XG4gIH0sIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC50aHJvdyAmJiAoZS50aHJvdyA9IGZ1bmN0aW9uICh0KSB7XG4gICAgaWYgKG4pIHRocm93IG4gPSAhMSwgdDtcbiAgICByZXR1cm4gcHVtcChcInRocm93XCIsIHQpO1xuICB9KSwgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0LnJldHVybiAmJiAoZS5yZXR1cm4gPSBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiBuID8gKG4gPSAhMSwgdCkgOiBwdW1wKFwicmV0dXJuXCIsIHQpO1xuICB9KSwgZTtcbn1cbmZ1bmN0aW9uIF9hc3luY0l0ZXJhdG9yKHIpIHtcbiAgdmFyIG4sXG4gICAgdCxcbiAgICBvLFxuICAgIGUgPSAyO1xuICBmb3IgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIFN5bWJvbCAmJiAodCA9IFN5bWJvbC5hc3luY0l0ZXJhdG9yLCBvID0gU3ltYm9sLml0ZXJhdG9yKTsgZS0tOykge1xuICAgIGlmICh0ICYmIG51bGwgIT0gKG4gPSByW3RdKSkgcmV0dXJuIG4uY2FsbChyKTtcbiAgICBpZiAobyAmJiBudWxsICE9IChuID0gcltvXSkpIHJldHVybiBuZXcgQXN5bmNGcm9tU3luY0l0ZXJhdG9yKG4uY2FsbChyKSk7XG4gICAgdCA9IFwiQEBhc3luY0l0ZXJhdG9yXCIsIG8gPSBcIkBAaXRlcmF0b3JcIjtcbiAgfVxuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGlzIG5vdCBhc3luYyBpdGVyYWJsZVwiKTtcbn1cbmZ1bmN0aW9uIEFzeW5jRnJvbVN5bmNJdGVyYXRvcihyKSB7XG4gIGZ1bmN0aW9uIEFzeW5jRnJvbVN5bmNJdGVyYXRvckNvbnRpbnVhdGlvbihyKSB7XG4gICAgaWYgKE9iamVjdChyKSAhPT0gcikgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IociArIFwiIGlzIG5vdCBhbiBvYmplY3QuXCIpKTtcbiAgICB2YXIgbiA9IHIuZG9uZTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUpLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiByLFxuICAgICAgICBkb25lOiBuXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBBc3luY0Zyb21TeW5jSXRlcmF0b3IgPSBmdW5jdGlvbiAocikge1xuICAgIHRoaXMucyA9IHIsIHRoaXMubiA9IHIubmV4dDtcbiAgfSwgQXN5bmNGcm9tU3luY0l0ZXJhdG9yLnByb3RvdHlwZSA9IHtcbiAgICBzOiBudWxsLFxuICAgIG46IG51bGwsXG4gICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIEFzeW5jRnJvbVN5bmNJdGVyYXRvckNvbnRpbnVhdGlvbih0aGlzLm4uYXBwbHkodGhpcy5zLCBhcmd1bWVudHMpKTtcbiAgICB9LFxuICAgIHJldHVybjogZnVuY3Rpb24gKHIpIHtcbiAgICAgIHZhciBuID0gdGhpcy5zLnJldHVybjtcbiAgICAgIHJldHVybiB2b2lkIDAgPT09IG4gPyBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgZG9uZTogITBcbiAgICAgIH0pIDogQXN5bmNGcm9tU3luY0l0ZXJhdG9yQ29udGludWF0aW9uKG4uYXBwbHkodGhpcy5zLCBhcmd1bWVudHMpKTtcbiAgICB9LFxuICAgIHRocm93OiBmdW5jdGlvbiAocikge1xuICAgICAgdmFyIG4gPSB0aGlzLnMucmV0dXJuO1xuICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gbiA/IFByb21pc2UucmVqZWN0KHIpIDogQXN5bmNGcm9tU3luY0l0ZXJhdG9yQ29udGludWF0aW9uKG4uYXBwbHkodGhpcy5zLCBhcmd1bWVudHMpKTtcbiAgICB9XG4gIH0sIG5ldyBBc3luY0Zyb21TeW5jSXRlcmF0b3Iocik7XG59XG5mdW5jdGlvbiBfYXdhaXRBc3luY0dlbmVyYXRvcihlKSB7XG4gIHJldHVybiBuZXcgX092ZXJsb2FkWWllbGQoZSwgMCk7XG59XG5mdW5jdGlvbiBfY2hlY2tJblJIUyhlKSB7XG4gIGlmIChPYmplY3QoZSkgIT09IGUpIHRocm93IFR5cGVFcnJvcihcInJpZ2h0LWhhbmQgc2lkZSBvZiAnaW4nIHNob3VsZCBiZSBhbiBvYmplY3QsIGdvdCBcIiArIChudWxsICE9PSBlID8gdHlwZW9mIGUgOiBcIm51bGxcIikpO1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIF9kZWZpbmVBY2Nlc3NvcihlLCByLCBuLCB0KSB7XG4gIHZhciBjID0ge1xuICAgIGNvbmZpZ3VyYWJsZTogITAsXG4gICAgZW51bWVyYWJsZTogITBcbiAgfTtcbiAgcmV0dXJuIGNbZV0gPSB0LCBPYmplY3QuZGVmaW5lUHJvcGVydHkociwgbiwgYyk7XG59XG5mdW5jdGlvbiBkaXNwb3NlX1N1cHByZXNzZWRFcnJvcihyLCBlKSB7XG4gIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPyBkaXNwb3NlX1N1cHByZXNzZWRFcnJvciA9IFN1cHByZXNzZWRFcnJvciA6IChkaXNwb3NlX1N1cHByZXNzZWRFcnJvciA9IGZ1bmN0aW9uIChyLCBlKSB7XG4gICAgdGhpcy5zdXBwcmVzc2VkID0gciwgdGhpcy5lcnJvciA9IGUsIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgfSwgZGlzcG9zZV9TdXBwcmVzc2VkRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IGRpc3Bvc2VfU3VwcHJlc3NlZEVycm9yLFxuICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgY29uZmlndXJhYmxlOiAhMFxuICAgIH1cbiAgfSkpLCBuZXcgZGlzcG9zZV9TdXBwcmVzc2VkRXJyb3IociwgZSk7XG59XG5mdW5jdGlvbiBfZGlzcG9zZShyLCBlLCBzKSB7XG4gIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgZm9yICg7IHIubGVuZ3RoID4gMDspIHRyeSB7XG4gICAgICB2YXIgbyA9IHIucG9wKCksXG4gICAgICAgIHAgPSBvLmQuY2FsbChvLnYpO1xuICAgICAgaWYgKG8uYSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwKS50aGVuKG5leHQsIGVycik7XG4gICAgfSBjYXRjaCAocikge1xuICAgICAgcmV0dXJuIGVycihyKTtcbiAgICB9XG4gICAgaWYgKHMpIHRocm93IGU7XG4gIH1cbiAgZnVuY3Rpb24gZXJyKHIpIHtcbiAgICByZXR1cm4gZSA9IHMgPyBuZXcgZGlzcG9zZV9TdXBwcmVzc2VkRXJyb3IociwgZSkgOiByLCBzID0gITAsIG5leHQoKTtcbiAgfVxuICByZXR1cm4gbmV4dCgpO1xufVxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGwpIHtcbiAgdmFyIHQgPSBudWxsID09IHIgPyBudWxsIDogXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgU3ltYm9sICYmIHJbU3ltYm9sLml0ZXJhdG9yXSB8fCByW1wiQEBpdGVyYXRvclwiXTtcbiAgaWYgKG51bGwgIT0gdCkge1xuICAgIHZhciBlLFxuICAgICAgbixcbiAgICAgIGksXG4gICAgICB1LFxuICAgICAgYSA9IFtdLFxuICAgICAgZiA9ICEwLFxuICAgICAgbyA9ICExO1xuICAgIHRyeSB7XG4gICAgICBpZiAoaSA9ICh0ID0gdC5jYWxsKHIpKS5uZXh0LCAwID09PSBsKSB7XG4gICAgICAgIGlmIChPYmplY3QodCkgIT09IHQpIHJldHVybjtcbiAgICAgICAgZiA9ICExO1xuICAgICAgfSBlbHNlIGZvciAoOyAhKGYgPSAoZSA9IGkuY2FsbCh0KSkuZG9uZSkgJiYgKGEucHVzaChlLnZhbHVlKSwgYS5sZW5ndGggIT09IGwpOyBmID0gITApO1xuICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgIG8gPSAhMCwgbiA9IHI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghZiAmJiBudWxsICE9IHQucmV0dXJuICYmICh1ID0gdC5yZXR1cm4oKSwgT2JqZWN0KHUpICE9PSB1KSkgcmV0dXJuO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKG8pIHRocm93IG47XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhO1xuICB9XG59XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXRMb29zZShlLCByKSB7XG4gIHZhciB0ID0gZSAmJiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgU3ltYm9sICYmIGVbU3ltYm9sLml0ZXJhdG9yXSB8fCBlW1wiQEBpdGVyYXRvclwiXSk7XG4gIGlmIChudWxsICE9IHQpIHtcbiAgICB2YXIgbyxcbiAgICAgIGwgPSBbXTtcbiAgICBmb3IgKHQgPSB0LmNhbGwoZSk7IGUubGVuZ3RoIDwgciAmJiAhKG8gPSB0Lm5leHQoKSkuZG9uZTspIGwucHVzaChvLnZhbHVlKTtcbiAgICByZXR1cm4gbDtcbiAgfVxufVxudmFyIFJFQUNUX0VMRU1FTlRfVFlQRTtcbmZ1bmN0aW9uIF9qc3goZSwgciwgRSwgbCkge1xuICBSRUFDVF9FTEVNRU5UX1RZUEUgfHwgKFJFQUNUX0VMRU1FTlRfVFlQRSA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC5mb3IgJiYgU3ltYm9sLmZvcihcInJlYWN0LmVsZW1lbnRcIikgfHwgNjAxMDMpO1xuICB2YXIgbyA9IGUgJiYgZS5kZWZhdWx0UHJvcHMsXG4gICAgbiA9IGFyZ3VtZW50cy5sZW5ndGggLSAzO1xuICBpZiAociB8fCAwID09PSBuIHx8IChyID0ge1xuICAgIGNoaWxkcmVuOiB2b2lkIDBcbiAgfSksIDEgPT09IG4pIHIuY2hpbGRyZW4gPSBsO2Vsc2UgaWYgKG4gPiAxKSB7XG4gICAgZm9yICh2YXIgdCA9IG5ldyBBcnJheShuKSwgZiA9IDA7IGYgPCBuOyBmKyspIHRbZl0gPSBhcmd1bWVudHNbZiArIDNdO1xuICAgIHIuY2hpbGRyZW4gPSB0O1xuICB9XG4gIGlmIChyICYmIG8pIGZvciAodmFyIGkgaW4gbykgdm9pZCAwID09PSByW2ldICYmIChyW2ldID0gb1tpXSk7ZWxzZSByIHx8IChyID0gbyB8fCB7fSk7XG4gIHJldHVybiB7XG4gICAgJCR0eXBlb2Y6IFJFQUNUX0VMRU1FTlRfVFlQRSxcbiAgICB0eXBlOiBlLFxuICAgIGtleTogdm9pZCAwID09PSBFID8gbnVsbCA6IFwiXCIgKyBFLFxuICAgIHJlZjogbnVsbCxcbiAgICBwcm9wczogcixcbiAgICBfb3duZXI6IG51bGxcbiAgfTtcbn1cbmZ1bmN0aW9uIG93bktleXMoZSwgcikge1xuICB2YXIgdCA9IE9iamVjdC5rZXlzKGUpO1xuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtcbiAgICByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHtcbiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7XG4gICAgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7XG4gIH1cbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMihlKSB7XG4gIGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7XG4gICAgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9O1xuICAgIHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7XG4gICAgICBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7XG4gICAgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBfcmVnZW5lcmF0b3JSdW50aW1lKCkge1xuICBcInVzZSBzdHJpY3RcIjsgLyohIHJlZ2VuZXJhdG9yLXJ1bnRpbWUgLS0gQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuIC0tIGxpY2Vuc2UgKE1JVCk6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9ibG9iL21haW4vTElDRU5TRSAqL1xuICBfcmVnZW5lcmF0b3JSdW50aW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBlO1xuICB9O1xuICB2YXIgdCxcbiAgICBlID0ge30sXG4gICAgciA9IE9iamVjdC5wcm90b3R5cGUsXG4gICAgbiA9IHIuaGFzT3duUHJvcGVydHksXG4gICAgbyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB8fCBmdW5jdGlvbiAodCwgZSwgcikge1xuICAgICAgdFtlXSA9IHIudmFsdWU7XG4gICAgfSxcbiAgICBpID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgPyBTeW1ib2wgOiB7fSxcbiAgICBhID0gaS5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIixcbiAgICBjID0gaS5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCIsXG4gICAgdSA9IGkudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG4gIGZ1bmN0aW9uIGRlZmluZSh0LCBlLCByKSB7XG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBlLCB7XG4gICAgICB2YWx1ZTogcixcbiAgICAgIGVudW1lcmFibGU6ICEwLFxuICAgICAgY29uZmlndXJhYmxlOiAhMCxcbiAgICAgIHdyaXRhYmxlOiAhMFxuICAgIH0pLCB0W2VdO1xuICB9XG4gIHRyeSB7XG4gICAgZGVmaW5lKHt9LCBcIlwiKTtcbiAgfSBjYXRjaCAodCkge1xuICAgIGRlZmluZSA9IGZ1bmN0aW9uICh0LCBlLCByKSB7XG4gICAgICByZXR1cm4gdFtlXSA9IHI7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiB3cmFwKHQsIGUsIHIsIG4pIHtcbiAgICB2YXIgaSA9IGUgJiYgZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBlIDogR2VuZXJhdG9yLFxuICAgICAgYSA9IE9iamVjdC5jcmVhdGUoaS5wcm90b3R5cGUpLFxuICAgICAgYyA9IG5ldyBDb250ZXh0KG4gfHwgW10pO1xuICAgIHJldHVybiBvKGEsIFwiX2ludm9rZVwiLCB7XG4gICAgICB2YWx1ZTogbWFrZUludm9rZU1ldGhvZCh0LCByLCBjKVxuICAgIH0pLCBhO1xuICB9XG4gIGZ1bmN0aW9uIHRyeUNhdGNoKHQsIGUsIHIpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJub3JtYWxcIixcbiAgICAgICAgYXJnOiB0LmNhbGwoZSwgcilcbiAgICAgIH07XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJ0aHJvd1wiLFxuICAgICAgICBhcmc6IHRcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIGUud3JhcCA9IHdyYXA7XG4gIHZhciBoID0gXCJzdXNwZW5kZWRTdGFydFwiLFxuICAgIGwgPSBcInN1c3BlbmRlZFlpZWxkXCIsXG4gICAgZiA9IFwiZXhlY3V0aW5nXCIsXG4gICAgcyA9IFwiY29tcGxldGVkXCIsXG4gICAgeSA9IHt9O1xuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cbiAgdmFyIHAgPSB7fTtcbiAgZGVmaW5lKHAsIGEsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG4gIHZhciBkID0gT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICAgIHYgPSBkICYmIGQoZCh2YWx1ZXMoW10pKSk7XG4gIHYgJiYgdiAhPT0gciAmJiBuLmNhbGwodiwgYSkgJiYgKHAgPSB2KTtcbiAgdmFyIGcgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPSBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwKTtcbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHQpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgZGVmaW5lKHQsIGUsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UoZSwgdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKHQsIGUpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UociwgbywgaSwgYSkge1xuICAgICAgdmFyIGMgPSB0cnlDYXRjaCh0W3JdLCB0LCBvKTtcbiAgICAgIGlmIChcInRocm93XCIgIT09IGMudHlwZSkge1xuICAgICAgICB2YXIgdSA9IGMuYXJnLFxuICAgICAgICAgIGggPSB1LnZhbHVlO1xuICAgICAgICByZXR1cm4gaCAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBoICYmIG4uY2FsbChoLCBcIl9fYXdhaXRcIikgPyBlLnJlc29sdmUoaC5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB0LCBpLCBhKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCB0LCBpLCBhKTtcbiAgICAgICAgfSkgOiBlLnJlc29sdmUoaCkudGhlbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHUudmFsdWUgPSB0LCBpKHUpO1xuICAgICAgICB9LCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCB0LCBpLCBhKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBhKGMuYXJnKTtcbiAgICB9XG4gICAgdmFyIHI7XG4gICAgbyh0aGlzLCBcIl9pbnZva2VcIiwge1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uICh0LCBuKSB7XG4gICAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICAgIHJldHVybiBuZXcgZShmdW5jdGlvbiAoZSwgcikge1xuICAgICAgICAgICAgaW52b2tlKHQsIG4sIGUsIHIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByID0gciA/IHIudGhlbihjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZywgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcpIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGUsIHIsIG4pIHtcbiAgICB2YXIgbyA9IGg7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgICBpZiAobyA9PT0gZikgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIGlmIChvID09PSBzKSB7XG4gICAgICAgIGlmIChcInRocm93XCIgPT09IGkpIHRocm93IGE7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsdWU6IHQsXG4gICAgICAgICAgZG9uZTogITBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGZvciAobi5tZXRob2QgPSBpLCBuLmFyZyA9IGE7Oykge1xuICAgICAgICB2YXIgYyA9IG4uZGVsZWdhdGU7XG4gICAgICAgIGlmIChjKSB7XG4gICAgICAgICAgdmFyIHUgPSBtYXliZUludm9rZURlbGVnYXRlKGMsIG4pO1xuICAgICAgICAgIGlmICh1KSB7XG4gICAgICAgICAgICBpZiAodSA9PT0geSkgY29udGludWU7XG4gICAgICAgICAgICByZXR1cm4gdTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwibmV4dFwiID09PSBuLm1ldGhvZCkgbi5zZW50ID0gbi5fc2VudCA9IG4uYXJnO2Vsc2UgaWYgKFwidGhyb3dcIiA9PT0gbi5tZXRob2QpIHtcbiAgICAgICAgICBpZiAobyA9PT0gaCkgdGhyb3cgbyA9IHMsIG4uYXJnO1xuICAgICAgICAgIG4uZGlzcGF0Y2hFeGNlcHRpb24obi5hcmcpO1xuICAgICAgICB9IGVsc2UgXCJyZXR1cm5cIiA9PT0gbi5tZXRob2QgJiYgbi5hYnJ1cHQoXCJyZXR1cm5cIiwgbi5hcmcpO1xuICAgICAgICBvID0gZjtcbiAgICAgICAgdmFyIHAgPSB0cnlDYXRjaChlLCByLCBuKTtcbiAgICAgICAgaWYgKFwibm9ybWFsXCIgPT09IHAudHlwZSkge1xuICAgICAgICAgIGlmIChvID0gbi5kb25lID8gcyA6IGwsIHAuYXJnID09PSB5KSBjb250aW51ZTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHAuYXJnLFxuICAgICAgICAgICAgZG9uZTogbi5kb25lXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBcInRocm93XCIgPT09IHAudHlwZSAmJiAobyA9IHMsIG4ubWV0aG9kID0gXCJ0aHJvd1wiLCBuLmFyZyA9IHAuYXJnKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZSwgcikge1xuICAgIHZhciBuID0gci5tZXRob2QsXG4gICAgICBvID0gZS5pdGVyYXRvcltuXTtcbiAgICBpZiAobyA9PT0gdCkgcmV0dXJuIHIuZGVsZWdhdGUgPSBudWxsLCBcInRocm93XCIgPT09IG4gJiYgZS5pdGVyYXRvci5yZXR1cm4gJiYgKHIubWV0aG9kID0gXCJyZXR1cm5cIiwgci5hcmcgPSB0LCBtYXliZUludm9rZURlbGVnYXRlKGUsIHIpLCBcInRocm93XCIgPT09IHIubWV0aG9kKSB8fCBcInJldHVyblwiICE9PSBuICYmIChyLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBuZXcgVHlwZUVycm9yKFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAnXCIgKyBuICsgXCInIG1ldGhvZFwiKSksIHk7XG4gICAgdmFyIGkgPSB0cnlDYXRjaChvLCBlLml0ZXJhdG9yLCByLmFyZyk7XG4gICAgaWYgKFwidGhyb3dcIiA9PT0gaS50eXBlKSByZXR1cm4gci5tZXRob2QgPSBcInRocm93XCIsIHIuYXJnID0gaS5hcmcsIHIuZGVsZWdhdGUgPSBudWxsLCB5O1xuICAgIHZhciBhID0gaS5hcmc7XG4gICAgcmV0dXJuIGEgPyBhLmRvbmUgPyAocltlLnJlc3VsdE5hbWVdID0gYS52YWx1ZSwgci5uZXh0ID0gZS5uZXh0TG9jLCBcInJldHVyblwiICE9PSByLm1ldGhvZCAmJiAoci5tZXRob2QgPSBcIm5leHRcIiwgci5hcmcgPSB0KSwgci5kZWxlZ2F0ZSA9IG51bGwsIHkpIDogYSA6IChyLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBuZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIiksIHIuZGVsZWdhdGUgPSBudWxsLCB5KTtcbiAgfVxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkodCkge1xuICAgIHZhciBlID0ge1xuICAgICAgdHJ5TG9jOiB0WzBdXG4gICAgfTtcbiAgICAxIGluIHQgJiYgKGUuY2F0Y2hMb2MgPSB0WzFdKSwgMiBpbiB0ICYmIChlLmZpbmFsbHlMb2MgPSB0WzJdLCBlLmFmdGVyTG9jID0gdFszXSksIHRoaXMudHJ5RW50cmllcy5wdXNoKGUpO1xuICB9XG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkodCkge1xuICAgIHZhciBlID0gdC5jb21wbGV0aW9uIHx8IHt9O1xuICAgIGUudHlwZSA9IFwibm9ybWFsXCIsIGRlbGV0ZSBlLmFyZywgdC5jb21wbGV0aW9uID0gZTtcbiAgfVxuICBmdW5jdGlvbiBDb250ZXh0KHQpIHtcbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbe1xuICAgICAgdHJ5TG9jOiBcInJvb3RcIlxuICAgIH1dLCB0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKSwgdGhpcy5yZXNldCghMCk7XG4gIH1cbiAgZnVuY3Rpb24gdmFsdWVzKGUpIHtcbiAgICBpZiAoZSB8fCBcIlwiID09PSBlKSB7XG4gICAgICB2YXIgciA9IGVbYV07XG4gICAgICBpZiAocikgcmV0dXJuIHIuY2FsbChlKTtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUubmV4dCkgcmV0dXJuIGU7XG4gICAgICBpZiAoIWlzTmFOKGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgbyA9IC0xLFxuICAgICAgICAgIGkgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgICAgZm9yICg7ICsrbyA8IGUubGVuZ3RoOykgaWYgKG4uY2FsbChlLCBvKSkgcmV0dXJuIG5leHQudmFsdWUgPSBlW29dLCBuZXh0LmRvbmUgPSAhMSwgbmV4dDtcbiAgICAgICAgICAgIHJldHVybiBuZXh0LnZhbHVlID0gdCwgbmV4dC5kb25lID0gITAsIG5leHQ7XG4gICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGkubmV4dCA9IGk7XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IodHlwZW9mIGUgKyBcIiBpcyBub3QgaXRlcmFibGVcIik7XG4gIH1cbiAgcmV0dXJuIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCBvKGcsIFwiY29uc3RydWN0b3JcIiwge1xuICAgIHZhbHVlOiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSxcbiAgICBjb25maWd1cmFibGU6ICEwXG4gIH0pLCBvKEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCBcImNvbnN0cnVjdG9yXCIsIHtcbiAgICB2YWx1ZTogR2VuZXJhdG9yRnVuY3Rpb24sXG4gICAgY29uZmlndXJhYmxlOiAhMFxuICB9KSwgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBkZWZpbmUoR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIHUsIFwiR2VuZXJhdG9yRnVuY3Rpb25cIiksIGUuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uICh0KSB7XG4gICAgdmFyIGUgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQgJiYgdC5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gISFlICYmIChlID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIgPT09IChlLmRpc3BsYXlOYW1lIHx8IGUubmFtZSkpO1xuICB9LCBlLm1hcmsgPSBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YodCwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpIDogKHQuX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIGRlZmluZSh0LCB1LCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIpKSwgdC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGcpLCB0O1xuICB9LCBlLmF3cmFwID0gZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgX19hd2FpdDogdFxuICAgIH07XG4gIH0sIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSksIGRlZmluZShBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSwgYywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KSwgZS5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvciwgZS5hc3luYyA9IGZ1bmN0aW9uICh0LCByLCBuLCBvLCBpKSB7XG4gICAgdm9pZCAwID09PSBpICYmIChpID0gUHJvbWlzZSk7XG4gICAgdmFyIGEgPSBuZXcgQXN5bmNJdGVyYXRvcih3cmFwKHQsIHIsIG4sIG8pLCBpKTtcbiAgICByZXR1cm4gZS5pc0dlbmVyYXRvckZ1bmN0aW9uKHIpID8gYSA6IGEubmV4dCgpLnRoZW4oZnVuY3Rpb24gKHQpIHtcbiAgICAgIHJldHVybiB0LmRvbmUgPyB0LnZhbHVlIDogYS5uZXh0KCk7XG4gICAgfSk7XG4gIH0sIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhnKSwgZGVmaW5lKGcsIHUsIFwiR2VuZXJhdG9yXCIpLCBkZWZpbmUoZywgYSwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KSwgZGVmaW5lKGcsIFwidG9TdHJpbmdcIiwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9KSwgZS5rZXlzID0gZnVuY3Rpb24gKHQpIHtcbiAgICB2YXIgZSA9IE9iamVjdCh0KSxcbiAgICAgIHIgPSBbXTtcbiAgICBmb3IgKHZhciBuIGluIGUpIHIucHVzaChuKTtcbiAgICByZXR1cm4gci5yZXZlcnNlKCksIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICBmb3IgKDsgci5sZW5ndGg7KSB7XG4gICAgICAgIHZhciB0ID0gci5wb3AoKTtcbiAgICAgICAgaWYgKHQgaW4gZSkgcmV0dXJuIG5leHQudmFsdWUgPSB0LCBuZXh0LmRvbmUgPSAhMSwgbmV4dDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXh0LmRvbmUgPSAhMCwgbmV4dDtcbiAgICB9O1xuICB9LCBlLnZhbHVlcyA9IHZhbHVlcywgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG4gICAgcmVzZXQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAodGhpcy5wcmV2ID0gMCwgdGhpcy5uZXh0ID0gMCwgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHQsIHRoaXMuZG9uZSA9ICExLCB0aGlzLmRlbGVnYXRlID0gbnVsbCwgdGhpcy5tZXRob2QgPSBcIm5leHRcIiwgdGhpcy5hcmcgPSB0LCB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KSwgIWUpIGZvciAodmFyIHIgaW4gdGhpcykgXCJ0XCIgPT09IHIuY2hhckF0KDApICYmIG4uY2FsbCh0aGlzLCByKSAmJiAhaXNOYU4oK3Iuc2xpY2UoMSkpICYmICh0aGlzW3JdID0gdCk7XG4gICAgfSxcbiAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmRvbmUgPSAhMDtcbiAgICAgIHZhciB0ID0gdGhpcy50cnlFbnRyaWVzWzBdLmNvbXBsZXRpb247XG4gICAgICBpZiAoXCJ0aHJvd1wiID09PSB0LnR5cGUpIHRocm93IHQuYXJnO1xuICAgICAgcmV0dXJuIHRoaXMucnZhbDtcbiAgICB9LFxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKHRoaXMuZG9uZSkgdGhyb3cgZTtcbiAgICAgIHZhciByID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShuLCBvKSB7XG4gICAgICAgIHJldHVybiBhLnR5cGUgPSBcInRocm93XCIsIGEuYXJnID0gZSwgci5uZXh0ID0gbiwgbyAmJiAoci5tZXRob2QgPSBcIm5leHRcIiwgci5hcmcgPSB0KSwgISFvO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgbyA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBvID49IDA7IC0tbykge1xuICAgICAgICB2YXIgaSA9IHRoaXMudHJ5RW50cmllc1tvXSxcbiAgICAgICAgICBhID0gaS5jb21wbGV0aW9uO1xuICAgICAgICBpZiAoXCJyb290XCIgPT09IGkudHJ5TG9jKSByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuICAgICAgICBpZiAoaS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGMgPSBuLmNhbGwoaSwgXCJjYXRjaExvY1wiKSxcbiAgICAgICAgICAgIHUgPSBuLmNhbGwoaSwgXCJmaW5hbGx5TG9jXCIpO1xuICAgICAgICAgIGlmIChjICYmIHUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBpLmNhdGNoTG9jKSByZXR1cm4gaGFuZGxlKGkuY2F0Y2hMb2MsICEwKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBpLmZpbmFsbHlMb2MpIHJldHVybiBoYW5kbGUoaS5maW5hbGx5TG9jKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBpLmNhdGNoTG9jKSByZXR1cm4gaGFuZGxlKGkuY2F0Y2hMb2MsICEwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF1KSB0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBpLmZpbmFsbHlMb2MpIHJldHVybiBoYW5kbGUoaS5maW5hbGx5TG9jKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGFicnVwdDogZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgIGZvciAodmFyIHIgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgciA+PSAwOyAtLXIpIHtcbiAgICAgICAgdmFyIG8gPSB0aGlzLnRyeUVudHJpZXNbcl07XG4gICAgICAgIGlmIChvLnRyeUxvYyA8PSB0aGlzLnByZXYgJiYgbi5jYWxsKG8sIFwiZmluYWxseUxvY1wiKSAmJiB0aGlzLnByZXYgPCBvLmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB2YXIgaSA9IG87XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGkgJiYgKFwiYnJlYWtcIiA9PT0gdCB8fCBcImNvbnRpbnVlXCIgPT09IHQpICYmIGkudHJ5TG9jIDw9IGUgJiYgZSA8PSBpLmZpbmFsbHlMb2MgJiYgKGkgPSBudWxsKTtcbiAgICAgIHZhciBhID0gaSA/IGkuY29tcGxldGlvbiA6IHt9O1xuICAgICAgcmV0dXJuIGEudHlwZSA9IHQsIGEuYXJnID0gZSwgaSA/ICh0aGlzLm1ldGhvZCA9IFwibmV4dFwiLCB0aGlzLm5leHQgPSBpLmZpbmFsbHlMb2MsIHkpIDogdGhpcy5jb21wbGV0ZShhKTtcbiAgICB9LFxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAodCwgZSkge1xuICAgICAgaWYgKFwidGhyb3dcIiA9PT0gdC50eXBlKSB0aHJvdyB0LmFyZztcbiAgICAgIHJldHVybiBcImJyZWFrXCIgPT09IHQudHlwZSB8fCBcImNvbnRpbnVlXCIgPT09IHQudHlwZSA/IHRoaXMubmV4dCA9IHQuYXJnIDogXCJyZXR1cm5cIiA9PT0gdC50eXBlID8gKHRoaXMucnZhbCA9IHRoaXMuYXJnID0gdC5hcmcsIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIiwgdGhpcy5uZXh0ID0gXCJlbmRcIikgOiBcIm5vcm1hbFwiID09PSB0LnR5cGUgJiYgZSAmJiAodGhpcy5uZXh0ID0gZSksIHk7XG4gICAgfSxcbiAgICBmaW5pc2g6IGZ1bmN0aW9uICh0KSB7XG4gICAgICBmb3IgKHZhciBlID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGUgPj0gMDsgLS1lKSB7XG4gICAgICAgIHZhciByID0gdGhpcy50cnlFbnRyaWVzW2VdO1xuICAgICAgICBpZiAoci5maW5hbGx5TG9jID09PSB0KSByZXR1cm4gdGhpcy5jb21wbGV0ZShyLmNvbXBsZXRpb24sIHIuYWZ0ZXJMb2MpLCByZXNldFRyeUVudHJ5KHIpLCB5O1xuICAgICAgfVxuICAgIH0sXG4gICAgY2F0Y2g6IGZ1bmN0aW9uICh0KSB7XG4gICAgICBmb3IgKHZhciBlID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGUgPj0gMDsgLS1lKSB7XG4gICAgICAgIHZhciByID0gdGhpcy50cnlFbnRyaWVzW2VdO1xuICAgICAgICBpZiAoci50cnlMb2MgPT09IHQpIHtcbiAgICAgICAgICB2YXIgbiA9IHIuY29tcGxldGlvbjtcbiAgICAgICAgICBpZiAoXCJ0aHJvd1wiID09PSBuLnR5cGUpIHtcbiAgICAgICAgICAgIHZhciBvID0gbi5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KHIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpO1xuICAgIH0sXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24gKGUsIHIsIG4pIHtcbiAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGUpLFxuICAgICAgICByZXN1bHROYW1lOiByLFxuICAgICAgICBuZXh0TG9jOiBuXG4gICAgICB9LCBcIm5leHRcIiA9PT0gdGhpcy5tZXRob2QgJiYgKHRoaXMuYXJnID0gdCksIHk7XG4gICAgfVxuICB9LCBlO1xufVxuZnVuY3Rpb24gX3R5cGVvZihvKSB7XG4gIFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjtcblxuICByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvO1xuICB9IDogZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbztcbiAgfSwgX3R5cGVvZihvKTtcbn1cbmZ1bmN0aW9uIF91c2luZyhvLCBlLCBuKSB7XG4gIGlmIChudWxsID09IGUpIHJldHVybiBlO1xuICBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcInVzaW5nIGRlY2xhcmF0aW9ucyBjYW4gb25seSBiZSB1c2VkIHdpdGggb2JqZWN0cywgbnVsbCwgb3IgdW5kZWZpbmVkLlwiKTtcbiAgaWYgKG4pIHZhciByID0gZVtTeW1ib2wuYXN5bmNEaXNwb3NlIHx8IFN5bWJvbC5mb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlXCIpXTtcbiAgaWYgKG51bGwgPT0gciAmJiAociA9IGVbU3ltYm9sLmRpc3Bvc2UgfHwgU3ltYm9sLmZvcihcIlN5bWJvbC5kaXNwb3NlXCIpXSksIFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByb3BlcnR5IFtTeW1ib2wuZGlzcG9zZV0gaXMgbm90IGEgZnVuY3Rpb24uXCIpO1xuICByZXR1cm4gby5wdXNoKHtcbiAgICB2OiBlLFxuICAgIGQ6IHIsXG4gICAgYTogblxuICB9KSwgZTtcbn1cbmZ1bmN0aW9uIF93cmFwUmVnRXhwKCkge1xuICBfd3JhcFJlZ0V4cCA9IGZ1bmN0aW9uIChlLCByKSB7XG4gICAgcmV0dXJuIG5ldyBCYWJlbFJlZ0V4cChlLCB2b2lkIDAsIHIpO1xuICB9O1xuICB2YXIgZSA9IFJlZ0V4cC5wcm90b3R5cGUsXG4gICAgciA9IG5ldyBXZWFrTWFwKCk7XG4gIGZ1bmN0aW9uIEJhYmVsUmVnRXhwKGUsIHQsIHApIHtcbiAgICB2YXIgbyA9IG5ldyBSZWdFeHAoZSwgdCk7XG4gICAgcmV0dXJuIHIuc2V0KG8sIHAgfHwgci5nZXQoZSkpLCBfc2V0UHJvdG90eXBlT2YobywgQmFiZWxSZWdFeHAucHJvdG90eXBlKTtcbiAgfVxuICBmdW5jdGlvbiBidWlsZEdyb3VwcyhlLCB0KSB7XG4gICAgdmFyIHAgPSByLmdldCh0KTtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMocCkucmVkdWNlKGZ1bmN0aW9uIChyLCB0KSB7XG4gICAgICB2YXIgbyA9IHBbdF07XG4gICAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2Ygbykgclt0XSA9IGVbb107ZWxzZSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyB2b2lkIDAgPT09IGVbb1tpXV0gJiYgaSArIDEgPCBvLmxlbmd0aDspIGkrKztcbiAgICAgICAgclt0XSA9IGVbb1tpXV07XG4gICAgICB9XG4gICAgICByZXR1cm4gcjtcbiAgICB9LCBPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgfVxuICByZXR1cm4gX2luaGVyaXRzKEJhYmVsUmVnRXhwLCBSZWdFeHApLCBCYWJlbFJlZ0V4cC5wcm90b3R5cGUuZXhlYyA9IGZ1bmN0aW9uIChyKSB7XG4gICAgdmFyIHQgPSBlLmV4ZWMuY2FsbCh0aGlzLCByKTtcbiAgICBpZiAodCkge1xuICAgICAgdC5ncm91cHMgPSBidWlsZEdyb3Vwcyh0LCB0aGlzKTtcbiAgICAgIHZhciBwID0gdC5pbmRpY2VzO1xuICAgICAgcCAmJiAocC5ncm91cHMgPSBidWlsZEdyb3VwcyhwLCB0aGlzKSk7XG4gICAgfVxuICAgIHJldHVybiB0O1xuICB9LCBCYWJlbFJlZ0V4cC5wcm90b3R5cGVbU3ltYm9sLnJlcGxhY2VdID0gZnVuY3Rpb24gKHQsIHApIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgcCkge1xuICAgICAgdmFyIG8gPSByLmdldCh0aGlzKTtcbiAgICAgIHJldHVybiBlW1N5bWJvbC5yZXBsYWNlXS5jYWxsKHRoaXMsIHQsIHAucmVwbGFjZSgvXFwkPChbXj5dKyk+L2csIGZ1bmN0aW9uIChlLCByKSB7XG4gICAgICAgIHZhciB0ID0gb1tyXTtcbiAgICAgICAgcmV0dXJuIFwiJFwiICsgKEFycmF5LmlzQXJyYXkodCkgPyB0LmpvaW4oXCIkXCIpIDogdCk7XG4gICAgICB9KSk7XG4gICAgfVxuICAgIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHApIHtcbiAgICAgIHZhciBpID0gdGhpcztcbiAgICAgIHJldHVybiBlW1N5bWJvbC5yZXBsYWNlXS5jYWxsKHRoaXMsIHQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSBhcmd1bWVudHM7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiICE9IHR5cGVvZiBlW2UubGVuZ3RoIC0gMV0gJiYgKGUgPSBbXS5zbGljZS5jYWxsKGUpKS5wdXNoKGJ1aWxkR3JvdXBzKGUsIGkpKSwgcC5hcHBseSh0aGlzLCBlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZVtTeW1ib2wucmVwbGFjZV0uY2FsbCh0aGlzLCB0LCBwKTtcbiAgfSwgX3dyYXBSZWdFeHAuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cbmZ1bmN0aW9uIF9Bd2FpdFZhbHVlKHZhbHVlKSB7XG4gIHRoaXMud3JhcHBlZCA9IHZhbHVlO1xufVxuZnVuY3Rpb24gX3dyYXBBc3luY0dlbmVyYXRvcihmbikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgX0FzeW5jR2VuZXJhdG9yKGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykge1xuICB0cnkge1xuICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTtcbiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlamVjdChlcnJvcik7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpbmZvLmRvbmUpIHtcbiAgICByZXNvbHZlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7XG4gIH1cbn1cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTtcbiAgICAgIH1cbiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7XG4gICAgfSk7XG4gIH07XG59XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cbmZ1bmN0aW9uIF9kZWZpbmVFbnVtZXJhYmxlUHJvcGVydGllcyhvYmosIGRlc2NzKSB7XG4gIGZvciAodmFyIGtleSBpbiBkZXNjcykge1xuICAgIHZhciBkZXNjID0gZGVzY3Nba2V5XTtcbiAgICBkZXNjLmNvbmZpZ3VyYWJsZSA9IGRlc2MuZW51bWVyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjKSBkZXNjLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIGRlc2MpO1xuICB9XG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgdmFyIG9iamVjdFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGRlc2NzKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iamVjdFN5bWJvbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzeW0gPSBvYmplY3RTeW1ib2xzW2ldO1xuICAgICAgdmFyIGRlc2MgPSBkZXNjc1tzeW1dO1xuICAgICAgZGVzYy5jb25maWd1cmFibGUgPSBkZXNjLmVudW1lcmFibGUgPSB0cnVlO1xuICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjKSBkZXNjLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHN5bSwgZGVzYyk7XG4gICAgfVxuICB9XG4gIHJldHVybiBvYmo7XG59XG5mdW5jdGlvbiBfZGVmYXVsdHMob2JqLCBkZWZhdWx0cykge1xuICB2YXIga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGRlZmF1bHRzKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgdmFyIHZhbHVlID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihkZWZhdWx0cywga2V5KTtcbiAgICBpZiAodmFsdWUgJiYgdmFsdWUuY29uZmlndXJhYmxlICYmIG9ialtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBrZXkgPSBfdG9Qcm9wZXJ0eUtleShrZXkpO1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gX2V4dGVuZHMoKSB7XG4gIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcbiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IE9iamVjdChhcmd1bWVudHNbaV0pIDoge307XG4gICAgdmFyIG93bktleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICAgIGlmICh0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb3duS2V5cy5wdXNoLmFwcGx5KG93bktleXMsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKS5maWx0ZXIoZnVuY3Rpb24gKHN5bSkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIHN5bSkuZW51bWVyYWJsZTtcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgb3duS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtcbiAgfVxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7XG4gIHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzO1xuICBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtcbiAgfTtcbiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTtcbn1cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTtcbn1cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTtcbiAgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTtcbiAgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTtcbiAgdHJ5IHtcbiAgICBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbmZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICBpZiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpKSB7XG4gICAgX2NvbnN0cnVjdCA9IFJlZmxlY3QuY29uc3RydWN0LmJpbmQoKTtcbiAgfSBlbHNlIHtcbiAgICBfY29uc3RydWN0ID0gZnVuY3Rpb24gX2NvbnN0cnVjdChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7XG4gICAgICB2YXIgYSA9IFtudWxsXTtcbiAgICAgIGEucHVzaC5hcHBseShhLCBhcmdzKTtcbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IEZ1bmN0aW9uLmJpbmQuYXBwbHkoUGFyZW50LCBhKTtcbiAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBDb25zdHJ1Y3RvcigpO1xuICAgICAgaWYgKENsYXNzKSBfc2V0UHJvdG90eXBlT2YoaW5zdGFuY2UsIENsYXNzLnByb3RvdHlwZSk7XG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gX2NvbnN0cnVjdC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuZnVuY3Rpb24gX2lzTmF0aXZlRnVuY3Rpb24oZm4pIHtcbiAgcmV0dXJuIEZ1bmN0aW9uLnRvU3RyaW5nLmNhbGwoZm4pLmluZGV4T2YoXCJbbmF0aXZlIGNvZGVdXCIpICE9PSAtMTtcbn1cbmZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpIHtcbiAgdmFyIF9jYWNoZSA9IHR5cGVvZiBNYXAgPT09IFwiZnVuY3Rpb25cIiA/IG5ldyBNYXAoKSA6IHVuZGVmaW5lZDtcbiAgX3dyYXBOYXRpdmVTdXBlciA9IGZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpIHtcbiAgICBpZiAoQ2xhc3MgPT09IG51bGwgfHwgIV9pc05hdGl2ZUZ1bmN0aW9uKENsYXNzKSkgcmV0dXJuIENsYXNzO1xuICAgIGlmICh0eXBlb2YgQ2xhc3MgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIF9jYWNoZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgaWYgKF9jYWNoZS5oYXMoQ2xhc3MpKSByZXR1cm4gX2NhY2hlLmdldChDbGFzcyk7XG4gICAgICBfY2FjaGUuc2V0KENsYXNzLCBXcmFwcGVyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gV3JhcHBlcigpIHtcbiAgICAgIHJldHVybiBfY29uc3RydWN0KENsYXNzLCBhcmd1bWVudHMsIF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3Rvcik7XG4gICAgfVxuICAgIFdyYXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDbGFzcy5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBXcmFwcGVyLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBfc2V0UHJvdG90eXBlT2YoV3JhcHBlciwgQ2xhc3MpO1xuICB9O1xuICByZXR1cm4gX3dyYXBOYXRpdmVTdXBlcihDbGFzcyk7XG59XG5mdW5jdGlvbiBfaW5zdGFuY2VvZihsZWZ0LCByaWdodCkge1xuICBpZiAocmlnaHQgIT0gbnVsbCAmJiB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIHJpZ2h0W1N5bWJvbC5oYXNJbnN0YW5jZV0pIHtcbiAgICByZXR1cm4gISFyaWdodFtTeW1ib2wuaGFzSW5zdGFuY2VdKGxlZnQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsZWZ0IGluc3RhbmNlb2YgcmlnaHQ7XG4gIH1cbn1cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7XG4gICAgZGVmYXVsdDogb2JqXG4gIH07XG59XG5mdW5jdGlvbiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUobm9kZUludGVyb3ApIHtcbiAgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsO1xuICB2YXIgY2FjaGVCYWJlbEludGVyb3AgPSBuZXcgV2Vha01hcCgpO1xuICB2YXIgY2FjaGVOb2RlSW50ZXJvcCA9IG5ldyBXZWFrTWFwKCk7XG4gIHJldHVybiAoX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlID0gZnVuY3Rpb24gKG5vZGVJbnRlcm9wKSB7XG4gICAgcmV0dXJuIG5vZGVJbnRlcm9wID8gY2FjaGVOb2RlSW50ZXJvcCA6IGNhY2hlQmFiZWxJbnRlcm9wO1xuICB9KShub2RlSW50ZXJvcCk7XG59XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmosIG5vZGVJbnRlcm9wKSB7XG4gIGlmICghbm9kZUludGVyb3AgJiYgb2JqICYmIG9iai5fX2VzTW9kdWxlKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG9iaiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRlZmF1bHQ6IG9ialxuICAgIH07XG4gIH1cbiAgdmFyIGNhY2hlID0gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKG5vZGVJbnRlcm9wKTtcbiAgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7XG4gICAgcmV0dXJuIGNhY2hlLmdldChvYmopO1xuICB9XG4gIHZhciBuZXdPYmogPSB7fTtcbiAgdmFyIGhhc1Byb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKGtleSAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgdmFyIGRlc2MgPSBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IG51bGw7XG4gICAgICBpZiAoZGVzYyAmJiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBuZXdPYmouZGVmYXVsdCA9IG9iajtcbiAgaWYgKGNhY2hlKSB7XG4gICAgY2FjaGUuc2V0KG9iaiwgbmV3T2JqKTtcbiAgfVxuICByZXR1cm4gbmV3T2JqO1xufVxuZnVuY3Rpb24gX25ld0Fycm93Q2hlY2soaW5uZXJUaGlzLCBib3VuZFRoaXMpIHtcbiAgaWYgKGlubmVyVGhpcyAhPT0gYm91bmRUaGlzKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBpbnN0YW50aWF0ZSBhbiBhcnJvdyBmdW5jdGlvblwiKTtcbiAgfVxufVxuZnVuY3Rpb24gX29iamVjdERlc3RydWN0dXJpbmdFbXB0eShvYmopIHtcbiAgaWYgKG9iaiA9PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGRlc3RydWN0dXJlIFwiICsgb2JqKTtcbn1cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGtleSA9IHNvdXJjZUtleXNbaV07XG4gICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpO1xuICB2YXIga2V5LCBpO1xuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldO1xuICAgICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7XG4gICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7XG4gIGlmIChzZWxmID09PSB2b2lkIDApIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1cbiAgcmV0dXJuIHNlbGY7XG59XG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG4gIGlmIChjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkge1xuICAgIHJldHVybiBjYWxsO1xuICB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTtcbiAgfVxuICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTtcbn1cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7XG4gIHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpO1xuICByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7XG4gICAgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLFxuICAgICAgcmVzdWx0O1xuICAgIGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7XG4gICAgICB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yO1xuICAgICAgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7XG4gIH07XG59XG5mdW5jdGlvbiBfc3VwZXJQcm9wQmFzZShvYmplY3QsIHByb3BlcnR5KSB7XG4gIHdoaWxlICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7XG4gICAgb2JqZWN0ID0gX2dldFByb3RvdHlwZU9mKG9iamVjdCk7XG4gICAgaWYgKG9iamVjdCA9PT0gbnVsbCkgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIG9iamVjdDtcbn1cbmZ1bmN0aW9uIF9nZXQoKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBSZWZsZWN0LmdldCkge1xuICAgIF9nZXQgPSBSZWZsZWN0LmdldC5iaW5kKCk7XG4gIH0gZWxzZSB7XG4gICAgX2dldCA9IGZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHtcbiAgICAgIHZhciBiYXNlID0gX3N1cGVyUHJvcEJhc2UodGFyZ2V0LCBwcm9wZXJ0eSk7XG4gICAgICBpZiAoIWJhc2UpIHJldHVybjtcbiAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiYXNlLCBwcm9wZXJ0eSk7XG4gICAgICBpZiAoZGVzYy5nZXQpIHtcbiAgICAgICAgcmV0dXJuIGRlc2MuZ2V0LmNhbGwoYXJndW1lbnRzLmxlbmd0aCA8IDMgPyB0YXJnZXQgOiByZWNlaXZlcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVzYy52YWx1ZTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBfZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5mdW5jdGlvbiBzZXQodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUsIHJlY2VpdmVyKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBSZWZsZWN0LnNldCkge1xuICAgIHNldCA9IFJlZmxlY3Quc2V0O1xuICB9IGVsc2Uge1xuICAgIHNldCA9IGZ1bmN0aW9uIHNldCh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgIHZhciBiYXNlID0gX3N1cGVyUHJvcEJhc2UodGFyZ2V0LCBwcm9wZXJ0eSk7XG4gICAgICB2YXIgZGVzYztcbiAgICAgIGlmIChiYXNlKSB7XG4gICAgICAgIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGJhc2UsIHByb3BlcnR5KTtcbiAgICAgICAgaWYgKGRlc2Muc2V0KSB7XG4gICAgICAgICAgZGVzYy5zZXQuY2FsbChyZWNlaXZlciwgdmFsdWUpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKCFkZXNjLndyaXRhYmxlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyZWNlaXZlciwgcHJvcGVydHkpO1xuICAgICAgaWYgKGRlc2MpIHtcbiAgICAgICAgaWYgKCFkZXNjLndyaXRhYmxlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGRlc2MudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlY2VpdmVyLCBwcm9wZXJ0eSwgZGVzYyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfZGVmaW5lUHJvcGVydHkocmVjZWl2ZXIsIHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBzZXQodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUsIHJlY2VpdmVyKTtcbn1cbmZ1bmN0aW9uIF9zZXQodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUsIHJlY2VpdmVyLCBpc1N0cmljdCkge1xuICB2YXIgcyA9IHNldCh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSwgcmVjZWl2ZXIgfHwgdGFyZ2V0KTtcbiAgaWYgKCFzICYmIGlzU3RyaWN0KSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZmFpbGVkIHRvIHNldCBwcm9wZXJ0eScpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoc3RyaW5ncywgcmF3KSB7XG4gIGlmICghcmF3KSB7XG4gICAgcmF3ID0gc3RyaW5ncy5zbGljZSgwKTtcbiAgfVxuICByZXR1cm4gT2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdHJpbmdzLCB7XG4gICAgcmF3OiB7XG4gICAgICB2YWx1ZTogT2JqZWN0LmZyZWV6ZShyYXcpXG4gICAgfVxuICB9KSk7XG59XG5mdW5jdGlvbiBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2Uoc3RyaW5ncywgcmF3KSB7XG4gIGlmICghcmF3KSB7XG4gICAgcmF3ID0gc3RyaW5ncy5zbGljZSgwKTtcbiAgfVxuICBzdHJpbmdzLnJhdyA9IHJhdztcbiAgcmV0dXJuIHN0cmluZ3M7XG59XG5mdW5jdGlvbiBfcmVhZE9ubHlFcnJvcihuYW1lKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJcXFwiXCIgKyBuYW1lICsgXCJcXFwiIGlzIHJlYWQtb25seVwiKTtcbn1cbmZ1bmN0aW9uIF93cml0ZU9ubHlFcnJvcihuYW1lKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJcXFwiXCIgKyBuYW1lICsgXCJcXFwiIGlzIHdyaXRlLW9ubHlcIik7XG59XG5mdW5jdGlvbiBfY2xhc3NOYW1lVERaRXJyb3IobmFtZSkge1xuICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJDbGFzcyBcXFwiXCIgKyBuYW1lICsgXCJcXFwiIGNhbm5vdCBiZSByZWZlcmVuY2VkIGluIGNvbXB1dGVkIHByb3BlcnR5IGtleXMuXCIpO1xufVxuZnVuY3Rpb24gX3RlbXBvcmFsVW5kZWZpbmVkKCkge31cbmZ1bmN0aW9uIF90ZHoobmFtZSkge1xuICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IobmFtZSArIFwiIGlzIG5vdCBkZWZpbmVkIC0gdGVtcG9yYWwgZGVhZCB6b25lXCIpO1xufVxuZnVuY3Rpb24gX3RlbXBvcmFsUmVmKHZhbCwgbmFtZSkge1xuICByZXR1cm4gdmFsID09PSBfdGVtcG9yYWxVbmRlZmluZWQgPyBfdGR6KG5hbWUpIDogdmFsO1xufVxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7XG4gIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7XG59XG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheUxvb3NlKGFyciwgaSkge1xuICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0TG9vc2UoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7XG59XG5mdW5jdGlvbiBfdG9BcnJheShhcnIpIHtcbiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7XG59XG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XG4gIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpO1xufVxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyO1xufVxuZnVuY3Rpb24gX21heWJlQXJyYXlMaWtlKG5leHQsIGFyciwgaSkge1xuICBpZiAoYXJyICYmICFBcnJheS5pc0FycmF5KGFycikgJiYgdHlwZW9mIGFyci5sZW5ndGggPT09IFwibnVtYmVyXCIpIHtcbiAgICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcbiAgICByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBpICE9PSB2b2lkIDAgJiYgaSA8IGxlbiA/IGkgOiBsZW4pO1xuICB9XG4gIHJldHVybiBuZXh0KGFyciwgaSk7XG59XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgaXRlcltTeW1ib2wuaXRlcmF0b3JdICE9IG51bGwgfHwgaXRlcltcIkBAaXRlcmF0b3JcIl0gIT0gbnVsbCkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7XG59XG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7XG4gIGlmICghbykgcmV0dXJuO1xuICBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xuICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XG4gIGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7XG4gIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xuICBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG59XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldO1xuICByZXR1cm4gYXJyMjtcbn1cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHtcbiAgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1tcIkBAaXRlcmF0b3JcIl07XG4gIGlmICghaXQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7XG4gICAgICBpZiAoaXQpIG8gPSBpdDtcbiAgICAgIHZhciBpID0gMDtcbiAgICAgIHZhciBGID0gZnVuY3Rpb24gKCkge307XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzOiBGLFxuICAgICAgICBuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7XG4gICAgICAgICAgICBkb25lOiB0cnVlXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgICB2YWx1ZTogb1tpKytdXG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9LFxuICAgICAgICBmOiBGXG4gICAgICB9O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG4gIH1cbiAgdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLFxuICAgIGRpZEVyciA9IGZhbHNlLFxuICAgIGVycjtcbiAgcmV0dXJuIHtcbiAgICBzOiBmdW5jdGlvbiAoKSB7XG4gICAgICBpdCA9IGl0LmNhbGwobyk7XG4gICAgfSxcbiAgICBuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc3RlcCA9IGl0Lm5leHQoKTtcbiAgICAgIG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7XG4gICAgICByZXR1cm4gc3RlcDtcbiAgICB9LFxuICAgIGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBkaWRFcnIgPSB0cnVlO1xuICAgICAgZXJyID0gZTtcbiAgICB9LFxuICAgIGY6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoZGlkRXJyKSB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkge1xuICB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTtcbiAgaWYgKGl0KSByZXR1cm4gKGl0ID0gaXQuY2FsbChvKSkubmV4dC5iaW5kKGl0KTtcbiAgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikge1xuICAgIGlmIChpdCkgbyA9IGl0O1xuICAgIHZhciBpID0gMDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7XG4gICAgICAgIGRvbmU6IHRydWVcbiAgICAgIH07XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IG9baSsrXVxuICAgICAgfTtcbiAgICB9O1xuICB9XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cbmZ1bmN0aW9uIF9za2lwRmlyc3RHZW5lcmF0b3JOZXh0KGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGl0ID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpdC5uZXh0KCk7XG4gICAgcmV0dXJuIGl0O1xuICB9O1xufVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKGlucHV0LCBoaW50KSB7XG4gIGlmICh0eXBlb2YgaW5wdXQgIT09IFwib2JqZWN0XCIgfHwgaW5wdXQgPT09IG51bGwpIHJldHVybiBpbnB1dDtcbiAgdmFyIHByaW0gPSBpbnB1dFtTeW1ib2wudG9QcmltaXRpdmVdO1xuICBpZiAocHJpbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCBcImRlZmF1bHRcIik7XG4gICAgaWYgKHR5cGVvZiByZXMgIT09IFwib2JqZWN0XCIpIHJldHVybiByZXM7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpO1xuICB9XG4gIHJldHVybiAoaGludCA9PT0gXCJzdHJpbmdcIiA/IFN0cmluZyA6IE51bWJlcikoaW5wdXQpO1xufVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkoYXJnKSB7XG4gIHZhciBrZXkgPSBfdG9QcmltaXRpdmUoYXJnLCBcInN0cmluZ1wiKTtcbiAgcmV0dXJuIHR5cGVvZiBrZXkgPT09IFwic3ltYm9sXCIgPyBrZXkgOiBTdHJpbmcoa2V5KTtcbn1cbmZ1bmN0aW9uIF9pbml0aWFsaXplcldhcm5pbmdIZWxwZXIoZGVzY3JpcHRvciwgY29udGV4dCkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0RlY29yYXRpbmcgY2xhc3MgcHJvcGVydHkgZmFpbGVkLiBQbGVhc2UgZW5zdXJlIHRoYXQgJyArICd0cmFuc2Zvcm0tY2xhc3MtcHJvcGVydGllcyBpcyBlbmFibGVkIGFuZCBydW5zIGFmdGVyIHRoZSBkZWNvcmF0b3JzIHRyYW5zZm9ybS4nKTtcbn1cbmZ1bmN0aW9uIF9pbml0aWFsaXplckRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHksIGRlc2NyaXB0b3IsIGNvbnRleHQpIHtcbiAgaWYgKCFkZXNjcmlwdG9yKSByZXR1cm47XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCB7XG4gICAgZW51bWVyYWJsZTogZGVzY3JpcHRvci5lbnVtZXJhYmxlLFxuICAgIGNvbmZpZ3VyYWJsZTogZGVzY3JpcHRvci5jb25maWd1cmFibGUsXG4gICAgd3JpdGFibGU6IGRlc2NyaXB0b3Iud3JpdGFibGUsXG4gICAgdmFsdWU6IGRlc2NyaXB0b3IuaW5pdGlhbGl6ZXIgPyBkZXNjcmlwdG9yLmluaXRpYWxpemVyLmNhbGwoY29udGV4dCkgOiB2b2lkIDBcbiAgfSk7XG59XG5mdW5jdGlvbiBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKHRhcmdldCwgcHJvcGVydHksIGRlY29yYXRvcnMsIGRlc2NyaXB0b3IsIGNvbnRleHQpIHtcbiAgdmFyIGRlc2MgPSB7fTtcbiAgT2JqZWN0LmtleXMoZGVzY3JpcHRvcikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgZGVzY1trZXldID0gZGVzY3JpcHRvcltrZXldO1xuICB9KTtcbiAgZGVzYy5lbnVtZXJhYmxlID0gISFkZXNjLmVudW1lcmFibGU7XG4gIGRlc2MuY29uZmlndXJhYmxlID0gISFkZXNjLmNvbmZpZ3VyYWJsZTtcbiAgaWYgKCd2YWx1ZScgaW4gZGVzYyB8fCBkZXNjLmluaXRpYWxpemVyKSB7XG4gICAgZGVzYy53cml0YWJsZSA9IHRydWU7XG4gIH1cbiAgZGVzYyA9IGRlY29yYXRvcnMuc2xpY2UoKS5yZXZlcnNlKCkucmVkdWNlKGZ1bmN0aW9uIChkZXNjLCBkZWNvcmF0b3IpIHtcbiAgICByZXR1cm4gZGVjb3JhdG9yKHRhcmdldCwgcHJvcGVydHksIGRlc2MpIHx8IGRlc2M7XG4gIH0sIGRlc2MpO1xuICBpZiAoY29udGV4dCAmJiBkZXNjLmluaXRpYWxpemVyICE9PSB2b2lkIDApIHtcbiAgICBkZXNjLnZhbHVlID0gZGVzYy5pbml0aWFsaXplciA/IGRlc2MuaW5pdGlhbGl6ZXIuY2FsbChjb250ZXh0KSA6IHZvaWQgMDtcbiAgICBkZXNjLmluaXRpYWxpemVyID0gdW5kZWZpbmVkO1xuICB9XG4gIGlmIChkZXNjLmluaXRpYWxpemVyID09PSB2b2lkIDApIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzYyk7XG4gICAgZGVzYyA9IG51bGw7XG4gIH1cbiAgcmV0dXJuIGRlc2M7XG59XG52YXIgaWQgPSAwO1xuZnVuY3Rpb24gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkobmFtZSkge1xuICByZXR1cm4gXCJfX3ByaXZhdGVfXCIgKyBpZCsrICsgXCJfXCIgKyBuYW1lO1xufVxuZnVuY3Rpb24gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHJlY2VpdmVyLCBwcml2YXRlS2V5KSB7XG4gIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlY2VpdmVyLCBwcml2YXRlS2V5KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gdXNlIHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO1xuICB9XG4gIHJldHVybiByZWNlaXZlcjtcbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgcHJpdmF0ZU1hcCkge1xuICB2YXIgZGVzY3JpcHRvciA9IF9jbGFzc0V4dHJhY3RGaWVsZERlc2NyaXB0b3IocmVjZWl2ZXIsIHByaXZhdGVNYXAsIFwiZ2V0XCIpO1xuICByZXR1cm4gX2NsYXNzQXBwbHlEZXNjcmlwdG9yR2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yKTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgcHJpdmF0ZU1hcCwgdmFsdWUpIHtcbiAgdmFyIGRlc2NyaXB0b3IgPSBfY2xhc3NFeHRyYWN0RmllbGREZXNjcmlwdG9yKHJlY2VpdmVyLCBwcml2YXRlTWFwLCBcInNldFwiKTtcbiAgX2NsYXNzQXBwbHlEZXNjcmlwdG9yU2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVGaWVsZERlc3RydWN0dXJlU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwKSB7XG4gIHZhciBkZXNjcmlwdG9yID0gX2NsYXNzRXh0cmFjdEZpZWxkRGVzY3JpcHRvcihyZWNlaXZlciwgcHJpdmF0ZU1hcCwgXCJzZXRcIik7XG4gIHJldHVybiBfY2xhc3NBcHBseURlc2NyaXB0b3JEZXN0cnVjdHVyZVNldChyZWNlaXZlciwgZGVzY3JpcHRvcik7XG59XG5mdW5jdGlvbiBfY2xhc3NFeHRyYWN0RmllbGREZXNjcmlwdG9yKHJlY2VpdmVyLCBwcml2YXRlTWFwLCBhY3Rpb24pIHtcbiAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIFwiICsgYWN0aW9uICsgXCIgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XG4gIH1cbiAgcmV0dXJuIHByaXZhdGVNYXAuZ2V0KHJlY2VpdmVyKTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1N0YXRpY1ByaXZhdGVGaWVsZFNwZWNHZXQocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IsIGRlc2NyaXB0b3IpIHtcbiAgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzKHJlY2VpdmVyLCBjbGFzc0NvbnN0cnVjdG9yKTtcbiAgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljRmllbGREZXNjcmlwdG9yKGRlc2NyaXB0b3IsIFwiZ2V0XCIpO1xuICByZXR1cm4gX2NsYXNzQXBwbHlEZXNjcmlwdG9yR2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yKTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1N0YXRpY1ByaXZhdGVGaWVsZFNwZWNTZXQocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IsIGRlc2NyaXB0b3IsIHZhbHVlKSB7XG4gIF9jbGFzc0NoZWNrUHJpdmF0ZVN0YXRpY0FjY2VzcyhyZWNlaXZlciwgY2xhc3NDb25zdHJ1Y3Rvcik7XG4gIF9jbGFzc0NoZWNrUHJpdmF0ZVN0YXRpY0ZpZWxkRGVzY3JpcHRvcihkZXNjcmlwdG9yLCBcInNldFwiKTtcbiAgX2NsYXNzQXBwbHlEZXNjcmlwdG9yU2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1N0YXRpY1ByaXZhdGVNZXRob2RHZXQocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IsIG1ldGhvZCkge1xuICBfY2xhc3NDaGVja1ByaXZhdGVTdGF0aWNBY2Nlc3MocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IpO1xuICByZXR1cm4gbWV0aG9kO1xufVxuZnVuY3Rpb24gX2NsYXNzU3RhdGljUHJpdmF0ZU1ldGhvZFNldCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcmVhZCBvbmx5IHN0YXRpYyBwcml2YXRlIGZpZWxkXCIpO1xufVxuZnVuY3Rpb24gX2NsYXNzQXBwbHlEZXNjcmlwdG9yR2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yKSB7XG4gIGlmIChkZXNjcmlwdG9yLmdldCkge1xuICAgIHJldHVybiBkZXNjcmlwdG9yLmdldC5jYWxsKHJlY2VpdmVyKTtcbiAgfVxuICByZXR1cm4gZGVzY3JpcHRvci52YWx1ZTtcbn1cbmZ1bmN0aW9uIF9jbGFzc0FwcGx5RGVzY3JpcHRvclNldChyZWNlaXZlciwgZGVzY3JpcHRvciwgdmFsdWUpIHtcbiAgaWYgKGRlc2NyaXB0b3Iuc2V0KSB7XG4gICAgZGVzY3JpcHRvci5zZXQuY2FsbChyZWNlaXZlciwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIGlmICghZGVzY3JpcHRvci53cml0YWJsZSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcmVhZCBvbmx5IHByaXZhdGUgZmllbGRcIik7XG4gICAgfVxuICAgIGRlc2NyaXB0b3IudmFsdWUgPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gX2NsYXNzQXBwbHlEZXNjcmlwdG9yRGVzdHJ1Y3R1cmVTZXQocmVjZWl2ZXIsIGRlc2NyaXB0b3IpIHtcbiAgaWYgKGRlc2NyaXB0b3Iuc2V0KSB7XG4gICAgaWYgKCEoXCJfX2Rlc3RyT2JqXCIgaW4gZGVzY3JpcHRvcikpIHtcbiAgICAgIGRlc2NyaXB0b3IuX19kZXN0ck9iaiA9IHtcbiAgICAgICAgc2V0IHZhbHVlKHYpIHtcbiAgICAgICAgICBkZXNjcmlwdG9yLnNldC5jYWxsKHJlY2VpdmVyLCB2KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGRlc2NyaXB0b3IuX19kZXN0ck9iajtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIWRlc2NyaXB0b3Iud3JpdGFibGUpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHJlYWQgb25seSBwcml2YXRlIGZpZWxkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzY3JpcHRvcjtcbiAgfVxufVxuZnVuY3Rpb24gX2NsYXNzU3RhdGljUHJpdmF0ZUZpZWxkRGVzdHJ1Y3R1cmVTZXQocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IsIGRlc2NyaXB0b3IpIHtcbiAgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzKHJlY2VpdmVyLCBjbGFzc0NvbnN0cnVjdG9yKTtcbiAgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljRmllbGREZXNjcmlwdG9yKGRlc2NyaXB0b3IsIFwic2V0XCIpO1xuICByZXR1cm4gX2NsYXNzQXBwbHlEZXNjcmlwdG9yRGVzdHJ1Y3R1cmVTZXQocmVjZWl2ZXIsIGRlc2NyaXB0b3IpO1xufVxuZnVuY3Rpb24gX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzKHJlY2VpdmVyLCBjbGFzc0NvbnN0cnVjdG9yKSB7XG4gIGlmIChyZWNlaXZlciAhPT0gY2xhc3NDb25zdHJ1Y3Rvcikge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIHN0YXRpYyBhY2Nlc3Mgb2Ygd3JvbmcgcHJvdmVuYW5jZVwiKTtcbiAgfVxufVxuZnVuY3Rpb24gX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljRmllbGREZXNjcmlwdG9yKGRlc2NyaXB0b3IsIGFjdGlvbikge1xuICBpZiAoZGVzY3JpcHRvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBcIiArIGFjdGlvbiArIFwiIHByaXZhdGUgc3RhdGljIGZpZWxkIGJlZm9yZSBpdHMgZGVjbGFyYXRpb25cIik7XG4gIH1cbn1cbmZ1bmN0aW9uIF9kZWNvcmF0ZShkZWNvcmF0b3JzLCBmYWN0b3J5LCBzdXBlckNsYXNzLCBtaXhpbnMpIHtcbiAgdmFyIGFwaSA9IF9nZXREZWNvcmF0b3JzQXBpKCk7XG4gIGlmIChtaXhpbnMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1peGlucy5sZW5ndGg7IGkrKykge1xuICAgICAgYXBpID0gbWl4aW5zW2ldKGFwaSk7XG4gICAgfVxuICB9XG4gIHZhciByID0gZmFjdG9yeShmdW5jdGlvbiBpbml0aWFsaXplKE8pIHtcbiAgICBhcGkuaW5pdGlhbGl6ZUluc3RhbmNlRWxlbWVudHMoTywgZGVjb3JhdGVkLmVsZW1lbnRzKTtcbiAgfSwgc3VwZXJDbGFzcyk7XG4gIHZhciBkZWNvcmF0ZWQgPSBhcGkuZGVjb3JhdGVDbGFzcyhfY29hbGVzY2VDbGFzc0VsZW1lbnRzKHIuZC5tYXAoX2NyZWF0ZUVsZW1lbnREZXNjcmlwdG9yKSksIGRlY29yYXRvcnMpO1xuICBhcGkuaW5pdGlhbGl6ZUNsYXNzRWxlbWVudHMoci5GLCBkZWNvcmF0ZWQuZWxlbWVudHMpO1xuICByZXR1cm4gYXBpLnJ1bkNsYXNzRmluaXNoZXJzKHIuRiwgZGVjb3JhdGVkLmZpbmlzaGVycyk7XG59XG5mdW5jdGlvbiBfZ2V0RGVjb3JhdG9yc0FwaSgpIHtcbiAgX2dldERlY29yYXRvcnNBcGkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFwaTtcbiAgfTtcbiAgdmFyIGFwaSA9IHtcbiAgICBlbGVtZW50c0RlZmluaXRpb25PcmRlcjogW1tcIm1ldGhvZFwiXSwgW1wiZmllbGRcIl1dLFxuICAgIGluaXRpYWxpemVJbnN0YW5jZUVsZW1lbnRzOiBmdW5jdGlvbiAoTywgZWxlbWVudHMpIHtcbiAgICAgIFtcIm1ldGhvZFwiLCBcImZpZWxkXCJdLmZvckVhY2goZnVuY3Rpb24gKGtpbmQpIHtcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgIGlmIChlbGVtZW50LmtpbmQgPT09IGtpbmQgJiYgZWxlbWVudC5wbGFjZW1lbnQgPT09IFwib3duXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lQ2xhc3NFbGVtZW50KE8sIGVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9LFxuICAgIGluaXRpYWxpemVDbGFzc0VsZW1lbnRzOiBmdW5jdGlvbiAoRiwgZWxlbWVudHMpIHtcbiAgICAgIHZhciBwcm90byA9IEYucHJvdG90eXBlO1xuICAgICAgW1wibWV0aG9kXCIsIFwiZmllbGRcIl0uZm9yRWFjaChmdW5jdGlvbiAoa2luZCkge1xuICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgdmFyIHBsYWNlbWVudCA9IGVsZW1lbnQucGxhY2VtZW50O1xuICAgICAgICAgIGlmIChlbGVtZW50LmtpbmQgPT09IGtpbmQgJiYgKHBsYWNlbWVudCA9PT0gXCJzdGF0aWNcIiB8fCBwbGFjZW1lbnQgPT09IFwicHJvdG90eXBlXCIpKSB7XG4gICAgICAgICAgICB2YXIgcmVjZWl2ZXIgPSBwbGFjZW1lbnQgPT09IFwic3RhdGljXCIgPyBGIDogcHJvdG87XG4gICAgICAgICAgICB0aGlzLmRlZmluZUNsYXNzRWxlbWVudChyZWNlaXZlciwgZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICAgIH0sIHRoaXMpO1xuICAgIH0sXG4gICAgZGVmaW5lQ2xhc3NFbGVtZW50OiBmdW5jdGlvbiAocmVjZWl2ZXIsIGVsZW1lbnQpIHtcbiAgICAgIHZhciBkZXNjcmlwdG9yID0gZWxlbWVudC5kZXNjcmlwdG9yO1xuICAgICAgaWYgKGVsZW1lbnQua2luZCA9PT0gXCJmaWVsZFwiKSB7XG4gICAgICAgIHZhciBpbml0aWFsaXplciA9IGVsZW1lbnQuaW5pdGlhbGl6ZXI7XG4gICAgICAgIGRlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgZW51bWVyYWJsZTogZGVzY3JpcHRvci5lbnVtZXJhYmxlLFxuICAgICAgICAgIHdyaXRhYmxlOiBkZXNjcmlwdG9yLndyaXRhYmxlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZGVzY3JpcHRvci5jb25maWd1cmFibGUsXG4gICAgICAgICAgdmFsdWU6IGluaXRpYWxpemVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbml0aWFsaXplci5jYWxsKHJlY2VpdmVyKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlY2VpdmVyLCBlbGVtZW50LmtleSwgZGVzY3JpcHRvcik7XG4gICAgfSxcbiAgICBkZWNvcmF0ZUNsYXNzOiBmdW5jdGlvbiAoZWxlbWVudHMsIGRlY29yYXRvcnMpIHtcbiAgICAgIHZhciBuZXdFbGVtZW50cyA9IFtdO1xuICAgICAgdmFyIGZpbmlzaGVycyA9IFtdO1xuICAgICAgdmFyIHBsYWNlbWVudHMgPSB7XG4gICAgICAgIHN0YXRpYzogW10sXG4gICAgICAgIHByb3RvdHlwZTogW10sXG4gICAgICAgIG93bjogW11cbiAgICAgIH07XG4gICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuYWRkRWxlbWVudFBsYWNlbWVudChlbGVtZW50LCBwbGFjZW1lbnRzKTtcbiAgICAgIH0sIHRoaXMpO1xuICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBpZiAoIV9oYXNEZWNvcmF0b3JzKGVsZW1lbnQpKSByZXR1cm4gbmV3RWxlbWVudHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgdmFyIGVsZW1lbnRGaW5pc2hlcnNFeHRyYXMgPSB0aGlzLmRlY29yYXRlRWxlbWVudChlbGVtZW50LCBwbGFjZW1lbnRzKTtcbiAgICAgICAgbmV3RWxlbWVudHMucHVzaChlbGVtZW50RmluaXNoZXJzRXh0cmFzLmVsZW1lbnQpO1xuICAgICAgICBuZXdFbGVtZW50cy5wdXNoLmFwcGx5KG5ld0VsZW1lbnRzLCBlbGVtZW50RmluaXNoZXJzRXh0cmFzLmV4dHJhcyk7XG4gICAgICAgIGZpbmlzaGVycy5wdXNoLmFwcGx5KGZpbmlzaGVycywgZWxlbWVudEZpbmlzaGVyc0V4dHJhcy5maW5pc2hlcnMpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgICBpZiAoIWRlY29yYXRvcnMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlbGVtZW50czogbmV3RWxlbWVudHMsXG4gICAgICAgICAgZmluaXNoZXJzOiBmaW5pc2hlcnNcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29yYXRlQ29uc3RydWN0b3IobmV3RWxlbWVudHMsIGRlY29yYXRvcnMpO1xuICAgICAgZmluaXNoZXJzLnB1c2guYXBwbHkoZmluaXNoZXJzLCByZXN1bHQuZmluaXNoZXJzKTtcbiAgICAgIHJlc3VsdC5maW5pc2hlcnMgPSBmaW5pc2hlcnM7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG4gICAgYWRkRWxlbWVudFBsYWNlbWVudDogZnVuY3Rpb24gKGVsZW1lbnQsIHBsYWNlbWVudHMsIHNpbGVudCkge1xuICAgICAgdmFyIGtleXMgPSBwbGFjZW1lbnRzW2VsZW1lbnQucGxhY2VtZW50XTtcbiAgICAgIGlmICghc2lsZW50ICYmIGtleXMuaW5kZXhPZihlbGVtZW50LmtleSkgIT09IC0xKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJEdXBsaWNhdGVkIGVsZW1lbnQgKFwiICsgZWxlbWVudC5rZXkgKyBcIilcIik7XG4gICAgICB9XG4gICAgICBrZXlzLnB1c2goZWxlbWVudC5rZXkpO1xuICAgIH0sXG4gICAgZGVjb3JhdGVFbGVtZW50OiBmdW5jdGlvbiAoZWxlbWVudCwgcGxhY2VtZW50cykge1xuICAgICAgdmFyIGV4dHJhcyA9IFtdO1xuICAgICAgdmFyIGZpbmlzaGVycyA9IFtdO1xuICAgICAgZm9yICh2YXIgZGVjb3JhdG9ycyA9IGVsZW1lbnQuZGVjb3JhdG9ycywgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdmFyIGtleXMgPSBwbGFjZW1lbnRzW2VsZW1lbnQucGxhY2VtZW50XTtcbiAgICAgICAga2V5cy5zcGxpY2Uoa2V5cy5pbmRleE9mKGVsZW1lbnQua2V5KSwgMSk7XG4gICAgICAgIHZhciBlbGVtZW50T2JqZWN0ID0gdGhpcy5mcm9tRWxlbWVudERlc2NyaXB0b3IoZWxlbWVudCk7XG4gICAgICAgIHZhciBlbGVtZW50RmluaXNoZXJFeHRyYXMgPSB0aGlzLnRvRWxlbWVudEZpbmlzaGVyRXh0cmFzKCgwLCBkZWNvcmF0b3JzW2ldKShlbGVtZW50T2JqZWN0KSB8fCBlbGVtZW50T2JqZWN0KTtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRGaW5pc2hlckV4dHJhcy5lbGVtZW50O1xuICAgICAgICB0aGlzLmFkZEVsZW1lbnRQbGFjZW1lbnQoZWxlbWVudCwgcGxhY2VtZW50cyk7XG4gICAgICAgIGlmIChlbGVtZW50RmluaXNoZXJFeHRyYXMuZmluaXNoZXIpIHtcbiAgICAgICAgICBmaW5pc2hlcnMucHVzaChlbGVtZW50RmluaXNoZXJFeHRyYXMuZmluaXNoZXIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXdFeHRyYXMgPSBlbGVtZW50RmluaXNoZXJFeHRyYXMuZXh0cmFzO1xuICAgICAgICBpZiAobmV3RXh0cmFzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBuZXdFeHRyYXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRWxlbWVudFBsYWNlbWVudChuZXdFeHRyYXNbal0sIHBsYWNlbWVudHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBleHRyYXMucHVzaC5hcHBseShleHRyYXMsIG5ld0V4dHJhcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgIGZpbmlzaGVyczogZmluaXNoZXJzLFxuICAgICAgICBleHRyYXM6IGV4dHJhc1xuICAgICAgfTtcbiAgICB9LFxuICAgIGRlY29yYXRlQ29uc3RydWN0b3I6IGZ1bmN0aW9uIChlbGVtZW50cywgZGVjb3JhdG9ycykge1xuICAgICAgdmFyIGZpbmlzaGVycyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdmFyIG9iaiA9IHRoaXMuZnJvbUNsYXNzRGVzY3JpcHRvcihlbGVtZW50cyk7XG4gICAgICAgIHZhciBlbGVtZW50c0FuZEZpbmlzaGVyID0gdGhpcy50b0NsYXNzRGVzY3JpcHRvcigoMCwgZGVjb3JhdG9yc1tpXSkob2JqKSB8fCBvYmopO1xuICAgICAgICBpZiAoZWxlbWVudHNBbmRGaW5pc2hlci5maW5pc2hlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgZmluaXNoZXJzLnB1c2goZWxlbWVudHNBbmRGaW5pc2hlci5maW5pc2hlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVsZW1lbnRzQW5kRmluaXNoZXIuZWxlbWVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGVsZW1lbnRzID0gZWxlbWVudHNBbmRGaW5pc2hlci5lbGVtZW50cztcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGVsZW1lbnRzLmxlbmd0aCAtIDE7IGorKykge1xuICAgICAgICAgICAgZm9yICh2YXIgayA9IGogKyAxOyBrIDwgZWxlbWVudHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzW2pdLmtleSA9PT0gZWxlbWVudHNba10ua2V5ICYmIGVsZW1lbnRzW2pdLnBsYWNlbWVudCA9PT0gZWxlbWVudHNba10ucGxhY2VtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkR1cGxpY2F0ZWQgZWxlbWVudCAoXCIgKyBlbGVtZW50c1tqXS5rZXkgKyBcIilcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVsZW1lbnRzOiBlbGVtZW50cyxcbiAgICAgICAgZmluaXNoZXJzOiBmaW5pc2hlcnNcbiAgICAgIH07XG4gICAgfSxcbiAgICBmcm9tRWxlbWVudERlc2NyaXB0b3I6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICB2YXIgb2JqID0ge1xuICAgICAgICBraW5kOiBlbGVtZW50LmtpbmQsXG4gICAgICAgIGtleTogZWxlbWVudC5rZXksXG4gICAgICAgIHBsYWNlbWVudDogZWxlbWVudC5wbGFjZW1lbnQsXG4gICAgICAgIGRlc2NyaXB0b3I6IGVsZW1lbnQuZGVzY3JpcHRvclxuICAgICAgfTtcbiAgICAgIHZhciBkZXNjID0ge1xuICAgICAgICB2YWx1ZTogXCJEZXNjcmlwdG9yXCIsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIFN5bWJvbC50b1N0cmluZ1RhZywgZGVzYyk7XG4gICAgICBpZiAoZWxlbWVudC5raW5kID09PSBcImZpZWxkXCIpIG9iai5pbml0aWFsaXplciA9IGVsZW1lbnQuaW5pdGlhbGl6ZXI7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgdG9FbGVtZW50RGVzY3JpcHRvcnM6IGZ1bmN0aW9uIChlbGVtZW50T2JqZWN0cykge1xuICAgICAgaWYgKGVsZW1lbnRPYmplY3RzID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgIHJldHVybiBfdG9BcnJheShlbGVtZW50T2JqZWN0cykubWFwKGZ1bmN0aW9uIChlbGVtZW50T2JqZWN0KSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy50b0VsZW1lbnREZXNjcmlwdG9yKGVsZW1lbnRPYmplY3QpO1xuICAgICAgICB0aGlzLmRpc2FsbG93UHJvcGVydHkoZWxlbWVudE9iamVjdCwgXCJmaW5pc2hlclwiLCBcIkFuIGVsZW1lbnQgZGVzY3JpcHRvclwiKTtcbiAgICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KGVsZW1lbnRPYmplY3QsIFwiZXh0cmFzXCIsIFwiQW4gZWxlbWVudCBkZXNjcmlwdG9yXCIpO1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgIH0sIHRoaXMpO1xuICAgIH0sXG4gICAgdG9FbGVtZW50RGVzY3JpcHRvcjogZnVuY3Rpb24gKGVsZW1lbnRPYmplY3QpIHtcbiAgICAgIHZhciBraW5kID0gU3RyaW5nKGVsZW1lbnRPYmplY3Qua2luZCk7XG4gICAgICBpZiAoa2luZCAhPT0gXCJtZXRob2RcIiAmJiBraW5kICE9PSBcImZpZWxkXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQW4gZWxlbWVudCBkZXNjcmlwdG9yXFwncyAua2luZCBwcm9wZXJ0eSBtdXN0IGJlIGVpdGhlciBcIm1ldGhvZFwiIG9yJyArICcgXCJmaWVsZFwiLCBidXQgYSBkZWNvcmF0b3IgY3JlYXRlZCBhbiBlbGVtZW50IGRlc2NyaXB0b3Igd2l0aCcgKyAnIC5raW5kIFwiJyArIGtpbmQgKyAnXCInKTtcbiAgICAgIH1cbiAgICAgIHZhciBrZXkgPSBfdG9Qcm9wZXJ0eUtleShlbGVtZW50T2JqZWN0LmtleSk7XG4gICAgICB2YXIgcGxhY2VtZW50ID0gU3RyaW5nKGVsZW1lbnRPYmplY3QucGxhY2VtZW50KTtcbiAgICAgIGlmIChwbGFjZW1lbnQgIT09IFwic3RhdGljXCIgJiYgcGxhY2VtZW50ICE9PSBcInByb3RvdHlwZVwiICYmIHBsYWNlbWVudCAhPT0gXCJvd25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbiBlbGVtZW50IGRlc2NyaXB0b3JcXCdzIC5wbGFjZW1lbnQgcHJvcGVydHkgbXVzdCBiZSBvbmUgb2YgXCJzdGF0aWNcIiwnICsgJyBcInByb3RvdHlwZVwiIG9yIFwib3duXCIsIGJ1dCBhIGRlY29yYXRvciBjcmVhdGVkIGFuIGVsZW1lbnQgZGVzY3JpcHRvcicgKyAnIHdpdGggLnBsYWNlbWVudCBcIicgKyBwbGFjZW1lbnQgKyAnXCInKTtcbiAgICAgIH1cbiAgICAgIHZhciBkZXNjcmlwdG9yID0gZWxlbWVudE9iamVjdC5kZXNjcmlwdG9yO1xuICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KGVsZW1lbnRPYmplY3QsIFwiZWxlbWVudHNcIiwgXCJBbiBlbGVtZW50IGRlc2NyaXB0b3JcIik7XG4gICAgICB2YXIgZWxlbWVudCA9IHtcbiAgICAgICAga2luZDoga2luZCxcbiAgICAgICAga2V5OiBrZXksXG4gICAgICAgIHBsYWNlbWVudDogcGxhY2VtZW50LFxuICAgICAgICBkZXNjcmlwdG9yOiBPYmplY3QuYXNzaWduKHt9LCBkZXNjcmlwdG9yKVxuICAgICAgfTtcbiAgICAgIGlmIChraW5kICE9PSBcImZpZWxkXCIpIHtcbiAgICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KGVsZW1lbnRPYmplY3QsIFwiaW5pdGlhbGl6ZXJcIiwgXCJBIG1ldGhvZCBkZXNjcmlwdG9yXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KGRlc2NyaXB0b3IsIFwiZ2V0XCIsIFwiVGhlIHByb3BlcnR5IGRlc2NyaXB0b3Igb2YgYSBmaWVsZCBkZXNjcmlwdG9yXCIpO1xuICAgICAgICB0aGlzLmRpc2FsbG93UHJvcGVydHkoZGVzY3JpcHRvciwgXCJzZXRcIiwgXCJUaGUgcHJvcGVydHkgZGVzY3JpcHRvciBvZiBhIGZpZWxkIGRlc2NyaXB0b3JcIik7XG4gICAgICAgIHRoaXMuZGlzYWxsb3dQcm9wZXJ0eShkZXNjcmlwdG9yLCBcInZhbHVlXCIsIFwiVGhlIHByb3BlcnR5IGRlc2NyaXB0b3Igb2YgYSBmaWVsZCBkZXNjcmlwdG9yXCIpO1xuICAgICAgICBlbGVtZW50LmluaXRpYWxpemVyID0gZWxlbWVudE9iamVjdC5pbml0aWFsaXplcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH0sXG4gICAgdG9FbGVtZW50RmluaXNoZXJFeHRyYXM6IGZ1bmN0aW9uIChlbGVtZW50T2JqZWN0KSB7XG4gICAgICB2YXIgZWxlbWVudCA9IHRoaXMudG9FbGVtZW50RGVzY3JpcHRvcihlbGVtZW50T2JqZWN0KTtcbiAgICAgIHZhciBmaW5pc2hlciA9IF9vcHRpb25hbENhbGxhYmxlUHJvcGVydHkoZWxlbWVudE9iamVjdCwgXCJmaW5pc2hlclwiKTtcbiAgICAgIHZhciBleHRyYXMgPSB0aGlzLnRvRWxlbWVudERlc2NyaXB0b3JzKGVsZW1lbnRPYmplY3QuZXh0cmFzKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgIGZpbmlzaGVyOiBmaW5pc2hlcixcbiAgICAgICAgZXh0cmFzOiBleHRyYXNcbiAgICAgIH07XG4gICAgfSxcbiAgICBmcm9tQ2xhc3NEZXNjcmlwdG9yOiBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICAgIHZhciBvYmogPSB7XG4gICAgICAgIGtpbmQ6IFwiY2xhc3NcIixcbiAgICAgICAgZWxlbWVudHM6IGVsZW1lbnRzLm1hcCh0aGlzLmZyb21FbGVtZW50RGVzY3JpcHRvciwgdGhpcylcbiAgICAgIH07XG4gICAgICB2YXIgZGVzYyA9IHtcbiAgICAgICAgdmFsdWU6IFwiRGVzY3JpcHRvclwiLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH07XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBTeW1ib2wudG9TdHJpbmdUYWcsIGRlc2MpO1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIHRvQ2xhc3NEZXNjcmlwdG9yOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICB2YXIga2luZCA9IFN0cmluZyhvYmoua2luZCk7XG4gICAgICBpZiAoa2luZCAhPT0gXCJjbGFzc1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0EgY2xhc3MgZGVzY3JpcHRvclxcJ3MgLmtpbmQgcHJvcGVydHkgbXVzdCBiZSBcImNsYXNzXCIsIGJ1dCBhIGRlY29yYXRvcicgKyAnIGNyZWF0ZWQgYSBjbGFzcyBkZXNjcmlwdG9yIHdpdGggLmtpbmQgXCInICsga2luZCArICdcIicpO1xuICAgICAgfVxuICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KG9iaiwgXCJrZXlcIiwgXCJBIGNsYXNzIGRlc2NyaXB0b3JcIik7XG4gICAgICB0aGlzLmRpc2FsbG93UHJvcGVydHkob2JqLCBcInBsYWNlbWVudFwiLCBcIkEgY2xhc3MgZGVzY3JpcHRvclwiKTtcbiAgICAgIHRoaXMuZGlzYWxsb3dQcm9wZXJ0eShvYmosIFwiZGVzY3JpcHRvclwiLCBcIkEgY2xhc3MgZGVzY3JpcHRvclwiKTtcbiAgICAgIHRoaXMuZGlzYWxsb3dQcm9wZXJ0eShvYmosIFwiaW5pdGlhbGl6ZXJcIiwgXCJBIGNsYXNzIGRlc2NyaXB0b3JcIik7XG4gICAgICB0aGlzLmRpc2FsbG93UHJvcGVydHkob2JqLCBcImV4dHJhc1wiLCBcIkEgY2xhc3MgZGVzY3JpcHRvclwiKTtcbiAgICAgIHZhciBmaW5pc2hlciA9IF9vcHRpb25hbENhbGxhYmxlUHJvcGVydHkob2JqLCBcImZpbmlzaGVyXCIpO1xuICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy50b0VsZW1lbnREZXNjcmlwdG9ycyhvYmouZWxlbWVudHMpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZWxlbWVudHM6IGVsZW1lbnRzLFxuICAgICAgICBmaW5pc2hlcjogZmluaXNoZXJcbiAgICAgIH07XG4gICAgfSxcbiAgICBydW5DbGFzc0ZpbmlzaGVyczogZnVuY3Rpb24gKGNvbnN0cnVjdG9yLCBmaW5pc2hlcnMpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmluaXNoZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBuZXdDb25zdHJ1Y3RvciA9ICgwLCBmaW5pc2hlcnNbaV0pKGNvbnN0cnVjdG9yKTtcbiAgICAgICAgaWYgKG5ld0NvbnN0cnVjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG5ld0NvbnN0cnVjdG9yICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGaW5pc2hlcnMgbXVzdCByZXR1cm4gYSBjb25zdHJ1Y3Rvci5cIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0cnVjdG9yID0gbmV3Q29uc3RydWN0b3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjb25zdHJ1Y3RvcjtcbiAgICB9LFxuICAgIGRpc2FsbG93UHJvcGVydHk6IGZ1bmN0aW9uIChvYmosIG5hbWUsIG9iamVjdFR5cGUpIHtcbiAgICAgIGlmIChvYmpbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKG9iamVjdFR5cGUgKyBcIiBjYW4ndCBoYXZlIGEgLlwiICsgbmFtZSArIFwiIHByb3BlcnR5LlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJldHVybiBhcGk7XG59XG5mdW5jdGlvbiBfY3JlYXRlRWxlbWVudERlc2NyaXB0b3IoZGVmKSB7XG4gIHZhciBrZXkgPSBfdG9Qcm9wZXJ0eUtleShkZWYua2V5KTtcbiAgdmFyIGRlc2NyaXB0b3I7XG4gIGlmIChkZWYua2luZCA9PT0gXCJtZXRob2RcIikge1xuICAgIGRlc2NyaXB0b3IgPSB7XG4gICAgICB2YWx1ZTogZGVmLnZhbHVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH07XG4gIH0gZWxzZSBpZiAoZGVmLmtpbmQgPT09IFwiZ2V0XCIpIHtcbiAgICBkZXNjcmlwdG9yID0ge1xuICAgICAgZ2V0OiBkZWYudmFsdWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH07XG4gIH0gZWxzZSBpZiAoZGVmLmtpbmQgPT09IFwic2V0XCIpIHtcbiAgICBkZXNjcmlwdG9yID0ge1xuICAgICAgc2V0OiBkZWYudmFsdWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH07XG4gIH0gZWxzZSBpZiAoZGVmLmtpbmQgPT09IFwiZmllbGRcIikge1xuICAgIGRlc2NyaXB0b3IgPSB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICB9O1xuICB9XG4gIHZhciBlbGVtZW50ID0ge1xuICAgIGtpbmQ6IGRlZi5raW5kID09PSBcImZpZWxkXCIgPyBcImZpZWxkXCIgOiBcIm1ldGhvZFwiLFxuICAgIGtleToga2V5LFxuICAgIHBsYWNlbWVudDogZGVmLnN0YXRpYyA/IFwic3RhdGljXCIgOiBkZWYua2luZCA9PT0gXCJmaWVsZFwiID8gXCJvd25cIiA6IFwicHJvdG90eXBlXCIsXG4gICAgZGVzY3JpcHRvcjogZGVzY3JpcHRvclxuICB9O1xuICBpZiAoZGVmLmRlY29yYXRvcnMpIGVsZW1lbnQuZGVjb3JhdG9ycyA9IGRlZi5kZWNvcmF0b3JzO1xuICBpZiAoZGVmLmtpbmQgPT09IFwiZmllbGRcIikgZWxlbWVudC5pbml0aWFsaXplciA9IGRlZi52YWx1ZTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5mdW5jdGlvbiBfY29hbGVzY2VHZXR0ZXJTZXR0ZXIoZWxlbWVudCwgb3RoZXIpIHtcbiAgaWYgKGVsZW1lbnQuZGVzY3JpcHRvci5nZXQgIT09IHVuZGVmaW5lZCkge1xuICAgIG90aGVyLmRlc2NyaXB0b3IuZ2V0ID0gZWxlbWVudC5kZXNjcmlwdG9yLmdldDtcbiAgfSBlbHNlIHtcbiAgICBvdGhlci5kZXNjcmlwdG9yLnNldCA9IGVsZW1lbnQuZGVzY3JpcHRvci5zZXQ7XG4gIH1cbn1cbmZ1bmN0aW9uIF9jb2FsZXNjZUNsYXNzRWxlbWVudHMoZWxlbWVudHMpIHtcbiAgdmFyIG5ld0VsZW1lbnRzID0gW107XG4gIHZhciBpc1NhbWVFbGVtZW50ID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIG90aGVyLmtpbmQgPT09IFwibWV0aG9kXCIgJiYgb3RoZXIua2V5ID09PSBlbGVtZW50LmtleSAmJiBvdGhlci5wbGFjZW1lbnQgPT09IGVsZW1lbnQucGxhY2VtZW50O1xuICB9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICB2YXIgb3RoZXI7XG4gICAgaWYgKGVsZW1lbnQua2luZCA9PT0gXCJtZXRob2RcIiAmJiAob3RoZXIgPSBuZXdFbGVtZW50cy5maW5kKGlzU2FtZUVsZW1lbnQpKSkge1xuICAgICAgaWYgKF9pc0RhdGFEZXNjcmlwdG9yKGVsZW1lbnQuZGVzY3JpcHRvcikgfHwgX2lzRGF0YURlc2NyaXB0b3Iob3RoZXIuZGVzY3JpcHRvcikpIHtcbiAgICAgICAgaWYgKF9oYXNEZWNvcmF0b3JzKGVsZW1lbnQpIHx8IF9oYXNEZWNvcmF0b3JzKG90aGVyKSkge1xuICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcIkR1cGxpY2F0ZWQgbWV0aG9kcyAoXCIgKyBlbGVtZW50LmtleSArIFwiKSBjYW4ndCBiZSBkZWNvcmF0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIG90aGVyLmRlc2NyaXB0b3IgPSBlbGVtZW50LmRlc2NyaXB0b3I7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoX2hhc0RlY29yYXRvcnMoZWxlbWVudCkpIHtcbiAgICAgICAgICBpZiAoX2hhc0RlY29yYXRvcnMob3RoZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJEZWNvcmF0b3JzIGNhbid0IGJlIHBsYWNlZCBvbiBkaWZmZXJlbnQgYWNjZXNzb3JzIHdpdGggZm9yIFwiICsgXCJ0aGUgc2FtZSBwcm9wZXJ0eSAoXCIgKyBlbGVtZW50LmtleSArIFwiKS5cIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIG90aGVyLmRlY29yYXRvcnMgPSBlbGVtZW50LmRlY29yYXRvcnM7XG4gICAgICAgIH1cbiAgICAgICAgX2NvYWxlc2NlR2V0dGVyU2V0dGVyKGVsZW1lbnQsIG90aGVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbmV3RWxlbWVudHMucHVzaChlbGVtZW50KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ld0VsZW1lbnRzO1xufVxuZnVuY3Rpb24gX2hhc0RlY29yYXRvcnMoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudC5kZWNvcmF0b3JzICYmIGVsZW1lbnQuZGVjb3JhdG9ycy5sZW5ndGg7XG59XG5mdW5jdGlvbiBfaXNEYXRhRGVzY3JpcHRvcihkZXNjKSB7XG4gIHJldHVybiBkZXNjICE9PSB1bmRlZmluZWQgJiYgIShkZXNjLnZhbHVlID09PSB1bmRlZmluZWQgJiYgZGVzYy53cml0YWJsZSA9PT0gdW5kZWZpbmVkKTtcbn1cbmZ1bmN0aW9uIF9vcHRpb25hbENhbGxhYmxlUHJvcGVydHkob2JqLCBuYW1lKSB7XG4gIHZhciB2YWx1ZSA9IG9ialtuYW1lXTtcbiAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXhwZWN0ZWQgJ1wiICsgbmFtZSArIFwiJyB0byBiZSBhIGZ1bmN0aW9uXCIpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVNZXRob2RHZXQocmVjZWl2ZXIsIHByaXZhdGVTZXQsIGZuKSB7XG4gIGlmICghcHJpdmF0ZVNldC5oYXMocmVjZWl2ZXIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XG4gIH1cbiAgcmV0dXJuIGZuO1xufVxuZnVuY3Rpb24gX2NoZWNrUHJpdmF0ZVJlZGVjbGFyYXRpb24ob2JqLCBwcml2YXRlQ29sbGVjdGlvbikge1xuICBpZiAocHJpdmF0ZUNvbGxlY3Rpb24uaGFzKG9iaikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGluaXRpYWxpemUgdGhlIHNhbWUgcHJpdmF0ZSBlbGVtZW50cyB0d2ljZSBvbiBhbiBvYmplY3RcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjKG9iaiwgcHJpdmF0ZU1hcCwgdmFsdWUpIHtcbiAgX2NoZWNrUHJpdmF0ZVJlZGVjbGFyYXRpb24ob2JqLCBwcml2YXRlTWFwKTtcbiAgcHJpdmF0ZU1hcC5zZXQob2JqLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBfY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWMob2JqLCBwcml2YXRlU2V0KSB7XG4gIF9jaGVja1ByaXZhdGVSZWRlY2xhcmF0aW9uKG9iaiwgcHJpdmF0ZVNldCk7XG4gIHByaXZhdGVTZXQuYWRkKG9iaik7XG59XG5mdW5jdGlvbiBfY2xhc3NQcml2YXRlTWV0aG9kU2V0KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHJlYXNzaWduIHByaXZhdGUgbWV0aG9kXCIpO1xufVxuZnVuY3Rpb24gX2lkZW50aXR5KHgpIHtcbiAgcmV0dXJuIHg7XG59IiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCBVSVRyYW5zZm9ybSwgQ0NCb29sZWFuIH0gZnJvbSAnY2MnO1xyXG5jb25zdCB7IGNjY2xhc3MsIHByb3BlcnR5LCBleGVjdXRlSW5FZGl0TW9kZSB9ID0gX2RlY29yYXRvcjtcclxuXHJcbkBjY2NsYXNzKCdTY2FsZUZvbGxvd0xheW91dCcpXHJcbmV4cG9ydCBjbGFzcyBTY2FsZUZvbGxvd0xheW91dCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBVSVRyYW5zZm9ybSwgdG9vbHRpcDogXCJOb2RlIGNoYVwiIH0pXHJcbiAgICBwYXJlbnQ6IFVJVHJhbnNmb3JtIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgQHByb3BlcnR5KHsgdHlwZTogQ0NCb29sZWFuLCB0b29sdGlwOiBcIlRoZW8gY2hp4buBdSBy4buZbmdcIiB9KVxyXG4gICAgZm9sbG93V2lkdGggPSB0cnVlO1xyXG5cclxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IENDQm9vbGVhbiwgdG9vbHRpcDogXCJUaGVvIGNoaeG7gXUgY2FvXCIgfSlcclxuICAgIGZvbGxvd0hlaWdodCA9IHRydWU7XHJcblxyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlU2NhbGUoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTY2FsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVNjYWxlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5wYXJlbnQpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gY2jhu4luaCB1aVRyYW5zZm9ybSDEkeG7kWkgdMaw4bujbmcgbsOgeSB0aGVvIHBhcmVudFxyXG4gICAgICAgIGNvbnN0IHVpVHJhbnNmb3JtID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSk7XHJcbiAgICAgICAgaWYgKCF1aVRyYW5zZm9ybSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBwYXJlbnRXaWR0aCA9IHRoaXMucGFyZW50LndpZHRoO1xyXG4gICAgICAgIGNvbnN0IHBhcmVudEhlaWdodCA9IHRoaXMucGFyZW50LmhlaWdodDtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHNjYWxlIHJhdGlvc1xyXG4gICAgICAgIGNvbnN0IHdpZHRoUmF0aW8gPSBwYXJlbnRXaWR0aCAvIHVpVHJhbnNmb3JtLndpZHRoO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodFJhdGlvID0gcGFyZW50SGVpZ2h0IC8gdWlUcmFuc2Zvcm0uaGVpZ2h0O1xyXG5cclxuICAgICAgICAvLyBBcHBseSBzY2FsZSBiYXNlZCBvbiBmb2xsb3cgc2V0dGluZ3NcclxuICAgICAgICBpZiAodGhpcy5mb2xsb3dXaWR0aCAmJiB0aGlzLmZvbGxvd0hlaWdodCkge1xyXG4gICAgICAgICAgICAvLyBVc2UgdGhlIHNtYWxsZXIgcmF0aW8gdG8gbWFpbnRhaW4gYXNwZWN0IHJhdGlvXHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gTWF0aC5taW4od2lkdGhSYXRpbywgaGVpZ2h0UmF0aW8pO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuc2V0U2NhbGUoc2NhbGUsIHNjYWxlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZm9sbG93V2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnNldFNjYWxlKHdpZHRoUmF0aW8sIHRoaXMubm9kZS5zY2FsZS55KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZm9sbG93SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5zZXRTY2FsZSh0aGlzLm5vZGUuc2NhbGUueCwgaGVpZ2h0UmF0aW8pO1xyXG4gICAgICAgIH0gICAgICAgICAgIFxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuIiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlIH0gZnJvbSAnY2MnO1xyXG5jb25zdCB7IGNjY2xhc3MsIHByb3BlcnR5IH0gPSBfZGVjb3JhdG9yO1xyXG5cclxuQGNjY2xhc3MoJ1NjcmVlblJhdGlvJylcclxuZXhwb3J0IGNsYXNzIFNjcmVlblJhdGlvIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uUmVzaXplLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMub25SZXNpemUoKTsgLy8gR+G7jWkgbOG6p24gxJHhuqd1IMSR4buDIGluIHJhIHThu7cgbOG7hyBtw6BuIGjDrG5oIGtoaSBraOG7n2kgxJHhu5luZ1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVzaXplKCkge1xyXG4gICAgICAgIGNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IHJhdGlvID0gd2lkdGggLyBoZWlnaHQ7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFNjcmVlbiByYXRpbzogJHtyYXRpb31gKTtcclxuXHJcbiAgICAgICAgLy8gVOG6oW8gdsOgIHBow6F0IHPhu7Ega2nhu4duIHTDuXkgY2jhu4luaFxyXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdzY3JlZW5SYXRpb0NoYW5nZWQnLCB7XHJcbiAgICAgICAgICAgIGRldGFpbDogeyByYXRpbyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShkZWx0YVRpbWU6IG51bWJlcikge1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCBMYWJlbCB9IGZyb20gJ2NjJztcclxuY29uc3QgeyBjY2NsYXNzLCBwcm9wZXJ0eSB9ID0gX2RlY29yYXRvcjtcclxuXHJcbkBjY2NsYXNzKCdUZXN0JylcclxuZXhwb3J0IGNsYXNzIFRlc3QgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgLy8gSGnhu4NuIHRo4buLIGJp4bq/biBwcml2YXRlIHRyb25nIEluc3BlY3RvclxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcml2YXRlIF9jb3VudDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvLyBIaeG7g24gdGjhu4sgcHVibGljIHRyb25nIEluc3BlY3RvclxyXG4gICAgQHByb3BlcnR5KHsgdG9vbHRpcDogXCJU4buRYyDEkeG7mSB0aGF5IMSR4buVaSBnacOhIHRy4buLXCIgfSlcclxuICAgIHB1YmxpYyBpbmNyZW1lbnQ6IG51bWJlciA9IDE7XHJcblxyXG4gICAgLy8gVGhhbSBjaGnhur91IMSR4bq/biBub2RlIExhYmVsIChrw6lvIHRo4bqjIHRyb25nIEluc3BlY3RvcilcclxuICAgIEBwcm9wZXJ0eShMYWJlbClcclxuICAgIHB1YmxpYyBjb3VudExhYmVsOiBMYWJlbCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIC8vIEjDoG0ga2jhu59pIHThuqFvXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZUxhYmVsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSMOgbSBj4bqtcCBuaOG6rXQgbGFiZWxcclxuICAgIHByaXZhdGUgdXBkYXRlTGFiZWwoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY291bnRMYWJlbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvdW50TGFiZWwuc3RyaW5nID0gYENvdW50OiAke3RoaXMuX2NvdW50fWA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEjDoG0gY8OzIHRo4buDIGfhu41pIHThu6sgSW5zcGVjdG9yIHRow7RuZyBxdWEgYnV0dG9uXHJcbiAgICBwdWJsaWMgaW5jcmVhc2VDb3VudCgpIHtcclxuICAgICAgICB0aGlzLl9jb3VudCArPSB0aGlzLmluY3JlbWVudDtcclxuICAgICAgICB0aGlzLnVwZGF0ZUxhYmVsKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJDb3VudCBpbmNyZWFzZWQgdG86XCIsIHRoaXMuX2NvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBIw6BtIHJlc2V0XHJcbiAgICBwdWJsaWMgcmVzZXRDb3VudCgpIHtcclxuICAgICAgICB0aGlzLl9jb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy51cGRhdGVMYWJlbCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ291bnQgcmVzZXRcIik7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBfZGVjb3JhdG9yLCBDb21wb25lbnQsIE5vZGUsIFVJVHJhbnNmb3JtLCBWZWMzLCBDQ0Zsb2F0LCBDQ0Jvb2xlYW4sIFJlY3QsIEVudW0sIFZlYzIgfSBmcm9tICdjYyc7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHksIGV4ZWN1dGVJbkVkaXRNb2RlIH0gPSBfZGVjb3JhdG9yO1xyXG5cclxuQGNjY2xhc3MoJ1ZlcnRpY2FsTGF5b3V0JylcclxuQGV4ZWN1dGVJbkVkaXRNb2RlXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZlcnRpY2FsTGF5b3V0IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIEBwcm9wZXJ0eSh7IFxyXG4gICAgICAgIHR5cGU6IENDRmxvYXQsIFxyXG4gICAgICAgIHRvb2x0aXA6IFwiS2hv4bqjbmcgY8OhY2ggZ2nhu69hIGPDoWMgcGjhuqduIHThu60gY29uXCIsXHJcbiAgICAgICAgbWluOiAwIFxyXG4gICAgfSlcclxuICAgIHNwYWNpbmc6IG51bWJlciA9IDEwO1xyXG5cclxuICAgIHByaXZhdGUgX3BhcmVudFRyYW5zZm9ybTogVUlUcmFuc2Zvcm0gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICB0aGlzLl9wYXJlbnRUcmFuc2Zvcm0gPSB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKTtcclxuICAgICAgICB0aGlzLl9wYXJlbnRUcmFuc2Zvcm0uc2V0QW5jaG9yUG9pbnQoMCwgMCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUxheW91dCgpIHtcclxuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMuX3BhcmVudFRyYW5zZm9ybS53aWR0aDtcclxuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmdldENoaWxkSGVpZ2h0KCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMubm9kZS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICBjaGlsZC5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pLnNldENvbnRlbnRTaXplKHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG5ld1BvcyA9IG5ldyBWZWMzKDAsIDAsIDApO1xyXG4gICAgICAgIC8vIHNldCB24buLIHRyw60gY2hvIGPDoWMgY2hpbGRcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLm5vZGUuY2hpbGRyZW5baV07XHJcbiAgICAgICAgICAgIGNoaWxkLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSkuc2V0QW5jaG9yUG9pbnQoMCwgMCk7XHJcbiAgICAgICAgICAgIGNoaWxkLnNldFBvc2l0aW9uKG5ld1Bvcyk7XHJcblxyXG4gICAgICAgICAgICBuZXdQb3MueSArPSBoZWlnaHQgKyB0aGlzLmdldFNwYWNpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRTcGFjaW5nKCk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IGNvdW50ID0gdGhpcy5ub2RlLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICByZXR1cm4gKHRoaXMuc3BhY2luZyAqIChjb3VudCAtIDEpKSAvIGNvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNoaeG7gXUgZMOgaSBj4bunYSBjw6FjIGNoaWxkIGPhuqduIMSR4buDIGtow610IHbhu5tpIGNoYVxyXG4gICAgcHJpdmF0ZSBnZXRDaGlsZEhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBjb3VudCA9IHRoaXMubm9kZS5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLl9wYXJlbnRUcmFuc2Zvcm0uaGVpZ2h0IC0gKHRoaXMuZ2V0U3BhY2luZygpICogKGNvdW50IC0gMSkpKSAvIGNvdW50O1xyXG4gICAgfVxyXG5cclxufSIsIi8qXHJcbiogxJHDonkgbMOgIG3hu5l0IGNvbXBvbmVudCBsYXlvdXQgZOG6oW5nIHZlcnRpY2FsIGtow7RuZyBzY2FsZSB04buxIMSR4buZbmdcclxuKi9cclxuaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCBVSVRyYW5zZm9ybSwgVmVjMiwgQ0NCb29sZWFuIH0gZnJvbSAnY2MnO1xyXG5jb25zdCB7IGNjY2xhc3MsIHByb3BlcnR5LCBleGVjdXRlSW5FZGl0TW9kZSB9ID0gX2RlY29yYXRvcjtcclxuXHJcbkBjY2NsYXNzKCdWZXJ0aWNhbExheW91dE5vU2NhbGUnKVxyXG5AZXhlY3V0ZUluRWRpdE1vZGVcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVydGljYWxMYXlvdXROb1NjYWxlIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHByaXZhdGUgX3BhcmVudFRyYW5zZm9ybTogVUlUcmFuc2Zvcm0gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBAcHJvcGVydHkoeyB0eXBlOiBDQ0Jvb2xlYW4sIHRvb2x0aXA6IFwiVOG7sSDEkeG7mW5nIGPhuq1wIG5o4bqtdCB0cm9uZyBydW50aW1lXCIgfSlcclxuICAgIGF1dG9VcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIC8vIGRhbmggc8OhY2ggdmVjdG9yMiDEkcOieSBsw6AgZGFuaCBzw6FjaCBzaXplIGPhu6dhIGPDoWMgY2hpbGQgY29uIGzDumMgYmFuIMSR4bqndVxyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0eXBlOiBbVmVjMl0sXHJcbiAgICAgICAgLy8gdmlzaWJsZTogZmFsc2VcclxuICAgIH0pXHJcbiAgICBwcml2YXRlIGNoaWxkU2l6ZTogVmVjMltdID0gW107XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5pbml0Q2hpbGRTaXplKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhcmVudFRyYW5zZm9ybSA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pO1xyXG4gICAgICAgIHRoaXMuX3BhcmVudFRyYW5zZm9ybS5zZXRBbmNob3JQb2ludCgwLCAwKTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcclxuXHJcbiAgICAgICAgLy8gc2V0IGFuY2hvciBwb2ludCBjaG8gY8OhYyBjaGlsZFxyXG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMubm9kZS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICBjaGlsZC5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pLnNldEFuY2hvclBvaW50KDAsIDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXNldEluRWRpdG9yKCkge1xyXG4gICAgICAgIHRoaXMuaW5pdENoaWxkU2l6ZSgpO1xyXG4gICAgICAgIHRoaXMuYXV0b1VwZGF0ZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5hdXRvVXBkYXRlKVxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdENoaWxkU2l6ZSgpIHtcclxuICAgICAgICB0aGlzLmNoaWxkU2l6ZSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMubm9kZS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkU2l6ZS5wdXNoKG5ldyBWZWMyKGNoaWxkLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSkud2lkdGgsIGNoaWxkLmdldENvbXBvbmVudChVSVRyYW5zZm9ybSkuaGVpZ2h0KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlTGF5b3V0KCkge1xyXG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5fcGFyZW50VHJhbnNmb3JtLndpZHRoO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuZ2V0Q2hpbGRIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgLy8gxJHhu4MgduG7iyB0csOtIGNoaWxkIGN14buRaSBsw6puaCB0csOqbiDEkeG6p3VcclxuICAgICAgICBsZXQgbGFzdENoaWxkID0gdGhpcy5ub2RlLmNoaWxkcmVuW3RoaXMubm9kZS5jaGlsZHJlbi5sZW5ndGggLSAxXTtcclxuICAgICAgICBsZXQgbGFzdENoaWxkUG9zaXRpb25ZID0gdGhpcy5fcGFyZW50VHJhbnNmb3JtLmhlaWdodCAtIGxhc3RDaGlsZC5nZXRDb21wb25lbnQoVUlUcmFuc2Zvcm0pLmhlaWdodDtcclxuICAgICAgICB0aGlzLm5vZGUuY2hpbGRyZW5bdGhpcy5ub2RlLmNoaWxkcmVuLmxlbmd0aCAtIDFdLnNldFBvc2l0aW9uKG5ldyBWZWMzKDAsIGxhc3RDaGlsZFBvc2l0aW9uWSkpO1xyXG5cclxuICAgICAgICAvLyBzZXQgduG7iyB0csOtIGNobyBjw6FjIGNoaWxkXHJcbiAgICAgICAgbGV0IG5ld1BvcyA9IG5ldyBWZWMzKDAsIDAsIDApO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ub2RlLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLm5vZGUuY2hpbGRyZW5baV07XHJcbiAgICAgICAgICAgIGNoaWxkLnNldFBvc2l0aW9uKG5ld1Bvcyk7XHJcblxyXG4gICAgICAgICAgICBuZXdQb3MueSArPSBoZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB04buxIHNjYWxlIHkga2hpIGPDoWMgcGjhuqduIHThu60gY29uIMSRw6ggbMOqbmggbmhhdVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMubm9kZS5jaGlsZHJlbltpXTtcclxuICAgICAgICAgICAgY2hpbGQuZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKS5zZXRDb250ZW50U2l6ZSh3aWR0aCwgY2hpbGQuZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtKS5oZWlnaHQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2hp4buBdSBkw6BpIGPhu6dhIGPDoWMgY2hpbGQgY+G6p24gxJHhu4Mga2jDrXQgduG7m2kgY2hhXHJcbiAgICBwcml2YXRlIGdldENoaWxkSGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IGNvdW50ID0gdGhpcy5ub2RlLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICByZXR1cm4gKHRoaXMuX3BhcmVudFRyYW5zZm9ybS5oZWlnaHQpIC8gY291bnQ7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgX2RlY29yYXRvciwgQ29tcG9uZW50LCBOb2RlLCBzeXMsIGdhbWUgfSBmcm9tICdjYyc7XHJcbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IF9kZWNvcmF0b3I7XHJcblxyXG5AY2NjbGFzcygnV2Vic2l0ZUxvYWREZXRlY3RvcicpXHJcbmV4cG9ydCBjbGFzcyBXZWJzaXRlTG9hZERldGVjdG9yIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVidWdMb2c6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIGlzRmlyc3RMb2FkOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgbG9hZFRpbWVzdGFtcDogbnVtYmVyID0gMDtcclxuXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICAvLyBMxrB1IHRpbWVzdGFtcCBraGkgY29tcG9uZW50IMSRxrDhu6NjIGto4bufaSB04bqhb1xyXG4gICAgICAgIHRoaXMubG9hZFRpbWVzdGFtcCA9IERhdGUubm93KCk7XHJcblxyXG4gICAgICAgIGlmIChzeXMuaXNCcm93c2VyKSB7XHJcbiAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgeGVtIHBhZ2UgxJHDoyBsb2FkIHhvbmcgY2jGsGFcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25QYWdlTG9hZGVkKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUGFnZUxvYWRlZCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFRoZW8gZMO1aSBuYXZpZ2F0aW9uIGV2ZW50c1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZXNob3cnLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEtp4buDbSB0cmEgeGVtIHBhZ2UgY8OzIMSRxrDhu6NjIGxvYWQgdOG7qyBjYWNoZSBraMO0bmdcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5wZXJzaXN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUGFnZUxvYWRlZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBUaGVvIGTDtWkgdmlzaWJpbGl0eSBjaGFuZ2VcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25WaXNpYmlsaXR5Q2hhbmdlZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblZpc2liaWxpdHlDaGFuZ2VkKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25QYWdlTG9hZGVkKGZyb21DYWNoZTogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3QgbG9hZFRpbWUgPSBEYXRlLm5vdygpIC0gdGhpcy5sb2FkVGltZXN0YW1wO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLmRlYnVnTG9nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBQYWdlIGxvYWRlZCAke2Zyb21DYWNoZSA/ICdmcm9tIGNhY2hlJyA6ICdmcmVzaCd9IGluICR7bG9hZFRpbWV9bXNgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBow6F0IGV2ZW50IMSR4buDIGPDoWMgY29tcG9uZW50IGtow6FjIGPDsyB0aOG7gyBs4bqvbmcgbmdoZVxyXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCd3ZWJzaXRlTG9hZGVkJywge1xyXG4gICAgICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgICAgICAgIGlzRmlyc3RMb2FkOiB0aGlzLmlzRmlyc3RMb2FkLFxyXG4gICAgICAgICAgICAgICAgZnJvbUNhY2hlOiBmcm9tQ2FjaGUsXHJcbiAgICAgICAgICAgICAgICBsb2FkVGltZTogbG9hZFRpbWUsXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuXHJcbiAgICAgICAgLy8gxJDDoW5oIGThuqV1IMSRw6Mga2jDtG5nIGPDsm4gbMOgIGZpcnN0IGxvYWQgbuG7r2FcclxuICAgICAgICB0aGlzLmlzRmlyc3RMb2FkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIEfhu41pIGNhbGxiYWNrIG7hur91IGPhuqduXHJcbiAgICAgICAgdGhpcy5vbldlYnNpdGVMb2FkZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVmlzaWJpbGl0eUNoYW5nZWQoaXNWaXNpYmxlOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVidWdMb2cpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFBhZ2UgdmlzaWJpbGl0eSBjaGFuZ2VkOiAke2lzVmlzaWJsZSA/ICd2aXNpYmxlJyA6ICdoaWRkZW4nfWApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3dlYnNpdGVWaXNpYmlsaXR5Q2hhbmdlZCcsIHtcclxuICAgICAgICAgICAgZGV0YWlsOiB7XHJcbiAgICAgICAgICAgICAgICBpc1Zpc2libGU6IGlzVmlzaWJsZSxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG5cclxuICAgICAgICAvLyBH4buNaSBjYWxsYmFjayBu4bq/dSBj4bqnblxyXG4gICAgICAgIGlmIChpc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgdGhpcy5vbldlYnNpdGVWaXNpYmxlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5vbldlYnNpdGVIaWRkZW4oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT3ZlcnJpZGUgY8OhYyBtZXRob2QgbsOgeSB0cm9uZyBjw6FjIGNsYXNzIGNvbiBu4bq/dSBj4bqnblxyXG4gICAgcHJvdGVjdGVkIG9uV2Vic2l0ZUxvYWRlZCgpIHtcclxuICAgICAgICAvLyDEkMaw4bujYyBn4buNaSBraGkgd2Vic2l0ZSBsb2FkIHhvbmdcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb25XZWJzaXRlVmlzaWJsZSgpIHtcclxuICAgICAgICAvLyDEkMaw4bujYyBn4buNaSBraGkgd2Vic2l0ZSB0cuG7nyBuw6puIHZpc2libGVcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb25XZWJzaXRlSGlkZGVuKCkge1xyXG4gICAgICAgIC8vIMSQxrDhu6NjIGfhu41pIGtoaSB3ZWJzaXRlIGLhu4sg4bqpblxyXG4gICAgfVxyXG5cclxuICAgIC8vIFB1YmxpYyBtZXRob2QgxJHhu4Mga2nhu4NtIHRyYSB0cuG6oW5nIHRow6FpXHJcbiAgICBwdWJsaWMgaXNQYWdlVmlzaWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoc3lzLmlzQnJvd3Nlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRMb2FkVGltZXN0YW1wKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZFRpbWVzdGFtcDtcclxuICAgIH1cclxufSJdfQ==